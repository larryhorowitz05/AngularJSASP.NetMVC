(function(N,U,t){function w(b){return function(){var a=arguments[0],c;c="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.1/"+(b?b+"/":"")+a;for(a=1;a<arguments.length;a++){c=c+(1==a?"?":"&")+"p"+(a-1)+"=";var d=encodeURIComponent,e;e=arguments[a];e="function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof e?"undefined":"string"!=typeof e?JSON.stringify(e):e;c+=d(e);}return Error(c);};}function Qa(b){if(null==b||Ra(b)){return !1;}var a=b.length;return b.nodeType===ka&&a?!0:J(b)||H(b)||0===a||"number"===typeof a&&0<a&&a-1 in b;}function s(b,a,c){var d,e;if(b){if(A(b)){for(d in b){"prototype"==d||"length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d)||a.call(c,b[d],d,b);}}else{if(H(b)||Qa(b)){var f="object"!==typeof b;d=0;for(e=b.length;d<e;d++){(f||d in b)&&a.call(c,b[d],d,b);}}else{if(b.forEach&&b.forEach!==s){b.forEach(a,c,b);}else{for(d in b){b.hasOwnProperty(d)&&a.call(c,b[d],d,b);}}}}}return b;}function Cd(b,a,c){for(var d=Object.keys(b).sort(),e=0;e<d.length;e++){a.call(c,b[d[e]],d[e]);}return d;}function jc(b){return function(a,c){b(c,a);};}function Dd(){return ++gb;}function kc(b,a){a?b.$$hashKey=a:delete b.$$hashKey;}function F(b){for(var a=b.$$hashKey,c=1,d=arguments.length;c<d;c++){var e=arguments[c];if(e){for(var f=Object.keys(e),g=0,k=f.length;g<k;g++){var h=f[g];b[h]=e[h];}}}kc(b,a);return b;}function aa(b){return parseInt(b,10);}function lc(b,a){return F(new (F(function(){},{prototype:b})),a);}function y(){}function Sa(b){return b;}function da(b){return function(){return b;};}function x(b){return"undefined"===typeof b;}function z(b){return"undefined"!==typeof b;}function P(b){return null!==b&&"object"===typeof b;}function J(b){return"string"===typeof b;}function X(b){return"number"===typeof b;}function ea(b){return"[object Date]"===Ja.call(b);}function A(b){return"function"===typeof b;}function hb(b){return"[object RegExp]"===Ja.call(b);}function Ra(b){return b&&b.window===b;}function Ta(b){return b&&b.$evalAsync&&b.$watch;}function Ua(b){return"boolean"===typeof b;}function mc(b){return !(!b||!(b.nodeName||b.prop&&b.attr&&b.find));}function Ed(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++){a[b[c]]=!0;}return a;}function pa(b){return S(b.nodeName||b[0].nodeName);}function Va(b,a){var c=b.indexOf(a);0<=c&&b.splice(c,1);return a;}function Ca(b,a,c,d){if(Ra(b)||Ta(b)){throw Wa("cpws");}if(a){if(b===a){throw Wa("cpi");}c=c||[];d=d||[];if(P(b)){var e=c.indexOf(b);if(-1!==e){return d[e];}c.push(b);d.push(a);}if(H(b)){for(var f=a.length=0;f<b.length;f++){e=Ca(b[f],null,c,d),P(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);}}else{var g=a.$$hashKey;H(a)?a.length=0:s(a,function(b,c){delete a[c];});for(f in b){b.hasOwnProperty(f)&&(e=Ca(b[f],null,c,d),P(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);}kc(a,g);}}else{if(a=b){H(b)?a=Ca(b,[],c,d):ea(b)?a=new Date(b.getTime()):hb(b)?(a=new RegExp(b.source,b.toString().match(/[^\/]*$/)[0]),a.lastIndex=b.lastIndex):P(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Ca(b,e,c,d));}}return a;}function qa(b,a){if(H(b)){a=a||[];for(var c=0,d=b.length;c<d;c++){a[c]=b[c];}}else{if(P(b)){for(c in a=a||{},b){if("$"!==c.charAt(0)||"$"!==c.charAt(1)){a[c]=b[c];}}}}return a||b;}function la(b,a){if(b===a){return !0;}if(null===b||null===a){return !1;}if(b!==b&&a!==a){return !0;}var c=typeof b,d;if(c==typeof a&&"object"==c){if(H(b)){if(!H(a)){return !1;}if((c=b.length)==a.length){for(d=0;d<c;d++){if(!la(b[d],a[d])){return !1;}}return !0;}}else{if(ea(b)){return ea(a)?la(b.getTime(),a.getTime()):!1;}if(hb(b)&&hb(a)){return b.toString()==a.toString();}if(Ta(b)||Ta(a)||Ra(b)||Ra(a)||H(a)){return !1;}c={};for(d in b){if("$"!==d.charAt(0)&&!A(b[d])){if(!la(b[d],a[d])){return !1;}c[d]=!0;}}for(d in a){if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!A(a[d])){return !1;}}return !0;}}return !1;}function ib(b,a,c){return b.concat(Xa.call(a,c));}function nc(b,a){var c=2<arguments.length?Xa.call(arguments,2):[];return !A(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(Xa.call(arguments,0))):a.apply(b,c);}:function(){return arguments.length?a.apply(b,arguments):a.call(b);};}function Fd(b,a){var c=a;"string"===typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?c=t:Ra(a)?c="$WINDOW":a&&U===a?c="$DOCUMENT":Ta(a)&&(c="$SCOPE");return c;}function ra(b,a){return"undefined"===typeof b?t:JSON.stringify(b,Fd,a?"  ":null);}function oc(b){return J(b)?JSON.parse(b):b;}function sa(b){b=v(b).clone();try{b.empty();}catch(a){}var c=v("<div>").append(b).html();try{return b[0].nodeType===jb?S(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+S(b);});}catch(d){return S(c);}}function pc(b){try{return decodeURIComponent(b);}catch(a){}}function qc(b){var a={},c,d;s((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=pc(c[0]),z(d)&&(b=z(c[1])?pc(c[1]):!0,Hb.call(a,d)?H(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b));});return a;}function Ib(b){var a=[];s(b,function(b,d){H(b)?s(b,function(b){a.push(Da(d,!0)+(!0===b?"":"="+Da(b,!0)));}):a.push(Da(d,!0)+(!0===b?"":"="+Da(b,!0)));});return a.length?a.join("&"):"";}function kb(b){return Da(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+");}function Da(b,a){return encodeURIComponent(b).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,a?"%20":"+");}function Gd(b,a){var c,d,e=lb.length;b=v(b);for(d=0;d<e;++d){if(c=lb[d]+a,J(c=b.attr(c))){return c;}}return null;}function Hd(b,a){var c,d,e={};s(lb,function(a){a+="app";!c&&b.hasAttribute&&b.hasAttribute(a)&&(c=b,d=b.getAttribute(a));});s(lb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a));});c&&(e.strictDi=null!==Gd(c,"strict-di"),a(c,d?[d]:[],e));}function rc(b,a,c){P(c)||(c={});c=F({strictDi:!1},c);var d=function(){b=v(b);if(b.injector()){var d=b[0]===U?"document":sa(b);throw Wa("btstrpd",d.replace(/</,"&lt;").replace(/>/,"&gt;"));}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b);}]);c.debugInfoEnabled&&a.push(["$compileProvider",function(a){a.debugInfoEnabled(!0);}]);a.unshift("ng");d=Jb(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a);});}]);return d;},e=/^NG_ENABLE_DEBUG_INFO!/,f=/^NG_DEFER_BOOTSTRAP!/;N&&e.test(N.name)&&(c.debugInfoEnabled=!0,N.name=N.name.replace(e,""));if(N&&!f.test(N.name)){return d();}N.name=N.name.replace(f,"");ta.resumeBootstrap=function(b){s(b,function(b){a.push(b);});d();};}function Id(){N.name="NG_ENABLE_DEBUG_INFO!"+N.name;N.location.reload();}function Jd(b){return ta.element(b).injector().get("$$testability");}function Kb(b,a){a=a||"_";return b.replace(Kd,function(b,d){return(d?a:"")+b.toLowerCase();});}function Ld(){var b;sc||((ma=N.jQuery)&&ma.fn.on?(v=ma,F(ma.fn,{scope:Ka.scope,isolateScope:Ka.isolateScope,controller:Ka.controller,injector:Ka.injector,inheritedData:Ka.inheritedData}),b=ma.cleanData,ma.cleanData=function(a){var c;if(Lb){Lb=!1;}else{for(var d=0,e;null!=(e=a[d]);d++){(c=ma._data(e,"events"))&&c.$destroy&&ma(e).triggerHandler("$destroy");}}b(a);}):v=Q,ta.element=v,sc=!0);}function Mb(b,a,c){if(!b){throw Wa("areq",a||"?",c||"required");}return b;}function mb(b,a,c){c&&H(b)&&(b=b[b.length-1]);Mb(A(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b;}function La(b,a){if("hasOwnProperty"===b){throw Wa("badname",a);}}function tc(b,a,c){if(!a){return b;}a=a.split(".");for(var d,e=b,f=a.length,g=0;g<f;g++){d=a[g],b&&(b=(e=b)[d]);}return !c&&A(b)?nc(e,b):b;}function nb(b){var a=b[0];b=b[b.length-1];var c=[a];do{a=a.nextSibling;if(!a){break;}c.push(a);}while(a!==b);return v(c);}function wa(){return Object.create(null);}function Md(b){function a(a,b,c){return a[b]||(a[b]=c());}var c=w("$injector"),d=w("ng");b=a(b,"angular",Object);b.$$minErr=b.$$minErr||w;return a(b,"module",function(){var b={};return function(f,g,k){if("hasOwnProperty"===f){throw d("badname","module");}g&&b.hasOwnProperty(f)&&(b[f]=null);return a(b,f,function(){function a(c,d,e,f){f||(f=b);return function(){f[e||"push"]([c,d,arguments]);return n;};}if(!g){throw c("nomod",f);}var b=[],d=[],e=[],q=a("$injector","invoke","push",d),n={_invokeQueue:b,_configBlocks:d,_runBlocks:e,requires:g,name:f,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:q,run:function(a){e.push(a);return this;}};k&&q(k);return n;});};});}function Nd(b){F(b,{bootstrap:rc,copy:Ca,extend:F,equals:la,element:v,forEach:s,injector:Jb,noop:y,bind:nc,toJson:ra,fromJson:oc,identity:Sa,isUndefined:x,isDefined:z,isString:J,isFunction:A,isObject:P,isNumber:X,isElement:mc,isArray:H,version:Od,isDate:ea,lowercase:S,uppercase:ob,callbacks:{counter:0},getTestability:Jd,$$minErr:w,$$csp:Ya,reloadWithDebugInfo:Id});Za=Md(N);try{Za("ngLocale");}catch(a){Za("ngLocale",[]).provider("$locale",Pd);}Za("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Qd});a.provider("$compile",uc).directive({a:Rd,input:vc,textarea:vc,form:Sd,script:Td,select:Ud,style:Vd,option:Wd,ngBind:Xd,ngBindHtml:Yd,ngBindTemplate:Zd,ngClass:$d,ngClassEven:ae,ngClassOdd:be,ngCloak:ce,ngController:de,ngForm:ee,ngHide:fe,ngIf:ge,ngInclude:he,ngInit:ie,ngNonBindable:je,ngPluralize:ke,ngRepeat:le,ngShow:me,ngStyle:ne,ngSwitch:oe,ngSwitchWhen:pe,ngSwitchDefault:qe,ngOptions:re,ngTransclude:se,ngModel:te,ngList:ue,ngChange:ve,pattern:wc,ngPattern:wc,required:xc,ngRequired:xc,minlength:yc,ngMinlength:yc,maxlength:zc,ngMaxlength:zc,ngValue:we,ngModelOptions:xe}).directive({ngInclude:ye}).directive(pb).directive(Ac);a.provider({$anchorScroll:ze,$animate:Ae,$browser:Be,$cacheFactory:Ce,$controller:De,$document:Ee,$exceptionHandler:Fe,$filter:Bc,$interpolate:Ge,$interval:He,$http:Ie,$httpBackend:Je,$location:Ke,$log:Le,$parse:Me,$rootScope:Ne,$q:Oe,$$q:Pe,$sce:Qe,$sceDelegate:Re,$sniffer:Se,$templateCache:Te,$templateRequest:Ue,$$testability:Ve,$timeout:We,$window:Xe,$$rAF:Ye,$$asyncCallback:Ze});}]);}function $a(b){return b.replace($e,function(a,b,d,e){return e?d.toUpperCase():d;}).replace(af,"Moz$1");}function Cc(b){b=b.nodeType;return b===ka||!b||9===b;}function Dc(b,a){var c,d,e=a.createDocumentFragment(),f=[];if(Nb.test(b)){c=c||e.appendChild(a.createElement("div"));d=(bf.exec(b)||["",""])[1].toLowerCase();d=ha[d]||ha._default;c.innerHTML=d[1]+b.replace(cf,"<$1></$2>")+d[2];for(d=d[0];d--;){c=c.lastChild;}f=ib(f,c.childNodes);c=e.firstChild;c.textContent="";}else{f.push(a.createTextNode(b));}e.textContent="";e.innerHTML="";s(f,function(a){e.appendChild(a);});return e;}function Q(b){if(b instanceof Q){return b;}var a;J(b)&&(b=T(b),a=!0);if(!(this instanceof Q)){if(a&&"<"!=b.charAt(0)){throw Ob("nosel");}return new Q(b);}if(a){a=U;var c;b=(c=df.exec(b))?[a.createElement(c[1])]:(c=Dc(b,a))?c.childNodes:[];}Ec(this,b);}function Pb(b){return b.cloneNode(!0);}function qb(b,a){a||rb(b);if(b.querySelectorAll){for(var c=b.querySelectorAll("*"),d=0,e=c.length;d<e;d++){rb(c[d]);}}}function Fc(b,a,c,d){if(z(d)){throw Ob("offargs");}var e=(d=sb(b))&&d.events,f=d&&d.handle;if(f){if(a){s(a.split(" "),function(a){if(z(c)){var d=e[a];Va(d||[],c);if(d&&0<d.length){return;}}b.removeEventListener(a,f,!1);delete e[a];});}else{for(a in e){"$destroy"!==a&&b.removeEventListener(a,f,!1),delete e[a];}}}}function rb(b,a){var c=b.ng339,d=c&&tb[c];d&&(a?delete d.data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Fc(b)),delete tb[c],b.ng339=t));}function sb(b,a){var c=b.ng339,c=c&&tb[c];a&&!c&&(b.ng339=c=++ef,c=tb[c]={events:{},data:{},handle:t});return c;}function Qb(b,a,c){if(Cc(b)){var d=z(c),e=!d&&a&&!P(a),f=!a;b=(b=sb(b,!e))&&b.data;if(d){b[a]=c;}else{if(f){return b;}if(e){return b&&b[a];}F(b,a);}}}function Rb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1;}function Sb(b,a){a&&b.setAttribute&&s(a.split(" "),function(a){b.setAttribute("class",T((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+T(a)+" "," ")));});}function Tb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");s(a.split(" "),function(a){a=T(a);-1===c.indexOf(" "+a+" ")&&(c+=a+" ");});b.setAttribute("class",T(c));}}function Ec(b,a){if(a){if(a.nodeType){b[b.length++]=a;}else{var c=a.length;if("number"===typeof c&&a.window!==a){if(c){for(var d=0;d<c;d++){b[b.length++]=a[d];}}}else{b[b.length++]=a;}}}}function Gc(b,a){return ub(b,"$"+(a||"ngController")+"Controller");}function ub(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=H(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++){if((c=v.data(b,a[d]))!==t){return c;}}b=b.parentNode||11===b.nodeType&&b.host;}}function Hc(b){for(qb(b,!0);b.firstChild;){b.removeChild(b.firstChild);}}function Ic(b,a){a||qb(b);var c=b.parentNode;c&&c.removeChild(b);}function ff(b,a){a=a||N;if("complete"===a.document.readyState){a.setTimeout(b);}else{v(a).on("load",b);}}function Jc(b,a){var c=vb[a.toLowerCase()];return c&&Kc[pa(b)]&&c;}function gf(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Lc[a];}function hf(b,a){var c=function(c,e){c.isDefaultPrevented=function(){return c.defaultPrevented;};var f=a[e||c.type],g=f?f.length:0;if(g){if(x(c.immediatePropagationStopped)){var k=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0;c.stopPropagation&&c.stopPropagation();k&&k.call(c);};}c.isImmediatePropagationStopped=function(){return !0===c.immediatePropagationStopped;};1<g&&(f=qa(f));for(var h=0;h<g;h++){c.isImmediatePropagationStopped()||f[h].call(b,c);}}};c.elem=b;return c;}function Ma(b,a){var c=b&&b.$$hashKey;if(c){return"function"===typeof c&&(c=b.$$hashKey()),c;}c=typeof b;return c="function"==c||"object"==c&&null!==b?b.$$hashKey=c+":"+(a||Dd)():c+":"+b;}function ab(b,a){if(a){var c=0;this.nextUid=function(){return ++c;};}s(b,this.put,this);}function jf(b){return(b=b.toString().replace(Mc,"").match(Nc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn";}function Ub(b,a,c){var d;if("function"===typeof b){if(!(d=b.$inject)){d=[];if(b.length){if(a){throw J(c)&&c||(c=b.name||jf(b)),Ea("strictdi",c);}a=b.toString().replace(Mc,"");a=a.match(Nc);s(a[1].split(kf),function(a){a.replace(lf,function(a,b,c){d.push(c);});});}b.$inject=d;}}else{H(b)?(a=b.length-1,mb(b[a],"fn"),d=b.slice(0,a)):mb(b,"fn",!0);}return d;}function Jb(b,a){function c(a){return function(b,c){if(P(b)){s(b,jc(a));}else{return a(b,c);}};}function d(a,b){La(a,"service");if(A(b)||H(b)){b=q.instantiate(b);}if(!b.$get){throw Ea("pget",a);}return p[a+"Provider"]=b;}function e(a,b){return function(){var c=r.invoke(b,this,t,a);if(x(c)){throw Ea("undef",a);}return c;};}function f(a,b,c){return d(a,{$get:!1!==c?e(a,b):b});}function g(a){var b=[],c;s(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=q.get(e[0]);f[e[1]].apply(f,e[2]);}}if(!m.get(a)){m.put(a,!0);try{J(a)?(c=Za(a),b=b.concat(g(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):A(a)?b.push(q.invoke(a)):H(a)?b.push(q.invoke(a)):mb(a,"module");}catch(e){throw H(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Ea("modulerr",a,e.stack||e.message||e);}}});return b;}function k(b,c){function d(a){if(b.hasOwnProperty(a)){if(b[a]===h){throw Ea("cdep",a+" <- "+l.join(" <- "));}return b[a];}try{return l.unshift(a),b[a]=h,b[a]=c(a);}catch(e){throw b[a]===h&&delete b[a],e;}finally{l.shift();}}function e(b,c,f,g){"string"===typeof f&&(g=f,f=null);var h=[];g=Ub(b,a,g);var k,l,n;l=0;for(k=g.length;l<k;l++){n=g[l];if("string"!==typeof n){throw Ea("itkn",n);}h.push(f&&f.hasOwnProperty(n)?f[n]:d(n));}H(b)&&(b=b[k]);return b.apply(c,h);}return{invoke:e,instantiate:function(a,b,c){var d=function(){};d.prototype=(H(a)?a[a.length-1]:a).prototype;d=new d;a=e(a,d,b,c);return P(a)||A(a)?a:d;},get:d,annotate:Ub,has:function(a){return p.hasOwnProperty(a+"Provider")||b.hasOwnProperty(a);}};}a=!0===a;var h={},l=[],m=new ab([],!0),p={$provide:{provider:c(d),factory:c(f),service:c(function(a,b){return f(a,["$injector",function(a){return a.instantiate(b);}]);}),value:c(function(a,b){return f(a,da(b),!1);}),constant:c(function(a,b){La(a,"constant");p[a]=b;n[a]=b;}),decorator:function(a,b){var c=q.get(a+"Provider"),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a});};}}},q=p.$injector=k(p,function(){throw Ea("unpr",l.join(" <- "));}),n={},r=n.$injector=k(n,function(a){var b=q.get(a+"Provider");return r.invoke(b.$get,b,t,a);});s(g(b),function(a){r.invoke(a||y);});return r;}function ze(){var b=!0;this.disableAutoScrolling=function(){b=!1;};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;Array.prototype.some.call(a,function(a){if("a"===pa(a)){return b=a,!0;}});return b;}function f(b){if(b){b.scrollIntoView();var c;c=g.yOffset;A(c)?c=c():mc(c)?(c=c[0],c="fixed"!==a.getComputedStyle(c).position?0:c.getBoundingClientRect().bottom):X(c)||(c=0);c&&(b=b.getBoundingClientRect().top,a.scrollBy(0,b-c));}else{a.scrollTo(0,0);}}function g(){var a=c.hash(),b;a?(b=k.getElementById(a))?f(b):(b=e(k.getElementsByName(a)))?f(b):"top"===a&&f(null):f(null);}var k=a.document;b&&d.$watch(function(){return c.hash();},function(a,b){a===b&&""===a||ff(function(){d.$evalAsync(g);});});return g;}];}function Ze(){this.$get=["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a);}:function(b){return a(b,0,!1);};}];}function mf(b,a,c,d){function e(a){try{a.apply(null,Xa.call(arguments,1));}finally{if(C--,0===C){for(;D.length;){try{D.pop()();}catch(b){c.error(b);}}}}}function f(a,b){(function xa(){s(G,function(a){a();});u=b(xa,a);})();}function g(){k();h();}function k(){I=b.history.state;I=x(I)?null:I;la(I,R)&&(I=R);R=I;}function h(){if(E!==m.url()||K!==I){E=m.url(),K=I,s(V,function(a){a(m.url(),I);});}}function l(a){try{return decodeURIComponent(a);}catch(b){return a;}}var m=this,p=a[0],q=b.location,n=b.history,r=b.setTimeout,O=b.clearTimeout,B={};m.isMock=!1;var C=0,D=[];m.$$completeOutstandingRequest=e;m.$$incOutstandingRequestCount=function(){C++;};m.notifyWhenNoOutstandingRequests=function(a){s(G,function(a){a();});0===C?a():D.push(a);};var G=[],u;m.addPollFn=function(a){x(u)&&f(100,r);G.push(a);return a;};var I,K,E=q.href,ca=a.find("base"),M=null;k();K=I;m.url=function(a,c,e){x(e)&&(e=null);q!==b.location&&(q=b.location);n!==b.history&&(n=b.history);if(a){var f=K===e;if(E!==a||d.history&&!f){var g=E&&Fa(E)===Fa(a);E=a;K=e;!d.history||g&&f?(g||(M=a),c?q.replace(a):q.href=a):(n[c?"replaceState":"pushState"](e,"",a),k(),K=I);return m;}}else{return M||q.href.replace(/%27/g,"'");}};m.state=function(){return I;};var V=[],W=!1,R=null;m.onUrlChange=function(a){if(!W){if(d.history){v(b).on("popstate",g);}v(b).on("hashchange",g);W=!0;}V.push(a);return a;};m.$$checkUrlChange=h;m.baseHref=function(){var a=ca.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):"";};var ba={},z="",fa=m.baseHref();m.cookies=function(a,b){var d,e,f,g;if(a){b===t?p.cookie=encodeURIComponent(a)+"=;path="+fa+";expires=Thu, 01 Jan 1970 00:00:00 GMT":J(b)&&(d=(p.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+fa).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));}else{if(p.cookie!==z){for(z=p.cookie,d=z.split("; "),ba={},f=0;f<d.length;f++){e=d[f],g=e.indexOf("="),0<g&&(a=l(e.substring(0,g)),ba[a]===t&&(ba[a]=l(e.substring(g+1))));}}return ba;}};m.defer=function(a,b){var c;C++;c=r(function(){delete B[c];e(a);},b||0);B[c]=!0;return c;};m.defer.cancel=function(a){return B[a]?(delete B[a],O(a),e(y),!0):!1;};}function Be(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new mf(b,d,a,c);}];}function Ce(){this.$get=function(){function b(b,d){function e(a){a!=p&&(q?q==a&&(q=a.n):q=a,f(a.n,a.p),f(a,p),p=a,p.n=null);}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a));}if(b in a){throw w("$cacheFactory")("iid",b);}var g=0,k=F({},d,{id:b}),h={},l=d&&d.capacity||Number.MAX_VALUE,m={},p=null,q=null;return a[b]={put:function(a,b){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});e(c);}if(!x(b)){return a in h||g++,h[a]=b,g>l&&this.remove(q.key),b;}},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b){return;}e(b);}return h[a];},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b){return;}b==p&&(p=b.p);b==q&&(q=b.n);f(b.n,b.p);delete m[a];}delete h[a];g--;},removeAll:function(){h={};g=0;m={};p=q=null;},destroy:function(){m=k=h=null;delete a[b];},info:function(){return F({},k,{size:g});}};}var a={};b.info=function(){var b={};s(a,function(a,e){b[e]=a.info();});return b;};b.get=function(b){return a[b];};return b;};}function Te(){this.$get=["$cacheFactory",function(b){return b("templates");}];}function uc(b,a){function c(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};s(a,function(a,e){var f=a.match(c);if(!f){throw ia("iscp",b,e,a);}d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e};});return d;}var d={},e=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,f=/(([\w\-]+)(?:\:([^;]+))?;?)/,g=Ed("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,h=/^(on[a-z]+|formaction)$/;this.directive=function p(a,e){La(a,"directive");J(a)?(Mb(e,"directiveFactory"),d.hasOwnProperty(a)||(d[a]=[],b.factory(a+"Directive",["$injector","$exceptionHandler",function(b,e){var f=[];s(d[a],function(d,g){try{var h=b.invoke(d);A(h)?h={compile:da(h)}:!h.compile&&h.link&&(h.compile=da(h.link));h.priority=h.priority||0;h.index=g;h.name=h.name||a;h.require=h.require||h.controller&&h.name;h.restrict=h.restrict||"EA";P(h.scope)&&(h.$$isolateBindings=c(h.scope,h.name));f.push(h);}catch(k){e(k);}});return f;}])),d[a].push(e)):s(a,jc(p));return this;};this.aHrefSanitizationWhitelist=function(b){return z(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist();};this.imgSrcSanitizationWhitelist=function(b){return z(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist();};var l=!0;this.debugInfoEnabled=function(a){return z(a)?(l=a,this):l;};this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,c,r,O,B,C,D,G,u,I){function K(a,b){try{a.addClass(b);}catch(c){}}function E(a,b,c,d,e){a instanceof v||(a=v(a));s(a,function(b,c){b.nodeType==jb&&b.nodeValue.match(/\S+/)&&(a[c]=v(b).wrap("<span></span>").parent()[0]);});var f=ca(a,b,a,c,d,e);E.$$addScopeClass(a);var g=null;return function(b,c,d,e,h){Mb(b,"scope");g||(g=(h=h&&h[0])?"foreignobject"!==pa(h)&&h.toString().match(/SVG/)?"svg":"html":"html");h="html"!==g?v(N(g,v("<div>").append(a).html())):c?Ka.clone.call(a):a;if(d){for(var k in d){h.data("$"+k+"Controller",d[k].instance);}}E.$$addScopeInfo(h,b);c&&c(h,b);f&&f(b,h,h,e);return h;};}function ca(a,b,c,d,e,f){function g(a,c,d,e){var f,k,l,q,n,r,D;if(p){for(D=Array(c.length),q=0;q<h.length;q+=3){f=h[q],D[f]=c[f];}}else{D=c;}q=0;for(n=h.length;q<n;){k=D[h[q++]],c=h[q++],f=h[q++],c?(c.scope?(l=a.$new(),E.$$addScopeInfo(v(k),l)):l=a,r=c.transcludeOnThisElement?M(a,c.transclude,e,c.elementTranscludeOnThisElement):!c.templateOnThisElement&&e?e:!e&&b?M(a,b):null,c(f,l,k,d,r)):f&&f(a,k.childNodes,t,e);}}for(var h=[],k,l,q,n,p,r=0;r<a.length;r++){k=new X;l=V(a[r],[],k,0===r?d:t,e);(f=l.length?ba(l,a[r],k,b,c,null,[],[],f):null)&&f.scope&&E.$$addScopeClass(k.$$element);k=f&&f.terminal||!(q=a[r].childNodes)||!q.length?null:ca(q,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b);if(f||k){h.push(r,f,k),n=!0,p=p||f;}f=null;}return n?g:null;}function M(a,b,c,d){return function(d,e,f,g,h){d||(d=a.$new(!1,h),d.$$transcluded=!0);return b(d,e,f,c,g);};}function V(b,c,g,h,k){var l=g.$attr,q;switch(b.nodeType){case ka:fa(c,ua(pa(b)),"E",h,k);for(var n,r,D,B=b.attributes,O=0,G=B&&B.length;O<G;O++){var I=!1,E=!1;n=B[O];q=n.name;n=T(n.value);r=ua(q);if(D=ya.test(r)){q=Kb(r.substr(6),"-");}var K=r.replace(/(Start|End)$/,""),u;a:{var C=K;if(d.hasOwnProperty(C)){u=void 0;for(var C=a.get(C+"Directive"),s=0,ca=C.length;s<ca;s++){if(u=C[s],u.multiElement){u=!0;break a;}}}u=!1;}u&&r===K+"Start"&&(I=q,E=q.substr(0,q.length-5)+"end",q=q.substr(0,q.length-6));r=ua(q.toLowerCase());l[r]=q;if(D||!g.hasOwnProperty(r)){g[r]=n,Jc(b,r)&&(g[r]=!0);}Q(b,c,n,r,D);fa(c,r,"A",h,k,I,E);}b=b.className;if(J(b)&&""!==b){for(;q=f.exec(b);){r=ua(q[2]),fa(c,r,"C",h,k)&&(g[r]=T(q[3])),b=b.substr(q.index+q[0].length);}}break;case jb:Y(c,b.nodeValue);break;case 8:try{if(q=e.exec(b.nodeValue)){r=ua(q[1]),fa(c,r,"M",h,k)&&(g[r]=T(q[2]));}}catch(V){}}c.sort(w);return c;}function W(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a){throw ia("uterdir",b,c);}a.nodeType==ka&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling;}while(0<e);}else{d.push(a);}return v(d);}function R(a,b,c){return function(d,e,f,g,h){e=W(e[0],b,c);return a(d,e,f,g,h);};}function ba(a,d,e,f,g,h,l,r,p){function D(a,b,c,d){if(a){c&&(a=R(a,c,d));a.require=L.require;a.directiveName=ga;if(M===L||L.$$isolateScope){a=Z(a,{isolateScope:!0});}l.push(a);}if(b){c&&(b=R(b,c,d));b.require=L.require;b.directiveName=ga;if(M===L||L.$$isolateScope){b=Z(b,{isolateScope:!0});}r.push(b);}}function I(a,b,c,d){var e,f="data",g=!1,h=c,l;if(J(b)){l=b.match(k);b=b.substring(l[0].length);l[3]&&(l[1]?l[3]=null:l[1]=l[3]);"^"===l[1]?f="inheritedData":"^^"===l[1]&&(f="inheritedData",h=c.parent());"?"===l[2]&&(g=!0);e=null;d&&"data"===f&&(e=d[b])&&(e=e.instance);e=e||h[f]("$"+b+"Controller");if(!e&&!g){throw ia("ctreq",b,a);}return e||null;}H(b)&&(e=[],s(b,function(b){e.push(I(a,b,c,d));}));return e;}function G(a,c,f,g,h){function k(a,b,c){var d;Ta(a)||(c=b,b=a,a=t);F&&(d=u);c||(c=F?V.parent():V);return h(a,b,d,c,Vb);}var n,p,D,K,u,xb,V,R;d===f?(R=e,V=e.$$element):(V=v(f),R=new X(V,e));M&&(K=c.$new(!0));xb=h&&k;C&&(ca={},u={},s(C,function(a){var b={$scope:a===M||a.$$isolateScope?K:c,$element:V,$attrs:R,$transclude:xb};D=a.controller;"@"==D&&(D=R[a.name]);b=B(D,b,!0,a.controllerAs);u[a.name]=b;F||V.data("$"+a.name+"Controller",b.instance);ca[a.name]=b;}));if(M){E.$$addScopeInfo(V,K,!0,!(ba&&(ba===M||ba===M.$$originalDirective)));E.$$addScopeClass(V,!0);g=ca&&ca[M.name];var W=K;g&&g.identifier&&!0===M.bindToController&&(W=g.instance);s(K.$$isolateBindings=M.$$isolateBindings,function(a,d){var e=a.attrName,f=a.optional,g,h,k,l;switch(a.mode){case"@":R.$observe(e,function(a){W[d]=a;});R.$$observers[e].$$scope=c;R[e]&&(W[d]=b(R[e])(c));break;case"=":if(f&&!R[e]){break;}h=O(R[e]);l=h.literal?la:function(a,b){return a===b||a!==a&&b!==b;};k=h.assign||function(){g=W[d]=h(c);throw ia("nonassign",R[e],M.name);};g=W[d]=h(c);f=function(a){l(a,W[d])||(l(a,g)?k(c,a=W[d]):W[d]=a);return g=a;};f.$stateful=!0;f=a.collection?c.$watchCollection(R[e],f):c.$watch(O(R[e],f),null,h.literal);K.$on("$destroy",f);break;case"&":h=O(R[e]),W[d]=function(a){return h(c,a);};}});}ca&&(s(ca,function(a){a();}),ca=null);g=0;for(n=l.length;g<n;g++){p=l[g],$(p,p.isolateScope?K:c,V,R,p.require&&I(p.directiveName,p.require,V,u),xb);}var Vb=c;M&&(M.template||null===M.templateUrl)&&(Vb=K);a&&a(Vb,f.childNodes,t,h);for(g=r.length-1;0<=g;g--){p=r[g],$(p,p.isolateScope?K:c,V,R,p.require&&I(p.directiveName,p.require,V,u),xb);}}p=p||{};for(var K=-Number.MAX_VALUE,u,C=p.controllerDirectives,ca,M=p.newIsolateScopeDirective,ba=p.templateDirective,fa=p.nonTlbTranscludeDirective,y=!1,Na=!1,F=p.hasElementTranscludeDirective,Y=e.$$element=v(d),L,ga,w,Ga=f,S,Q=0,ya=a.length;Q<ya;Q++){L=a[Q];var wb=L.$$start,aa=L.$$end;wb&&(Y=W(d,wb,aa));w=t;if(K>L.priority){break;}if(w=L.scope){L.templateUrl||(P(w)?(xa("new/isolated scope",M||u,L,Y),M=L):xa("new/isolated scope",M,L,Y)),u=u||L;}ga=L.name;!L.templateUrl&&L.controller&&(w=L.controller,C=C||{},xa("'"+ga+"' controller",C[ga],L,Y),C[ga]=L);if(w=L.transclude){y=!0,L.$$tlb||(xa("transclusion",fa,L,Y),fa=L),"element"==w?(F=!0,K=L.priority,w=Y,Y=e.$$element=v(U.createComment(" "+ga+": "+e[ga]+" ")),d=Y[0],yb(g,Xa.call(w,0),d),Ga=E(w,f,K,h&&h.name,{nonTlbTranscludeDirective:fa})):(w=v(Pb(d)).contents(),Y.empty(),Ga=E(w,f));}if(L.template){if(Na=!0,xa("template",ba,L,Y),ba=L,w=A(L.template)?L.template(Y,e):L.template,w=Pc(w),L.replace){h=L;w=Nb.test(w)?Qc(N(L.templateNamespace,T(w))):[];d=w[0];if(1!=w.length||d.nodeType!==ka){throw ia("tplrt",ga,"");}yb(g,Y,d);ya={$attr:{}};w=V(d,[],ya);var nf=a.splice(Q+1,a.length-(Q+1));M&&z(w);a=a.concat(w).concat(nf);Oc(e,ya);ya=a.length;}else{Y.html(w);}}if(L.templateUrl){Na=!0,xa("template",ba,L,Y),ba=L,L.replace&&(h=L),G=x(a.splice(Q,a.length-Q),Y,e,g,y&&Ga,l,r,{controllerDirectives:C,newIsolateScopeDirective:M,templateDirective:ba,nonTlbTranscludeDirective:fa}),ya=a.length;}else{if(L.compile){try{S=L.compile(Y,e,Ga),A(S)?D(null,S,wb,aa):S&&D(S.pre,S.post,wb,aa);}catch(da){c(da,sa(Y));}}}L.terminal&&(G.terminal=!0,K=Math.max(K,L.priority));}G.scope=u&&!0===u.scope;G.transcludeOnThisElement=y;G.elementTranscludeOnThisElement=F;G.templateOnThisElement=Na;G.transclude=Ga;p.hasElementTranscludeDirective=F;return G;}function z(a){for(var b=0,c=a.length;b<c;b++){a[b]=lc(a[b],{$$isolateScope:!0});}}function fa(b,e,f,g,h,k,l){if(e===h){return null;}h=null;if(d.hasOwnProperty(e)){var q;e=a.get(e+"Directive");for(var r=0,D=e.length;r<D;r++){try{q=e[r],(g===t||g>q.priority)&&-1!=q.restrict.indexOf(f)&&(k&&(q=lc(q,{$$start:k,$$end:l})),b.push(q),h=q);}catch(B){c(B);}}}return h;}function Oc(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;s(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]));});s(b,function(b,f){"class"==f?(K(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f]);});}function x(a,b,c,d,e,f,g,h){var k=[],l,q,n=b[0],p=a.shift(),D=F({},p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),B=A(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,O=p.templateNamespace;b.empty();r(G.getTrustedResourceUrl(B)).then(function(r){var G,I;r=Pc(r);if(p.replace){r=Nb.test(r)?Qc(N(O,T(r))):[];G=r[0];if(1!=r.length||G.nodeType!==ka){throw ia("tplrt",p.name,B);}r={$attr:{}};yb(d,b,G);var u=V(G,[],r);P(p.scope)&&z(u);a=u.concat(a);Oc(c,r);}else{G=n,b.html(r);}a.unshift(D);l=ba(a,G,c,e,b,p,f,g,h);s(d,function(a,c){a==G&&(d[c]=b[0]);});for(q=ca(b[0].childNodes,e);k.length;){r=k.shift();I=k.shift();var E=k.shift(),C=k.shift(),u=b[0];if(!r.$$destroyed){if(I!==n){var R=I.className;h.hasElementTranscludeDirective&&p.replace||(u=Pb(G));yb(E,v(I),u);K(v(u),R);}I=l.transcludeOnThisElement?M(r,l.transclude,C):C;l(q,r,u,d,I);}}k=null;});return function(a,b,c,d,e){a=e;b.$$destroyed||(k?(k.push(b),k.push(c),k.push(d),k.push(a)):(l.transcludeOnThisElement&&(a=M(b,l.transclude,e)),l(q,b,c,d,a)));};}function w(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index;}function xa(a,b,c,d){if(b){throw ia("multidir",b.name,c.name,a,sa(d));}}function Y(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){a=a.parent();var b=!!a.length;b&&E.$$addBindingClass(a);return function(a,c){var e=c.parent();b||E.$$addBindingClass(e);E.$$addBindingInfo(e,d.expressions);a.$watch(d,function(a){c[0].nodeValue=a;});};}});}function N(a,b){a=S(a||"html");switch(a){case"svg":case"math":var c=U.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b;}}function Ga(a,b){if("srcdoc"==b){return G.HTML;}var c=pa(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)){return G.RESOURCE_URL;}}function Q(a,c,d,e,f){var k=b(d,!0);if(k){if("multiple"===e&&"select"===pa(a)){throw ia("selmulti",sa(a));}c.push({priority:100,compile:function(){return{pre:function(c,d,l){d=l.$$observers||(l.$$observers={});if(h.test(e)){throw ia("nodomevents");}l[e]&&(k=b(l[e],!0,Ga(a,e),g[e]||f))&&(l[e]=k(c),(d[e]||(d[e]=[])).$$inter=!0,(l.$$observers&&l.$$observers[e].$$scope||c).$watch(k,function(a,b){"class"===e&&a!=b?l.$updateClass(a,b):l.$set(e,a);}));}};}});}}function yb(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a){for(g=0,h=a.length;g<h;g++){if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<k;g++,h++){h<k?a[g]=a[h]:delete a[g];}a.length-=e-1;a.context===d&&(a.context=c);break;}}}f&&f.replaceChild(c,d);a=U.createDocumentFragment();a.appendChild(d);v(c).data(v(d).data());ma?(Lb=!0,ma.cleanData([d])):delete v.cache[d[v.expando]];d=1;for(e=b.length;d<e;d++){f=b[d],v(f).remove(),a.appendChild(f),delete b[d];}b[0]=c;b.length=1;}function Z(a,b){return F(function(){return a.apply(null,arguments);},a,b);}function $(a,b,d,e,f,g){try{a(b,d,e,f,g);}catch(h){c(h,sa(d));}}var X=function(a,b){if(b){var c=Object.keys(b),d,e,f;d=0;for(e=c.length;d<e;d++){f=c[d],this[f]=b[f];}}else{this.$attr={};}this.$$element=a;};X.prototype={$normalize:ua,$addClass:function(a){a&&0<a.length&&u.addClass(this.$$element,a);},$removeClass:function(a){a&&0<a.length&&u.removeClass(this.$$element,a);},$updateClass:function(a,b){var c=Rc(a,b);c&&c.length&&u.addClass(this.$$element,c);(c=Rc(b,a))&&c.length&&u.removeClass(this.$$element,c);},$set:function(a,b,d,e){var f=this.$$element[0],g=Jc(f,a),h=gf(f,a),f=a;g?(this.$$element.prop(a,b),e=g):h&&(this[h]=b,f=h);this[a]=b;e?this.$attr[a]=e:(e=this.$attr[a])||(this.$attr[a]=e=Kb(a,"-"));g=pa(this.$$element);if("a"===g&&"href"===a||"img"===g&&"src"===a){this[a]=b=I(b,"src"===a);}else{if("img"===g&&"srcset"===a){for(var g="",h=T(b),k=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,k=/\s/.test(h)?k:/(,)/,h=h.split(k),k=Math.floor(h.length/2),l=0;l<k;l++){var q=2*l,g=g+I(T(h[q]),!0),g=g+(" "+T(h[q+1]));}h=T(h[2*l]).split(/\s/);g+=I(T(h[0]),!0);2===h.length&&(g+=" "+T(h[1]));this[a]=b=g;}}!1!==d&&(null===b||b===t?this.$$element.removeAttr(e):this.$$element.attr(e,b));(a=this.$$observers)&&s(a[f],function(a){try{a(b);}catch(d){c(d);}});},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=wa()),e=d[a]||(d[a]=[]);e.push(b);C.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a]);});return function(){Va(e,b);};}};var Na=b.startSymbol(),ga=b.endSymbol(),Pc="{{"==Na||"}}"==ga?Sa:function(a){return a.replace(/\{\{/g,Na).replace(/}}/g,ga);},ya=/^ngAttr[A-Z]/;E.$$addBindingInfo=l?function(a,b){var c=a.data("$binding")||[];H(b)?c=c.concat(b):c.push(b);a.data("$binding",c);}:y;E.$$addBindingClass=l?function(a){K(a,"ng-binding");}:y;E.$$addScopeInfo=l?function(a,b,c,d){a.data(c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope",b);}:y;E.$$addScopeClass=l?function(a,b){K(a,b?"ng-isolate-scope":"ng-scope");}:y;return E;}];}function ua(b){return $a(b.replace(of,""));}function Rc(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var g=d[f],k=0;k<e.length;k++){if(g==e[k]){continue a;}}c+=(0<c.length?" ":"")+g;}return c;}function Qc(b){b=v(b);var a=b.length;if(1>=a){return b;}for(;a--;){8===b[a].nodeType&&pf.call(b,a,1);}return b;}function De(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){La(a,"controller");P(a)?F(b,a):b[a]=c;};this.allowGlobals=function(){a=!0;};this.$get=["$injector","$window",function(d,e){function f(a,b,c,d){if(!a||!P(a.$scope)){throw w("$controller")("noscp",d,b);}a.$scope[b]=c;}return function(g,k,h,l){var m,p,q;h=!0===h;l&&J(l)&&(q=l);J(g)&&(l=g.match(c),p=l[1],q=q||l[3],g=b.hasOwnProperty(p)?b[p]:tc(k.$scope,p,!0)||(a?tc(e,p,!0):t),mb(g,p,!0));if(h){return h=function(){},h.prototype=(H(g)?g[g.length-1]:g).prototype,m=new h,q&&f(k,q,m,p||g.name),F(function(){d.invoke(g,m,k,p);return m;},{instance:m,identifier:q});}m=d.instantiate(g,k,p);q&&f(k,q,m,p||g.name);return m;};}];}function Ee(){this.$get=["$window",function(b){return v(b.document);}];}function Fe(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments);};}];}function Wb(b,a){if(J(b)){b=b.replace(qf,"");var c=a("Content-Type");if(c&&0===c.indexOf(Sc)||rf.test(b)&&sf.test(b)){b=oc(b);}}return b;}function Tc(b){var a={},c,d,e;if(!b){return a;}s(b.split("\n"),function(b){e=b.indexOf(":");c=S(T(b.substr(0,e)));d=T(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d);});return a;}function Uc(b){var a=P(b)?b:t;return function(c){a||(a=Tc(b));return c?a[S(c)]||null:a;};}function Vc(b,a,c){if(A(c)){return c(b,a);}s(c,function(c){b=c(b,a);});return b;}function Ie(){var b=this.defaults={transformResponse:[Wb],transformRequest:[function(a){return P(a)&&"[object File]"!==Ja.call(a)&&"[object Blob]"!==Ja.call(a)?ra(a):a;}],headers:{common:{Accept:"application/json, text/plain, */*"},post:qa(Xb),put:qa(Xb),patch:qa(Xb)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},a=!1;this.useApplyAsync=function(b){return z(b)?(a=!!b,this):a;};var c=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(d,e,f,g,k,h){function l(a){function c(a){var b=F({},a);b.data=a.data?Vc(a.data,a.headers,d.transformResponse):a.data;a=a.status;return 200<=a&&300>a?b:k.reject(b);}var d={method:"get",transformRequest:b.transformRequest,transformResponse:b.transformResponse},e=function(a){var c=b.headers,d=F({},a.headers),e,f,c=F({},c.common,c[S(a.method)]);a:for(e in c){a=S(e);for(f in d){if(S(f)===a){continue a;}}d[e]=c[e];}(function(a){var b;s(a,function(c,d){A(c)&&(b=c(),null!=b?a[d]=b:delete a[d]);});})(d);return d;}(a);F(d,a);d.headers=e;d.method=ob(d.method);var f=[function(a){e=a.headers;var d=Vc(a.data,Uc(e),a.transformRequest);x(d)&&s(e,function(a,b){"content-type"===S(b)&&delete e[b];});x(a.withCredentials)&&!x(b.withCredentials)&&(a.withCredentials=b.withCredentials);return m(a,d,e).then(c,c);},t],g=k.when(d);for(s(n,function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError);});f.length;){a=f.shift();var h=f.shift(),g=g.then(a,h);}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,d);});return g;};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,d);});return g;};return g;}function m(c,f,h){function n(b,c,d,e){function f(){m(c,b,d,e);}K&&(200<=b&&300>b?K.put(s,[b,c,Tc(d),e]):K.remove(s));a?g.$applyAsync(f):(f(),g.$$phase||g.$apply());}function m(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?u.resolve:u.reject)({data:a,status:b,headers:Uc(d),config:c,statusText:e});}function G(){var a=l.pendingRequests.indexOf(c);-1!==a&&l.pendingRequests.splice(a,1);}var u=k.defer(),I=u.promise,K,E,s=p(c.url,c.params);l.pendingRequests.push(c);I.then(G,G);!c.cache&&!b.cache||!1===c.cache||"GET"!==c.method&&"JSONP"!==c.method||(K=P(c.cache)?c.cache:P(b.cache)?b.cache:q);if(K){if(E=K.get(s),z(E)){if(E&&A(E.then)){return E.then(G,G),E;}H(E)?m(E[1],E[0],qa(E[2]),E[3]):m(E,200,{},"OK");}else{K.put(s,I);}}x(E)&&((E=Wc(c.url)?e.cookies()[c.xsrfCookieName||b.xsrfCookieName]:t)&&(h[c.xsrfHeaderName||b.xsrfHeaderName]=E),d(c.method,s,f,n,h,c.timeout,c.withCredentials,c.responseType));return I;}function p(a,b){if(!b){return a;}var c=[];Cd(b,function(a,b){null===a||x(a)||(H(a)||(a=[a]),s(a,function(a){P(a)&&(a=ea(a)?a.toISOString():ra(a));c.push(Da(b)+"="+Da(a));}));});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a;}var q=f("$http"),n=[];s(c,function(a){n.unshift(J(a)?h.get(a):h.invoke(a));});l.pendingRequests=[];(function(a){s(arguments,function(a){l[a]=function(b,c){return l(F(c||{},{method:a,url:b}));};});})("get","delete","head","jsonp");(function(a){s(arguments,function(a){l[a]=function(b,c,d){return l(F(d||{},{method:a,url:b,data:c}));};});})("post","put","patch");l.defaults=b;return l;}];}function tf(){return new N.XMLHttpRequest;}function Je(){this.$get=["$browser","$window","$document",function(b,a,c){return uf(b,tf,b.defer,a.angular.callbacks,c[0]);}];}function uf(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),m=null;f.type="text/javascript";f.src=a;f.async=!0;m=function(a){f.removeEventListener("load",m,!1);f.removeEventListener("error",m,!1);e.body.removeChild(f);f=null;var g=-1,n="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),n=a.type,g="error"===a.type?404:200);c&&c(g,n);};f.addEventListener("load",m,!1);f.addEventListener("error",m,!1);e.body.appendChild(f);return m;}return function(e,k,h,l,m,p,q,n){function r(){C&&C();D&&D.abort();}function O(a,d,e,f,g){u&&c.cancel(u);C=D=null;a(d,e,f,g);b.$$completeOutstandingRequest(y);}b.$$incOutstandingRequestCount();k=k||b.url();if("jsonp"==S(e)){var B="_"+(d.counter++).toString(36);d[B]=function(a){d[B].data=a;d[B].called=!0;};var C=f(k.replace("JSON_CALLBACK","angular.callbacks."+B),B,function(a,b){O(l,a,d[B].data,"",b);d[B]=y;});}else{var D=a();D.open(e,k,!0);s(m,function(a,b){z(a)&&D.setRequestHeader(b,a);});D.onload=function(){var a=D.statusText||"",b="response" in D?D.response:D.responseText,c=1223===D.status?204:D.status;0===c&&(c=b?200:"file"==za(k).protocol?404:0);O(l,c,b,D.getAllResponseHeaders(),a);};e=function(){O(l,-1,null,null,"");};D.onerror=e;D.onabort=e;q&&(D.withCredentials=!0);if(n){try{D.responseType=n;}catch(G){if("json"!==n){throw G;}}}D.send(h||null);}if(0<p){var u=c(r,p);}else{p&&A(p.then)&&p.then(r);}};}function Ge(){var b="{{",a="}}";this.startSymbol=function(a){return a?(b=a,this):b;};this.endSymbol=function(b){return b?(a=b,this):a;};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a;}function g(f,g,n,r){function O(c){return c.replace(l,b).replace(m,a);}function B(a){try{var b;var c=n?e.getTrusted(n,a):e.valueOf(a);if(null==c){b="";}else{switch(typeof c){case"string":break;case"number":c=""+c;break;default:c=ra(c);}b=c;}return b;}catch(g){a=Yb("interr",f,g.toString()),d(a);}}r=!!r;for(var C,D,G=0,u=[],I=[],K=f.length,E=[],s=[];G<K;){if(-1!=(C=f.indexOf(b,G))&&-1!=(D=f.indexOf(a,C+k))){G!==C&&E.push(O(f.substring(G,C))),G=f.substring(C+k,D),u.push(G),I.push(c(G,B)),G=D+h,s.push(E.length),E.push("");}else{G!==K&&E.push(O(f.substring(G)));break;}}if(n&&1<E.length){throw Yb("noconcat",f);}if(!g||u.length){var M=function(a){for(var b=0,c=u.length;b<c;b++){if(r&&x(a[b])){return;}E[s[b]]=a[b];}return E.join("");};return F(function(a){var b=0,c=u.length,e=Array(c);try{for(;b<c;b++){e[b]=I[b](a);}return M(e);}catch(g){a=Yb("interr",f,g.toString()),d(a);}},{exp:f,expressions:u,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(I,function(c,e){var f=M(c);A(b)&&b.call(this,f,c!==e?d:f,a);d=f;},c);}});}}var k=b.length,h=a.length,l=new RegExp(b.replace(/./g,f),"g"),m=new RegExp(a.replace(/./g,f),"g");g.startSymbol=function(){return b;};g.endSymbol=function(){return a;};return g;}];}function He(){this.$get=["$rootScope","$window","$q","$$q",function(b,a,c,d){function e(e,k,h,l){var m=a.setInterval,p=a.clearInterval,q=0,n=z(l)&&!l,r=(n?d:c).defer(),O=r.promise;h=z(h)?h:0;O.then(null,null,e);O.$$intervalId=m(function(){r.notify(q++);0<h&&q>=h&&(r.resolve(q),p(O.$$intervalId),delete f[O.$$intervalId]);n||b.$apply();},k);f[O.$$intervalId]=r;return O;}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1;};return e;}];}function Pd(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other";}};};}function Zb(b){b=b.split("/");for(var a=b.length;a--;){b[a]=kb(b[a]);}return b.join("/");}function Xc(b,a,c){b=za(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=aa(b.port)||vf[b.protocol]||null;}function Yc(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=za(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=qc(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path);}function va(b,a){if(0===a.indexOf(b)){return a.substr(b.length);}}function Fa(b){var a=b.indexOf("#");return -1==a?b:b.substr(0,a);}function $b(b){return b.substr(0,Fa(b).lastIndexOf("/")+1);}function ac(b,a){this.$$html5=!0;a=a||"";var c=$b(b);Xc(b,this,b);this.$$parse=function(a){var e=va(c,a);if(!J(e)){throw bb("ipthprfx",a,c);}Yc(e,this,b);this.$$path||(this.$$path="/");this.$$compose();};this.$$compose=function(){var a=Ib(this.$$search),b=this.$$hash?"#"+kb(this.$$hash):"";this.$$url=Zb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1);};this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0]){return this.hash(e.slice(1)),!0;}var f,g;(f=va(b,d))!==t?(g=f,g=(f=va(a,f))!==t?c+(va("/",f)||f):b+g):(f=va(c,d))!==t?g=c+f:c==d+"/"&&(g=c);g&&this.$$parse(g);return !!g;};}function bc(b,a){var c=$b(b);Xc(b,this,b);this.$$parse=function(d){var e=va(b,d)||va(c,d),e="#"==e.charAt(0)?va(a,e):this.$$html5?e:"";if(!J(e)){throw bb("ihshprfx",d,a);}Yc(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose();};this.$$compose=function(){var c=Ib(this.$$search),e=this.$$hash?"#"+kb(this.$$hash):"";this.$$url=Zb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"");};this.$$parseLinkUrl=function(a,c){return Fa(b)==Fa(a)?(this.$$parse(a),!0):!1;};}function Zc(b,a){this.$$html5=!0;bc.apply(this,arguments);var c=$b(b);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0]){return this.hash(e.slice(1)),!0;}var f,g;b==Fa(d)?f=d:(g=va(c,d))?f=b+a+g:c===d+"/"&&(f=c);f&&this.$$parse(f);return !!f;};this.$$compose=function(){var c=Ib(this.$$search),e=this.$$hash?"#"+kb(this.$$hash):"";this.$$url=Zb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url;};}function zb(b){return function(){return this[b];};}function $c(b,a){return function(c){if(x(c)){return this[b];}this[b]=a(c);this.$$compose();return this;};}function Ke(){var b="",a={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(a){return z(a)?(b=a,this):b;};this.html5Mode=function(b){return Ua(b)?(a.enabled=b,this):P(b)?(Ua(b.enabled)&&(a.enabled=b.enabled),Ua(b.requireBase)&&(a.requireBase=b.requireBase),Ua(b.rewriteLinks)&&(a.rewriteLinks=b.rewriteLinks),this):a;};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function g(a,b,c){var e=h.url(),f=h.$$state;try{d.url(a,b,c),h.$$state=d.state();}catch(g){throw h.url(e),h.$$state=f,g;}}function k(a,b){c.$broadcast("$locationChangeSuccess",h.absUrl(),a,h.$$state,b);}var h,l;l=d.baseHref();var m=d.url(),p;if(a.enabled){if(!l&&a.requireBase){throw bb("nobase");}p=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(l||"/");l=e.history?ac:Zc;}else{p=Fa(m),l=bc;}h=new l(p,"#"+b);h.$$parseLinkUrl(m,m);h.$$state=d.state();var q=/^\s*(javascript|mailto):/i;f.on("click",function(b){if(a.rewriteLinks&&!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var e=v(b.target);"a"!==pa(e[0]);){if(e[0]===f[0]||!(e=e.parent())[0]){return;}}var g=e.prop("href"),k=e.attr("href")||e.attr("xlink:href");P(g)&&"[object SVGAnimatedString]"===g.toString()&&(g=za(g.animVal).href);q.test(g)||!g||e.attr("target")||b.isDefaultPrevented()||!h.$$parseLinkUrl(g,k)||(b.preventDefault(),h.absUrl()!=d.url()&&(c.$apply(),N.angular["ff-684208-preventDefault"]=!0));}});h.absUrl()!=m&&d.url(h.absUrl(),!0);var n=!0;d.onUrlChange(function(a,b){c.$evalAsync(function(){var d=h.absUrl(),e=h.$$state;h.$$parse(a);h.$$state=b;c.$broadcast("$locationChangeStart",a,d,b,e).defaultPrevented?(h.$$parse(d),h.$$state=e,g(d,!1,e)):(n=!1,k(d,e));});c.$$phase||c.$digest();});c.$watch(function(){var a=d.url(),b=d.state(),f=h.$$replace,l=a!==h.absUrl()||h.$$html5&&e.history&&b!==h.$$state;if(n||l){n=!1,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",h.absUrl(),a,h.$$state,b).defaultPrevented?(h.$$parse(a),h.$$state=b):(l&&g(h.absUrl(),f,b===h.$$state?null:h.$$state),k(a,b));});}h.$$replace=!1;});return h;}];}function Le(){var b=!0,a=this;this.debugEnabled=function(a){return z(a)?(b=a,this):b;};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a;}function e(a){var b=c.console||{},e=b[a]||b.log||y;a=!1;try{a=!!e.apply;}catch(h){}return a?function(){var a=[];s(arguments,function(b){a.push(d(b));});return e.apply(b,a);}:function(a,b){e(a,null==b?"":b);};}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments);};}()};}];}function na(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b){throw oa("isecfld",a);}return b;}function Aa(b,a){if(b){if(b.constructor===b){throw oa("isecfn",a);}if(b.window===b){throw oa("isecwindow",a);}if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find)){throw oa("isecdom",a);}if(b===Object){throw oa("isecobj",a);}}return b;}function cc(b){return b.constant;}function Oa(b,a,c,d){Aa(b,d);a=a.split(".");for(var e,f=0;1<a.length;f++){e=na(a.shift(),d);var g=Aa(b[e],d);g||(g={},b[e]=g);b=g;}e=na(a.shift(),d);Aa(b[e],d);return b[e]=c;}function ad(b,a,c,d,e,f){na(b,f);na(a,f);na(c,f);na(d,f);na(e,f);return function(f,k){var h=k&&k.hasOwnProperty(b)?k:f;if(null==h){return h;}h=h[b];if(!a){return h;}if(null==h){return t;}h=h[a];if(!c){return h;}if(null==h){return t;}h=h[c];if(!d){return h;}if(null==h){return t;}h=h[d];return e?null==h?t:h=h[e]:h;};}function bd(b,a,c){var d=cd[b];if(d){return d;}var e=b.split("."),f=e.length;if(a.csp){d=6>f?ad(e[0],e[1],e[2],e[3],e[4],c):function(a,b){var d=0,g;do{g=ad(e[d++],e[d++],e[d++],e[d++],e[d++],c)(a,b),b=t,a=g;}while(d<f);return g;};}else{var g="";s(e,function(a,b){na(a,c);g+="if(s == null) return undefined;\ns="+(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a+";\n";});g+="return s;";a=new Function("s","l",g);a.toString=da(g);d=a;}d.sharedGetter=!0;d.assign=function(a,c){return Oa(a,b,c,b);};return cd[b]=d;}function dc(b){return A(b.valueOf)?b.valueOf():wf.call(b);}function Me(){var b=wa(),a={csp:!1};this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;a.sharedGetter&&(b=function(b,c){return a(b,c);},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign);return b;}function f(a,b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.constant||(e.inputs?f(e.inputs,b):-1===b.indexOf(e)&&b.push(e));}return b;}function g(a,b){return null==a||null==b?a===b:"object"===typeof a&&(a=dc(a),"object"===typeof a)?!1:a===b||a!==a&&b!==b;}function k(a,b,c,d){var e=d.$$inputs||(d.$$inputs=f(d.inputs,[])),h;if(1===e.length){var k=g,e=e[0];return a.$watch(function(a){var b=e(a);g(b,k)||(h=d(a),k=b&&dc(b));return h;},b,c);}for(var l=[],m=0,p=e.length;m<p;m++){l[m]=g;}return a.$watch(function(a){for(var b=!1,c=0,f=e.length;c<f;c++){var k=e[c](a);if(b||(b=!g(k,l[c]))){l[c]=k&&dc(k);}}b&&(h=d(a));return h;},b,c);}function h(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a);},function(a,c,d){f=a;A(b)&&b.apply(this,arguments);z(a)&&d.$$postDigest(function(){z(f)&&e();});},c);}function l(a,b,c,d){function e(a){var b=!0;s(a,function(a){z(a)||(b=!1);});return b;}var f,g;return f=a.$watch(function(a){return d(a);},function(a,c,d){g=a;A(b)&&b.call(this,a,c,d);e(a)&&d.$$postDigest(function(){e(g)&&f();});},c);}function m(a,b,c,d){var e;return e=a.$watch(function(a){return d(a);},function(a,c,d){A(b)&&b.apply(this,arguments);e();},c);}function p(a,b){if(!b){return a;}var c=function(c,d){var e=a(c,d),f=b(e,c,d);return z(e)?f:e;};a.$$watchDelegate&&a.$$watchDelegate!==k?c.$$watchDelegate=a.$$watchDelegate:b.$stateful||(c.$$watchDelegate=k,c.inputs=[a]);return c;}a.csp=d.csp;return function(d,f){var g,O,B;switch(typeof d){case"string":return B=d=d.trim(),g=b[B],g||(":"===d.charAt(0)&&":"===d.charAt(1)&&(O=!0,d=d.substring(2)),g=new ec(a),g=(new cb(g,c,a)).parse(d),g.constant?g.$$watchDelegate=m:O?(g=e(g),g.$$watchDelegate=g.literal?l:h):g.inputs&&(g.$$watchDelegate=k),b[B]=g),p(g,f);case"function":return p(d,f);default:return p(y,f);}};}];}function Oe(){this.$get=["$rootScope","$exceptionHandler",function(b,a){return dd(function(a){b.$evalAsync(a);},a);}];}function Pe(){this.$get=["$browser","$exceptionHandler",function(b,a){return dd(function(a){b.defer(a);},a);}];}function dd(b,a){function c(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c));};}var e=!1;return[d(b),d(c)];}function d(){this.$$state={status:0};}function e(a,b){return function(c){b.call(a,c);};}function f(c){!c.processScheduled&&c.pending&&(c.processScheduled=!0,b(function(){var b,d,e;e=c.pending;c.processScheduled=!1;c.pending=t;for(var f=0,g=e.length;f<g;++f){d=e[f][0];b=e[f][c.status];try{A(b)?d.resolve(b(c.value)):1===c.status?d.resolve(c.value):d.reject(c.value);}catch(h){d.reject(h),a(h);}}}));}function g(){this.promise=new d;this.resolve=e(this,this.resolve);this.reject=e(this,this.reject);this.notify=e(this,this.notify);}var k=w("$q",TypeError);d.prototype={then:function(a,b,c){var d=new g;this.$$state.pending=this.$$state.pending||[];this.$$state.pending.push([d,a,b,c]);0<this.$$state.status&&f(this.$$state);return d.promise;},"catch":function(a){return this.then(null,a);},"finally":function(a,b){return this.then(function(b){return l(b,!0,a);},function(b){return l(b,!1,a);},b);}};g.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(k("qcycle",a)):this.$$resolve(a));},$$resolve:function(b){var d,e;e=c(this,this.$$resolve,this.$$reject);try{if(P(b)||A(b)){d=b&&b.then;}A(d)?(this.promise.$$state.status=-1,d.call(b,e[0],e[1],this.notify)):(this.promise.$$state.value=b,this.promise.$$state.status=1,f(this.promise.$$state));}catch(g){e[1](g),a(g);}},reject:function(a){this.promise.$$state.status||this.$$reject(a);},$$reject:function(a){this.promise.$$state.value=a;this.promise.$$state.status=2;f(this.promise.$$state);},notify:function(c){var d=this.promise.$$state.pending;0>=this.promise.$$state.status&&d&&d.length&&b(function(){for(var b,e,f=0,g=d.length;f<g;f++){e=d[f][0];b=d[f][3];try{e.notify(A(b)?b(c):c);}catch(h){a(h);}}});}};var h=function(a,b){var c=new g;b?c.resolve(a):c.reject(a);return c.promise;},l=function(a,b,c){var d=null;try{A(c)&&(d=c());}catch(e){return h(e,!1);}return d&&A(d.then)?d.then(function(){return h(a,b);},function(a){return h(a,!1);}):h(a,b);},m=function(a,b,c,d){var e=new g;e.resolve(a);return e.promise.then(b,c,d);},p=function n(a){if(!A(a)){throw k("norslvr",a);}if(!(this instanceof n)){return new n(a);}var b=new g;a(function(a){b.resolve(a);},function(a){b.reject(a);});return b.promise;};p.defer=function(){return new g;};p.reject=function(a){var b=new g;b.reject(a);return b.promise;};p.when=m;p.all=function(a){var b=new g,c=0,d=H(a)?[]:{};s(a,function(a,e){c++;m(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d));},function(a){d.hasOwnProperty(e)||b.reject(a);});});0===c&&b.resolve(d);return b.promise;};return p;}function Ye(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b);};}:function(b){var c=a(b,16.66,!1);return function(){a.cancel(c);};};f.supported=e;return f;}];}function Ne(){var b=10,a=w("$rootScope"),c=null,d=null;this.digestTtl=function(a){arguments.length&&(b=a);return b;};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(e,f,g,k){function h(){this.$id=++gb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this.$root=this;this.$$destroyed=!1;this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings=null;}function l(b){if(r.$$phase){throw a("inprog",r.$$phase);}r.$$phase=b;}function m(a,b,c){do{a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];}while(a=a.$parent);}function p(){}function q(){for(;C.length;){try{C.shift()();}catch(a){f(a);}}d=null;}function n(){null===d&&(d=k.defer(function(){r.$apply(q);}));}h.prototype={constructor:h,$new:function(a,b){function c(){d.$$destroyed=!0;}var d;b=b||this;a?(d=new h,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=++gb;this.$$ChildScope=null;},this.$$ChildScope.prototype=this),d=new this.$$ChildScope);d.$parent=b;d.$$prevSibling=b.$$childTail;b.$$childHead?(b.$$childTail.$$nextSibling=d,b.$$childTail=d):b.$$childHead=b.$$childTail=d;(a||b!=this)&&d.$on("$destroy",c);return d;},$watch:function(a,b,d){var e=g(a);if(e.$$watchDelegate){return e.$$watchDelegate(this,b,d,e);}var f=this.$$watchers,h={fn:b,last:p,get:e,exp:a,eq:!!d};c=null;A(b)||(h.fn=y);f||(f=this.$$watchers=[]);f.unshift(h);return function(){Va(f,h);c=null;};},$watchGroup:function(a,b){function c(){h=!1;k?(k=!1,b(e,e,g)):b(e,d,g);}var d=Array(a.length),e=Array(a.length),f=[],g=this,h=!1,k=!0;if(!a.length){var l=!0;g.$evalAsync(function(){l&&b(e,e,g);});return function(){l=!1;};}if(1===a.length){return this.$watch(a[0],function(a,c,f){e[0]=a;d[0]=c;b(e,a===c?e:d,f);});}s(a,function(a,b){var k=g.$watch(a,function(a,f){e[b]=a;d[b]=f;h||(h=!0,g.$evalAsync(c));});f.push(k);});return function(){for(;f.length;){f.shift()();}};},$watchCollection:function(a,b){function c(a){e=a;var b,d,g,h;if(P(e)){if(Qa(e)){for(f!==p&&(f=p,r=f.length=0,l++),a=e.length,r!==a&&(l++,f.length=r=a),b=0;b<a;b++){h=f[b],g=e[b],d=h!==h&&g!==g,d||h===g||(l++,f[b]=g);}}else{f!==q&&(f=q={},r=0,l++);a=0;for(b in e){e.hasOwnProperty(b)&&(a++,g=e[b],h=f[b],b in f?(d=h!==h&&g!==g,d||h===g||(l++,f[b]=g)):(r++,f[b]=g,l++));}if(r>a){for(b in l++,f){e.hasOwnProperty(b)||(r--,delete f[b]);}}}}else{f!==e&&(f=e,l++);}return l;}c.$stateful=!0;var d=this,e,f,h,k=1<b.length,l=0,m=g(a,c),p=[],q={},n=!0,r=0;return this.$watch(m,function(){n?(n=!1,b(e,e,d)):b(e,h,d);if(k){if(P(e)){if(Qa(e)){h=Array(e.length);for(var a=0;a<e.length;a++){h[a]=e[a];}}else{for(a in h={},e){Hb.call(e,a)&&(h[a]=e[a]);}}}else{h=e;}}});},$digest:function(){var e,g,h,m,n,s,C=b,M,t=[],W,R,z;l("$digest");k.$$checkUrlChange();this===r&&null!==d&&(k.defer.cancel(d),q());c=null;do{s=!1;for(M=this;O.length;){try{z=O.shift(),z.scope.$eval(z.expression);}catch(w){f(w);}c=null;}a:do{if(m=M.$$watchers){for(n=m.length;n--;){try{if(e=m[n]){if((g=e.get(M))!==(h=e.last)&&!(e.eq?la(g,h):"number"===typeof g&&"number"===typeof h&&isNaN(g)&&isNaN(h))){s=!0,c=e,e.last=e.eq?Ca(g,null):g,e.fn(g,h===p?g:h,M),5>C&&(W=4-C,t[W]||(t[W]=[]),R=A(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,R+="; newVal: "+ra(g)+"; oldVal: "+ra(h),t[W].push(R));}else{if(e===c){s=!1;break a;}}}}catch(v){f(v);}}}if(!(m=M.$$childHead||M!==this&&M.$$nextSibling)){for(;M!==this&&!(m=M.$$nextSibling);){M=M.$parent;}}}while(M=m);if((s||O.length)&&!C--){throw r.$$phase=null,a("infdig",b,ra(t));}}while(s||O.length);for(r.$$phase=null;B.length;){try{B.shift()();}catch(y){f(y);}}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;if(this!==r){for(var b in this.$$listenerCount){m(this,this.$$listenerCount[b],b);}a.$$childHead==this&&(a.$$childHead=this.$$nextSibling);a.$$childTail==this&&(a.$$childTail=this.$$prevSibling);this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling);this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling);this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=y;this.$on=this.$watch=this.$watchGroup=function(){return y;};this.$$listeners={};this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null;}}},$eval:function(a,b){return g(a)(this,b);},$evalAsync:function(a){r.$$phase||O.length||k.defer(function(){O.length&&r.$digest();});O.push({scope:this,expression:a});},$$postDigest:function(a){B.push(a);},$apply:function(a){try{return l("$apply"),this.$eval(a);}catch(b){f(b);}finally{r.$$phase=null;try{r.$digest();}catch(c){throw f(c),c;}}},$applyAsync:function(a){function b(){c.$eval(a);}var c=this;a&&C.push(b);n();},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do{d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;}while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,m(e,1,a));};},$emit:function(a,b){var c=[],d,e=this,g=!1,h={name:a,targetScope:e,stopPropagation:function(){g=!0;},preventDefault:function(){h.defaultPrevented=!0;},defaultPrevented:!1},k=ib([h],arguments,1),l,m;do{d=e.$$listeners[a]||c;h.currentScope=e;l=0;for(m=d.length;l<m;l++){if(d[l]){try{d[l].apply(null,k);}catch(p){f(p);}}else{d.splice(l,1),l--,m--;}}if(g){return h.currentScope=null,h;}e=e.$parent;}while(e);h.currentScope=null;return h;},$broadcast:function(a,b){var c=this,d=this,e={name:a,targetScope:this,preventDefault:function(){e.defaultPrevented=!0;},defaultPrevented:!1};if(!this.$$listenerCount[a]){return e;}for(var g=ib([e],arguments,1),h,k;c=d;){e.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++){if(d[h]){try{d[h].apply(null,g);}catch(l){f(l);}}else{d.splice(h,1),h--,k--;}}if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling)){for(;c!==this&&!(d=c.$$nextSibling);){c=c.$parent;}}}e.currentScope=null;return e;}};var r=new h,O=r.$$asyncQueue=[],B=r.$$postDigestQueue=[],C=r.$$applyAsyncQueue=[];return r;}];}function Qd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(a){return z(a)?(b=a,this):b;};this.imgSrcSanitizationWhitelist=function(b){return z(b)?(a=b,this):a;};this.$get=function(){return function(c,d){var e=d?a:b,f;f=za(c).href;return""===f||f.match(e)?c:"unsafe:"+f;};};}function xf(b){if("self"===b){return b;}if(J(b)){if(-1<b.indexOf("***")){throw Ba("iwcard",b);}b=ed(b).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return new RegExp("^"+b+"$");}if(hb(b)){return new RegExp("^"+b.source+"$");}throw Ba("imatcher");}function fd(b){var a=[];z(b)&&s(b,function(b){a.push(xf(b));});return a;}function Re(){this.SCE_CONTEXTS=ja;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=fd(a));return b;};this.resourceUrlBlacklist=function(b){arguments.length&&(a=fd(b));return a;};this.$get=["$injector",function(c){function d(a,b){return"self"===a?Wc(b):!!a.exec(b.href);}function e(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a;};};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue();};b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString();};return b;}var f=function(a){throw Ba("unsafe");};c.has("$sanitize")&&(f=c.get("$sanitize"));var g=e(),k={};k[ja.HTML]=e(g);k[ja.CSS]=e(g);k[ja.URL]=e(g);k[ja.JS]=e(g);k[ja.RESOURCE_URL]=e(k[ja.URL]);return{trustAs:function(a,b){var c=k.hasOwnProperty(a)?k[a]:null;if(!c){throw Ba("icontext",a,b);}if(null===b||b===t||""===b){return b;}if("string"!==typeof b){throw Ba("itype",a);}return new c(b);},getTrusted:function(c,e){if(null===e||e===t||""===e){return e;}var g=k.hasOwnProperty(c)?k[c]:null;if(g&&e instanceof g){return e.$$unwrapTrustedValue();}if(c===ja.RESOURCE_URL){var g=za(e.toString()),p,q,n=!1;p=0;for(q=b.length;p<q;p++){if(d(b[p],g)){n=!0;break;}}if(n){for(p=0,q=a.length;p<q;p++){if(d(a[p],g)){n=!1;break;}}}if(n){return e;}throw Ba("insecurl",e.toString());}if(c===ja.HTML){return f(e);}throw Ba("unsafe");},valueOf:function(a){return a instanceof g?a.$$unwrapTrustedValue():a;}};}];}function Qe(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b;};this.$get=["$parse","$sceDelegate",function(a,c){if(b&&8>Ha){throw Ba("iequirks");}var d=qa(ja);d.isEnabled=function(){return b;};d.trustAs=c.trustAs;d.getTrusted=c.getTrusted;d.valueOf=c.valueOf;b||(d.trustAs=d.getTrusted=function(a,b){return b;},d.valueOf=Sa);d.parseAs=function(b,c){var e=a(c);return e.literal&&e.constant?e:a(c,function(a){return d.getTrusted(b,a);});};var e=d.parseAs,f=d.getTrusted,g=d.trustAs;s(ja,function(a,b){var c=S(b);d[$a("parse_as_"+c)]=function(b){return e(a,b);};d[$a("get_trusted_"+c)]=function(b){return f(a,b);};d[$a("trust_as_"+c)]=function(b){return g(a,b);};});return d;}];}function Se(){this.$get=["$window","$document",function(b,a){var c={},d=aa((/android (\d+)/.exec(S((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},g,k=/^(Moz|webkit|ms)(?=[A-Z])/,h=f.body&&f.body.style,l=!1,m=!1;if(h){for(var p in h){if(l=k.exec(p)){g=l[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break;}}g||(g="WebkitOpacity" in h&&"webkit");l=!!("transition" in h||g+"Transition" in h);m=!!("animation" in h||g+"Animation" in h);!d||l&&m||(l=J(f.body.style.webkitTransition),m=J(f.body.style.webkitAnimation));}return{history:!(!b.history||!b.history.pushState||4>d||e),hasEvent:function(a){if("input"==a&&9==Ha){return !1;}if(x(c[a])){var b=f.createElement("div");c[a]="on"+a in b;}return c[a];},csp:Ya(),vendorPrefix:g,transitions:l,animations:m,android:d};}];}function Ue(){this.$get=["$templateCache","$http","$q",function(b,a,c){function d(e,f){d.totalPendingRequests++;var g=a.defaults&&a.defaults.transformResponse;if(H(g)){for(var k=g,g=[],h=0;h<k.length;++h){var l=k[h];l!==Wb&&g.push(l);}}else{g===Wb&&(g=null);}return a.get(e,{cache:b,transformResponse:g}).then(function(a){a=a.data;d.totalPendingRequests--;b.put(e,a);return a;},function(){d.totalPendingRequests--;if(!f){throw ia("tpload",e);}return c.reject();});}d.totalPendingRequests=0;return d;}];}function Ve(){this.$get=["$rootScope","$browser","$location",function(b,a,c){return{findBindings:function(a,b,c){a=a.getElementsByClassName("ng-binding");var g=[];s(a,function(a){var d=ta.element(a).data("$binding");d&&s(d,function(d){c?(new RegExp("(^|\\s)"+ed(b)+"(\\s|\\||$)")).test(d)&&g.push(a):-1!=d.indexOf(b)&&g.push(a);});});return g;},findModels:function(a,b,c){for(var g=["ng-","data-ng-","ng\\:"],k=0;k<g.length;++k){var h=a.querySelectorAll("["+g[k]+"model"+(c?"=":"*=")+'"'+b+'"]');if(h.length){return h;}}},getLocation:function(){return c.url();},setLocation:function(a){a!==c.url()&&(c.url(a),b.$digest());},whenStable:function(b){a.notifyWhenNoOutstandingRequests(b);}};}];}function We(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,h,l){var m=z(l)&&!l,p=(m?d:c).defer(),q=p.promise;h=a.defer(function(){try{p.resolve(f());}catch(a){p.reject(a),e(a);}finally{delete g[q.$$timeoutId];}m||b.$apply();},h);q.$$timeoutId=h;g[h]=p;return q;}var g={};f.cancel=function(b){return b&&b.$$timeoutId in g?(g[b.$$timeoutId].reject("canceled"),delete g[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):!1;};return f;}];}function za(b,a){var c=b;Ha&&(Z.setAttribute("href",c),c=Z.href);Z.setAttribute("href",c);return{href:Z.href,protocol:Z.protocol?Z.protocol.replace(/:$/,""):"",host:Z.host,search:Z.search?Z.search.replace(/^\?/,""):"",hash:Z.hash?Z.hash.replace(/^#/,""):"",hostname:Z.hostname,port:Z.port,pathname:"/"===Z.pathname.charAt(0)?Z.pathname:"/"+Z.pathname};}function Wc(b){b=J(b)?za(b):b;return b.protocol===gd.protocol&&b.host===gd.host;}function Xe(){this.$get=da(N);}function Bc(b){function a(c,d){if(P(c)){var e={};s(c,function(b,c){e[c]=a(c,b);});return e;}return b.factory(c+"Filter",d);}this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+"Filter");};}];a("currency",hd);a("date",id);a("filter",yf);a("json",zf);a("limitTo",Af);a("lowercase",Bf);a("number",jd);a("orderBy",kd);a("uppercase",Cf);}function yf(){return function(b,a,c){if(!H(b)){return b;}var d=typeof c,e=[];e.check=function(a,b){for(var c=0;c<e.length;c++){if(!e[c](a,b)){return !1;}}return !0;};"function"!==d&&(c="boolean"===d&&c?function(a,b){return ta.equals(a,b);}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a){if("$"!==d.charAt(0)&&Hb.call(a,d)&&c(a[d],b[d])){return !0;}}return !1;}b=(""+b).toLowerCase();return -1<(""+a).toLowerCase().indexOf(b);});var f=function(a,b){if("string"===typeof b&&"!"===b.charAt(0)){return !f(a,b.substr(1));}switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a){if("$"!==d.charAt(0)&&f(a[d],b)){return !0;}}}return !1;case"array":for(d=0;d<a.length;d++){if(f(a[d],b)){return !0;}}return !1;default:return !1;}};switch(typeof a){case"boolean":case"number":case"string":a={$:a};case"object":for(var g in a){(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b]);});})(g);}break;case"function":e.push(a);break;default:return b;}d=[];for(g=0;g<b.length;g++){var k=b[g];e.check(k,g)&&d.push(k);}return d;};}function hd(b){var a=b.NUMBER_FORMATS;return function(b,d,e){x(d)&&(d=a.CURRENCY_SYM);x(e)&&(e=2);return null==b?b:ld(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,e).replace(/\u00A4/g,d);};}function jd(b){var a=b.NUMBER_FORMATS;return function(b,d){return null==b?b:ld(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d);};}function ld(b,a,c,d,e){if(!isFinite(b)||P(b)){return"";}var f=0>b;b=Math.abs(b);var g=b+"",k="",h=[],l=!1;if(-1!==g.indexOf("e")){var m=g.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&m[3]>e+1?(g="0",b=0):(k=g,l=!0);}if(l){0<e&&-1<b&&1>b&&(k=b.toFixed(e));}else{g=(g.split(md)[1]||"").length;x(e)&&(e=Math.min(Math.max(a.minFrac,g),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);0===b&&(f=!1);b=(""+b).split(md);g=b[0];b=b[1]||"";var m=0,p=a.lgSize,q=a.gSize;if(g.length>=p+q){for(m=g.length-p,l=0;l<m;l++){0===(m-l)%q&&0!==l&&(k+=c),k+=g.charAt(l);}}for(l=m;l<g.length;l++){0===(g.length-l)%p&&0!==l&&(k+=c),k+=g.charAt(l);}for(;b.length<e;){b+="0";}e&&"0"!==e&&(k+=d+b.substr(0,e));}h.push(f?a.negPre:a.posPre);h.push(k);h.push(f?a.negSuf:a.posSuf);return h.join("");}function Ab(b,a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;){b="0"+b;}c&&(b=b.substr(b.length-a));return d+b;}function $(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c){e+=c;}0===e&&-12==c&&(e=12);return Ab(e,a,d);};}function Bb(b,a){return function(c,d){var e=c["get"+b](),f=ob(a?"SHORT"+b:b);return d[f][e];};}function nd(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a);}function od(b){return function(a){var c=nd(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))-+c;a=1+Math.round(a/604800000);return Ab(a,b);};}function id(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,g=0,k=b[8]?a.setUTCFullYear:a.setFullYear,h=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=aa(b[9]+b[10]),g=aa(b[9]+b[11]));k.call(a,aa(b[1]),aa(b[2])-1,aa(b[3]));f=aa(b[4]||0)-f;g=aa(b[5]||0)-g;k=aa(b[6]||0);b=Math.round(1000*parseFloat("0."+(b[7]||0)));h.call(a,f,g,k,b);}return a;}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g="",k=[],h,l;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;J(c)&&(c=Df.test(c)?aa(c):a(c));X(c)&&(c=new Date(c));if(!ea(c)){return c;}for(;e;){(l=Ef.exec(e))?(k=ib(k,l,1),e=k.pop()):(k.push(e),e=null);}f&&"UTC"===f&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset()));s(k,function(a){h=Ff[a];g+=h?h(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'");});return g;};}function zf(){return function(b){return ra(b,!0);};}function Af(){return function(b,a){X(b)&&(b=b.toString());if(!H(b)&&!J(b)){return b;}a=Infinity===Math.abs(Number(a))?Number(a):aa(a);if(J(b)){return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";}var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=b.length+a,e=b.length);for(;d<e;d++){c.push(b[d]);}return c;};}function kd(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b);}:a;}function f(a,b){var c=typeof a,d=typeof b;return c==d?(ea(a)&&ea(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1;}if(!Qa(a)){return a;}c=H(c)?c:[c];0===c.length&&(c=["+"]);c=c.map(function(a){var c=!1,d=a||Sa;if(J(a)){if("+"==a.charAt(0)||"-"==a.charAt(0)){c="-"==a.charAt(0),a=a.substring(1);}if(""===a){return e(function(a,b){return f(a,b);},c);}d=b(a);if(d.constant){var g=d();return e(function(a,b){return f(a[g],b[g]);},c);}}return e(function(a,b){return f(d(a),d(b));},c);});for(var g=[],k=0;k<a.length;k++){g.push(a[k]);}return g.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e){return e;}}return 0;},d));};}function Ia(b){A(b)&&(b={link:b});b.restrict=b.restrict||"AC";return da(b);}function pd(b,a,c,d,e){var f=this,g=[],k=f.$$parentForm=b.parent().controller("form")||Cb;f.$error={};f.$$success={};f.$pending=t;f.$name=e(a.name||a.ngForm||"")(c);f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;f.$submitted=!1;k.$addControl(f);f.$rollbackViewValue=function(){s(g,function(a){a.$rollbackViewValue();});};f.$commitViewValue=function(){s(g,function(a){a.$commitViewValue();});};f.$addControl=function(a){La(a.$name,"input");g.push(a);a.$name&&(f[a.$name]=a);};f.$$renameControl=function(a,b){var c=a.$name;f[c]===a&&delete f[c];f[b]=a;a.$name=b;};f.$removeControl=function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];s(f.$pending,function(b,c){f.$setValidity(c,null,a);});s(f.$error,function(b,c){f.$setValidity(c,null,a);});Va(g,a);};qd({ctrl:this,$element:b,set:function(a,b,c){var d=a[b];d?-1===d.indexOf(c)&&d.push(c):a[b]=[c];},unset:function(a,b,c){var d=a[b];d&&(Va(d,c),0===d.length&&delete a[b]);},parentForm:k,$animate:d});f.$setDirty=function(){d.removeClass(b,Pa);d.addClass(b,Db);f.$dirty=!0;f.$pristine=!1;k.$setDirty();};f.$setPristine=function(){d.setClass(b,Pa,Db+" ng-submitted");f.$dirty=!1;f.$pristine=!0;f.$submitted=!1;s(g,function(a){a.$setPristine();});};f.$setUntouched=function(){s(g,function(a){a.$setUntouched();});};f.$setSubmitted=function(){d.addClass(b,"ng-submitted");f.$submitted=!0;k.$setSubmitted();};}function fc(b){b.$formatters.push(function(a){return b.$isEmpty(a)?a:a.toString();});}function db(b,a,c,d,e,f){var g=a[0].placeholder,k={},h=S(a[0].type);if(!e.android){var l=!1;a.on("compositionstart",function(a){l=!0;});a.on("compositionend",function(){l=!1;m();});}var m=function(b){if(!l){var e=a.val(),f=b&&b.type;Ha&&"input"===(b||k).type&&a[0].placeholder!==g?g=a[0].placeholder:("password"===h||c.ngTrim&&"false"===c.ngTrim||(e=T(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,f));}};if(e.hasEvent("input")){a.on("input",m);}else{var p,q=function(a){p||(p=f.defer(function(){m(a);p=null;}));};a.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||q(a);});if(e.hasEvent("paste")){a.on("paste cut",q);}}a.on("change",m);d.$render=function(){a.val(d.$isEmpty(d.$modelValue)?"":d.$viewValue);};}function Eb(b,a){return function(c,d){var e,f;if(ea(c)){return c;}if(J(c)){'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1));if(Gf.test(c)){return new Date(c);}b.lastIndex=0;if(e=b.exec(c)){return e.shift(),f=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1000}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},s(e,function(b,c){c<a.length&&(f[a[c]]=+b);}),new Date(f.yyyy,f.MM-1,f.dd,f.HH,f.mm,f.ss||0,1000*f.sss||0);}}return NaN;};}function eb(b,a,c,d){return function(e,f,g,k,h,l,m){function p(a){return z(a)?ea(a)?a:c(a):t;}rd(e,f,g,k);db(e,f,g,k,h,l);var q=k&&k.$options&&k.$options.timezone,n;k.$$parserName=b;k.$parsers.push(function(b){return k.$isEmpty(b)?null:a.test(b)?(b=c(b,n),"UTC"===q&&b.setMinutes(b.getMinutes()-b.getTimezoneOffset()),b):t;});k.$formatters.push(function(a){if(k.$isEmpty(a)){n=null;}else{if(!ea(a)){throw Fb("datefmt",a);}if((n=a)&&"UTC"===q){var b=60000*n.getTimezoneOffset();n=new Date(n.getTime()+b);}return m("date")(a,d,q);}return"";});if(z(g.min)||g.ngMin){var r;k.$validators.min=function(a){return k.$isEmpty(a)||x(r)||c(a)>=r;};g.$observe("min",function(a){r=p(a);k.$validate();});}if(z(g.max)||g.ngMax){var s;k.$validators.max=function(a){return k.$isEmpty(a)||x(s)||c(a)<=s;};g.$observe("max",function(a){s=p(a);k.$validate();});}k.$isEmpty=function(a){return !a||a.getTime&&a.getTime()!==a.getTime();};};}function rd(b,a,c,d){(d.$$hasNativeValidators=P(a[0].validity))&&d.$parsers.push(function(b){var c=a.prop("validity")||{};return c.badInput&&!c.typeMismatch?t:b;});}function sd(b,a,c,d,e){if(z(d)){b=b(d);if(!b.constant){throw w("ngModel")("constexpr",c,d);}return b(a);}return e;}function qd(b){function a(a,b){b&&!f[a]?(l.addClass(e,a),f[a]=!0):!b&&f[a]&&(l.removeClass(e,a),f[a]=!1);}function c(b,c){b=b?"-"+Kb(b,"-"):"";a(fb+b,!0===c);a(td+b,!1===c);}var d=b.ctrl,e=b.$element,f={},g=b.set,k=b.unset,h=b.parentForm,l=b.$animate;f[td]=!(f[fb]=e.hasClass(fb));d.$setValidity=function(b,e,f){e===t?(d.$pending||(d.$pending={}),g(d.$pending,b,f)):(d.$pending&&k(d.$pending,b,f),ud(d.$pending)&&(d.$pending=t));Ua(e)?e?(k(d.$error,b,f),g(d.$$success,b,f)):(g(d.$error,b,f),k(d.$$success,b,f)):(k(d.$error,b,f),k(d.$$success,b,f));d.$pending?(a(vd,!0),d.$valid=d.$invalid=t,c("",null)):(a(vd,!1),d.$valid=ud(d.$error),d.$invalid=!d.$valid,c("",d.$valid));e=d.$pending&&d.$pending[b]?t:d.$error[b]?!1:d.$$success[b]?!0:null;c(b,e);h.$setValidity(b,e,d);};}function ud(b){if(b){for(var a in b){return !1;}}return !0;}function gc(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++){if(e==b[m]){continue a;}}c.push(e);}return c;}function e(a){if(!H(a)){if(J(a)){return a.split(" ");}if(P(a)){var b=[];s(a,function(a,c){a&&(b=b.concat(c.split(" ")));});return b;}}return a;}return{restrict:"AC",link:function(f,g,k){function h(a,b){var c=g.data("$classCounts")||{},d=[];s(a,function(a){if(0<b||c[a]){c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a);}});g.data("$classCounts",c);return d.join(" ");}function l(b){if(!0===a||f.$index%2===a){var l=e(b||[]);if(!m){var n=h(l,1);k.$addClass(n);}else{if(!la(b,m)){var r=e(m),n=d(l,r),l=d(r,l),n=h(n,1),l=h(l,-1);n&&n.length&&c.addClass(g,n);l&&l.length&&c.removeClass(g,l);}}}m=qa(b);}var m;f.$watch(k[b],l,!0);k.$observe("class",function(a){l(f.$eval(k[b]));});"ngClass"!==b&&f.$watch("$index",function(c,d){var g=c&1;if(g!==(d&1)){var l=e(f.$eval(k[b]));g===a?(g=h(l,1),k.$addClass(g)):(g=h(l,-1),k.$removeClass(g));}});}};}];}var Hf=/^\/(.+)\/([a-z]*)$/,S=function(b){return J(b)?b.toLowerCase():b;},Hb=Object.prototype.hasOwnProperty,ob=function(b){return J(b)?b.toUpperCase():b;},Ha,v,ma,Xa=[].slice,pf=[].splice,If=[].push,Ja=Object.prototype.toString,Wa=w("ng"),ta=N.angular||(N.angular={}),Za,gb=0;Ha=U.documentMode;y.$inject=[];Sa.$inject=[];var H=Array.isArray,T=function(b){return J(b)?b.trim():b;},ed=function(b){return b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08");},Ya=function(){if(z(Ya.isActive_)){return Ya.isActive_;}var b=!(!U.querySelector("[ng-csp]")&&!U.querySelector("[data-ng-csp]"));if(!b){try{new Function("");}catch(a){b=!0;}}return Ya.isActive_=b;},lb=["ng-","data-ng-","ng:","x-ng-"],Kd=/[A-Z]/g,sc=!1,Lb,ka=1,jb=3,Od={full:"1.3.1",major:1,minor:3,dot:1,codeName:"spectral-lobster"};Q.expando="ng339";var tb=Q.cache={},ef=1;Q._data=function(b){return this.cache[b[this.expando]]||{};};var $e=/([\:\-\_]+(.))/g,af=/^moz([A-Z])/,Jf={mouseleave:"mouseout",mouseenter:"mouseover"},Ob=w("jqLite"),df=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Nb=/<|&#?\w+;/,bf=/<([\w:]+)/,cf=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ha={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ha.optgroup=ha.option;ha.tbody=ha.tfoot=ha.colgroup=ha.caption=ha.thead;ha.th=ha.td;var Ka=Q.prototype={ready:function(b){function a(){c||(c=!0,b());}var c=!1;"complete"===U.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),Q(N).on("load",a));},toString:function(){var b=[];s(this,function(a){b.push(""+a);});return"["+b.join(", ")+"]";},eq:function(b){return 0<=b?v(this[b]):v(this[this.length+b]);},length:0,push:If,sort:[].sort,splice:[].splice},vb={};s("multiple selected checked disabled readOnly required open".split(" "),function(b){vb[S(b)]=b;});var Kc={};s("input select option textarea button form details".split(" "),function(b){Kc[b]=!0;});var Lc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};s({data:Qb,removeData:rb},function(b,a){Q[a]=b;});s({data:Qb,inheritedData:ub,scope:function(b){return v.data(b,"$scope")||ub(b.parentNode||b,["$isolateScope","$scope"]);},isolateScope:function(b){return v.data(b,"$isolateScope")||v.data(b,"$isolateScopeNoTemplate");},controller:Gc,injector:function(b){return ub(b,"$injector");},removeAttr:function(b,a){b.removeAttribute(a);},hasClass:Rb,css:function(b,a,c){a=$a(a);if(z(c)){b.style[a]=c;}else{return b.style[a];}},attr:function(b,a,c){var d=S(a);if(vb[d]){if(z(c)){c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));}else{return b[a]||(b.attributes.getNamedItem(a)||y).specified?d:t;}}else{if(z(c)){b.setAttribute(a,c);}else{if(b.getAttribute){return b=b.getAttribute(a,2),null===b?t:b;}}}},prop:function(b,a,c){if(z(c)){b[a]=c;}else{return b[a];}},text:function(){function b(a,b){if(x(b)){var d=a.nodeType;return d===ka||d===jb?a.textContent:"";}a.textContent=b;}b.$dv="";return b;}(),val:function(b,a){if(x(a)){if(b.multiple&&"select"===pa(b)){var c=[];s(b.options,function(a){a.selected&&c.push(a.value||a.text);});return 0===c.length?null:c;}return b.value;}b.value=a;},html:function(b,a){if(x(a)){return b.innerHTML;}qb(b,!0);b.innerHTML=a;},empty:Hc},function(b,a){Q.prototype[a]=function(a,d){var e,f,g=this.length;if(b!==Hc&&(2==b.length&&b!==Rb&&b!==Gc?a:d)===t){if(P(a)){for(e=0;e<g;e++){if(b===Qb){b(this[e],a);}else{for(f in a){b(this[e],f,a[f]);}}}return this;}e=b.$dv;g=e===t?Math.min(g,1):g;for(f=0;f<g;f++){var k=b(this[f],a,d);e=e?e+k:k;}return e;}for(e=0;e<g;e++){b(this[e],a,d);}return this;};});s({removeData:rb,on:function a(c,d,e,f){if(z(f)){throw Ob("onargs");}if(Cc(c)){var g=sb(c,!0);f=g.events;var k=g.handle;k||(k=g.handle=hf(c,f));for(var g=0<=d.indexOf(" ")?d.split(" "):[d],h=g.length;h--;){d=g[h];var l=f[d];l||(f[d]=[],"mouseenter"===d||"mouseleave"===d?a(c,Jf[d],function(a){var c=a.relatedTarget;c&&(c===this||this.contains(c))||k(a,d);}):"$destroy"!==d&&c.addEventListener(d,k,!1),l=f[d]);l.push(e);}}},off:Fc,one:function(a,c,d){a=v(a);a.on(c,function f(){a.off(c,d);a.off(c,f);});a.on(c,d);},replaceWith:function(a,c){var d,e=a.parentNode;qb(a);s(new Q(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c;});},children:function(a){var c=[];s(a.childNodes,function(a){a.nodeType===ka&&c.push(a);});return c;},contents:function(a){return a.contentDocument||a.childNodes||[];},append:function(a,c){var d=a.nodeType;if(d===ka||11===d){c=new Q(c);for(var d=0,e=c.length;d<e;d++){a.appendChild(c[d]);}}},prepend:function(a,c){if(a.nodeType===ka){var d=a.firstChild;s(new Q(c),function(c){a.insertBefore(c,d);});}},wrap:function(a,c){c=v(c).eq(0).clone()[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a);},remove:Ic,detach:function(a){Ic(a,!0);},after:function(a,c){var d=a,e=a.parentNode;c=new Q(c);for(var f=0,g=c.length;f<g;f++){var k=c[f];e.insertBefore(k,d.nextSibling);d=k;}},addClass:Tb,removeClass:Sb,toggleClass:function(a,c,d){c&&s(c.split(" "),function(c){var f=d;x(f)&&(f=!Rb(a,c));(f?Tb:Sb)(a,c);});},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null;},next:function(a){return a.nextElementSibling;},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[];},clone:Pb,triggerHandler:function(a,c,d){var e,f,g=c.type||c,k=sb(a);if(k=(k=k&&k.events)&&k[g]){e={preventDefault:function(){this.defaultPrevented=!0;},isDefaultPrevented:function(){return !0===this.defaultPrevented;},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0;},isImmediatePropagationStopped:function(){return !0===this.immediatePropagationStopped;},stopPropagation:y,type:g,target:a},c.type&&(e=F(e,c)),c=qa(k),f=d?[e].concat(d):[e],s(c,function(c){e.isImmediatePropagationStopped()||c.apply(a,f);});}}},function(a,c){Q.prototype[c]=function(c,e,f){for(var g,k=0,h=this.length;k<h;k++){x(g)?(g=a(this[k],c,e,f),z(g)&&(g=v(g))):Ec(g,a(this[k],c,e,f));}return z(g)?g:this;};Q.prototype.bind=Q.prototype.on;Q.prototype.unbind=Q.prototype.off;});ab.prototype={put:function(a,c){this[Ma(a,this.nextUid)]=c;},get:function(a){return this[Ma(a,this.nextUid)];},remove:function(a){var c=this[a=Ma(a,this.nextUid)];delete this[a];return c;}};var Nc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,kf=/,/,lf=/^\s*(_?)(\S+?)\1\s*$/,Mc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ea=w("$injector");Jb.$$annotate=Ub;var Kf=w("$animate"),Ae=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0)){throw Kf("notcsel",c);}this.$$selectors[c.substr(1)]=e;a.factory(e,d);};this.classNameFilter=function(a){1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter;};this.$get=["$$q","$$asyncCallback","$rootScope",function(a,d,e){function f(d){var f,g=a.defer();g.promise.$$cancelFn=function(){f&&f();};e.$$postDigest(function(){f=d(function(){g.resolve();});});return g.promise;}function g(a,c){var d=[],e=[],f=wa();s((a.attr("class")||"").split(/\s+/),function(a){f[a]=!0;});s(c,function(a,c){var g=f[c];!1===a&&g?e.push(c):!0!==a||g||d.push(c);});return 0<d.length+e.length&&[d.length?d:null,e.length?e:null];}function k(a,c,d){for(var e=0,f=c.length;e<f;++e){a[c[e]]=d;}}function h(){m||(m=a.defer(),d(function(){m.resolve();m=null;}));return m.promise;}function l(a,c){if(ta.isObject(c)){var d=F(c.from||{},c.to||{});a.css(d);}}var m;return{animate:function(a,c,d){l(a,{from:c,to:d});return h();},enter:function(a,c,d,e){l(a,e);d?d.after(a):c.prepend(a);return h();},leave:function(a,c){a.remove();return h();},move:function(a,c,d,e){return this.enter(a,c,d,e);},addClass:function(a,c,d){return this.setClass(a,c,[],d);},$$addClassImmediately:function(a,c,d){a=v(a);c=J(c)?c:H(c)?c.join(" "):"";s(a,function(a){Tb(a,c);});l(a,d);return h();},removeClass:function(a,c,d){return this.setClass(a,[],c,d);},$$removeClassImmediately:function(a,c,d){a=v(a);c=J(c)?c:H(c)?c.join(" "):"";s(a,function(a){Sb(a,c);});l(a,d);return h();},setClass:function(a,c,d,e){var h=this,l=!1;a=v(a);var m=a.data("$$animateClasses");m?e&&m.options&&(m.options=ta.extend(m.options||{},e)):(m={classes:{},options:e},l=!0);e=m.classes;c=H(c)?c:c.split(" ");d=H(d)?d:d.split(" ");k(e,c,!0);k(e,d,!1);l&&(m.promise=f(function(c){var d=a.data("$$animateClasses");a.removeData("$$animateClasses");if(d){var e=g(a,d.classes);e&&h.$$setClassImmediately(a,e[0],e[1],d.options);}c();}),a.data("$$animateClasses",m));return m.promise;},$$setClassImmediately:function(a,c,d,e){c&&this.$$addClassImmediately(a,c);d&&this.$$removeClassImmediately(a,d);l(a,e);return h();},enabled:y,cancel:y};}];}],ia=w("$compile");uc.$inject=["$provide","$$sanitizeUriProvider"];var of=/^((?:x|data)[\:\-_])/i,Sc="application/json",Xb={"Content-Type":Sc+";charset=utf-8"},rf=/^\s*(\[|\{[^\{])/,sf=/[\}\]]\s*$/,qf=/^\)\]\}',?\n/,Yb=w("$interpolate"),Lf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,vf={http:80,https:443,ftp:21},bb=w("$location"),Mf={$$html5:!1,$$replace:!1,absUrl:zb("$$absUrl"),url:function(a){if(x(a)){return this.$$url;}a=Lf.exec(a);a[1]&&this.path(decodeURIComponent(a[1]));(a[2]||a[1])&&this.search(a[3]||"");this.hash(a[5]||"");return this;},protocol:zb("$$protocol"),host:zb("$$host"),port:zb("$$port"),path:$c("$$path",function(a){a=null!==a?a.toString():"";return"/"==a.charAt(0)?a:"/"+a;}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(J(a)||X(a)){a=a.toString(),this.$$search=qc(a);}else{if(P(a)){a=Ca(a,{}),s(a,function(c,e){null==c&&delete a[e];}),this.$$search=a;}else{throw bb("isrcharg");}}break;default:x(c)||null===c?delete this.$$search[a]:this.$$search[a]=c;}this.$$compose();return this;},hash:$c("$$hash",function(a){return null!==a?a.toString():"";}),replace:function(){this.$$replace=!0;return this;}};s([Zc,bc,ac],function(a){a.prototype=Object.create(Mf);a.prototype.state=function(c){if(!arguments.length){return this.$$state;}if(a!==ac||!this.$$html5){throw bb("nostate");}this.$$state=x(c)?null:c;return this;};});var oa=w("$parse"),Nf=Function.prototype.call,Of=Function.prototype.apply,Pf=Function.prototype.bind,Gb=wa();s({"null":function(){return null;},"true":function(){return !0;},"false":function(){return !1;},undefined:function(){}},function(a,c){a.constant=a.literal=a.sharedGetter=!0;Gb[c]=a;});Gb["this"]=function(a){return a;};Gb["this"].sharedGetter=!0;var hc=F(wa(),{"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return z(d)?z(e)?d+e:d:z(e)?e:t;},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(z(d)?d:0)-(z(e)?e:0);},"*":function(a,c,d,e){return d(a,c)*e(a,c);},"/":function(a,c,d,e){return d(a,c)/e(a,c);},"%":function(a,c,d,e){return d(a,c)%e(a,c);},"===":function(a,c,d,e){return d(a,c)===e(a,c);},"!==":function(a,c,d,e){return d(a,c)!==e(a,c);},"==":function(a,c,d,e){return d(a,c)==e(a,c);},"!=":function(a,c,d,e){return d(a,c)!=e(a,c);},"<":function(a,c,d,e){return d(a,c)<e(a,c);},">":function(a,c,d,e){return d(a,c)>e(a,c);},"<=":function(a,c,d,e){return d(a,c)<=e(a,c);},">=":function(a,c,d,e){return d(a,c)>=e(a,c);},"&&":function(a,c,d,e){return d(a,c)&&e(a,c);},"||":function(a,c,d,e){return d(a,c)||e(a,c);},"!":function(a,c,d){return !d(a,c);},"=":!0,"|":!0}),Qf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},ec=function(a){this.options=a;};ec.prototype={constructor:ec,lex:function(a){this.text=a;this.index=0;this.ch=t;for(this.tokens=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'")){this.readString(this.ch);}else{if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek())){this.readNumber();}else{if(this.isIdent(this.ch)){this.readIdent();}else{if(this.is("(){}[].,;:?")){this.tokens.push({index:this.index,text:this.ch}),this.index++;}else{if(this.isWhitespace(this.ch)){this.index++;}else{a=this.ch+this.peek();var c=a+this.peek(2),d=hc[this.ch],e=hc[a],f=hc[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1);}}}}}}return this.tokens;},is:function(a){return -1!==a.indexOf(this.ch);},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1;},isNumber:function(a){return"0"<=a&&"9">=a;},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a;},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a;},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a);},throwError:function(a,c,d){d=d||this.index;c=z(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw oa("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=S(this.text.charAt(this.index));if("."==d||this.isNumber(d)){a+=d;}else{var e=this.peek();if("e"==d&&this.isExpOperator(e)){a+=d;}else{if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1)){a+=d;}else{if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1)){break;}else{this.throwError("Invalid exponent");}}}}this.index++;}a*=1;this.tokens.push({index:c,text:a,constant:!0,fn:function(){return a;}});},readIdent:function(){for(var a=this.text,c="",d=this.index,e,f,g,k;this.index<this.text.length;){k=this.text.charAt(this.index);if("."===k||this.isIdent(k)||this.isNumber(k)){"."===k&&(e=this.index),c+=k;}else{break;}this.index++;}e&&"."===c[c.length-1]&&(this.index--,c=c.slice(0,-1),e=c.lastIndexOf("."),-1===e&&(e=t));if(e){for(f=this.index;f<this.text.length;){k=this.text.charAt(f);if("("===k){g=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break;}if(this.isWhitespace(k)){f++;}else{break;}}}this.tokens.push({index:d,text:c,fn:Gb[c]||bd(c,this.options,a)});g&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:g}));},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var g=this.text.charAt(this.index),e=e+g;if(f){"u"===g?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=Qf[g]||g,f=!1;}else{if("\\"===g){f=!0;}else{if(g===a){this.index++;this.tokens.push({index:c,text:e,string:d,constant:!0,fn:function(){return d;}});return;}d+=g;}}this.index++;}this.throwError("Unterminated quote",c);}};var cb=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d;};cb.ZERO=F(function(){return 0;},{sharedGetter:!0,constant:!0});cb.prototype={constructor:cb,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a;},primary:function(){var a;if(this.expect("(")){a=this.filterChain(),this.consume(")");}else{if(this.expect("[")){a=this.arrayDeclaration();}else{if(this.expect("{")){a=this.object();}else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);c.constant&&(a.constant=!0,a.literal=!0);}}}for(var d;c=this.expect("(","[",".");){"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");}return a;},throwError:function(a,c){throw oa("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length){throw oa("ueoe",this.text);}return this.tokens[0];},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],g=f.text;if(g===a||g===c||g===d||g===e||!(a||c||d||e)){return f;}}return !1;},expect:function(a,c,d,e){return(a=this.peek(a,c,d,e))?(this.tokens.shift(),a):!1;},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek());},unaryFn:function(a,c){return F(function(d,e){return a(d,e,c);},{constant:c.constant,inputs:[c]});},binaryFn:function(a,c,d,e){return F(function(e,g){return c(e,g,a,d);},{constant:a.constant&&d.constant,inputs:!e&&[a,d]});},statements:function(){for(var a=[];;){if(0<this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";")){return 1===a.length?a[0]:function(c,d){for(var e,f=0,g=a.length;f<g;f++){e=a[f](c,d);}return e;};}}},filterChain:function(){for(var a=this.expression();this.expect("|");){a=this.filter(a);}return a;},filter:function(a){var c=this.expect(),d=this.$filter(c.text),e,f;if(this.peek(":")){for(e=[],f=[];this.expect(":");){e.push(this.expression());}}c=[a].concat(e||[]);return F(function(c,k){var h=a(c,k);if(f){f[0]=h;for(h=e.length;h--;){f[h+1]=e[h](c,k);}return d.apply(t,f);}return d(h);},{constant:!d.$stateful&&c.every(cc),inputs:!d.$stateful&&c});},expression:function(){return this.assignment();},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),F(function(d,f){return a.assign(d,c(d,f),f);},{inputs:[a,c]})):a;},ternary:function(){var a=this.logicalOR(),c,d;if(d=this.expect("?")){c=this.assignment();if(d=this.expect(":")){var e=this.assignment();return F(function(d,g){return a(d,g)?c(d,g):e(d,g);},{constant:a.constant&&c.constant&&e.constant});}this.throwError("expected :",d);}return a;},logicalOR:function(){for(var a=this.logicalAND(),c;c=this.expect("||");){a=this.binaryFn(a,c.fn,this.logicalAND(),!0);}return a;},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&")){a=this.binaryFn(a,c.fn,this.logicalAND(),!0);}return a;},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!==")){a=this.binaryFn(a,c.fn,this.equality());}return a;},relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">=")){a=this.binaryFn(a,c.fn,this.relational());}return a;},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");){a=this.binaryFn(a,c.fn,this.multiplicative());}return a;},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");){a=this.binaryFn(a,c.fn,this.unary());}return a;},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(cb.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary();},fieldAccess:function(a){var c=this.text,d=this.expect().text,e=bd(d,this.options,c);return F(function(c,d,k){return e(k||a(c,d));},{assign:function(e,g,k){(k=a(e,k))||a.assign(e,k={});return Oa(k,d,g,c);}});},objectIndex:function(a){var c=this.text,d=this.expression();this.consume("]");return F(function(e,f){var g=a(e,f),k=d(e,f);na(k,c);return g?Aa(g[k],c):t;},{assign:function(e,f,g){var k=na(d(e,g),c);(g=Aa(a(e,g),c))||a.assign(e,g={});return g[k]=f;}});},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do{d.push(this.expression());}while(this.expect(","));}this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,k){var h=c?c(g,k):g,l=a(g,k,h)||y;if(f){for(var m=d.length;m--;){f[m]=Aa(d[m](g,k),e);}}Aa(h,e);if(l){if(l.constructor===l){throw oa("isecfn",e);}if(l===Nf||l===Of||l===Pf){throw oa("isecff",e);}}h=l.apply?l.apply(h,f):l(f[0],f[1],f[2],f[3],f[4]);return Aa(h,e);};},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text){do{if(this.peek("]")){break;}var c=this.expression();a.push(c);}while(this.expect(","));}this.consume("]");return F(function(c,e){for(var f=[],g=0,k=a.length;g<k;g++){f.push(a[g](c,e));}return f;},{literal:!0,constant:a.every(cc),inputs:a});},object:function(){var a=[],c=[];if("}"!==this.peekToken().text){do{if(this.peek("}")){break;}var d=this.expect();a.push(d.string||d.text);this.consume(":");d=this.expression();c.push(d);}while(this.expect(","));}this.consume("}");return F(function(d,f){for(var g={},k=0,h=c.length;k<h;k++){g[a[k]]=c[k](d,f);}return g;},{literal:!0,constant:c.every(cc),inputs:c});}};var cd=wa(),wf=Object.prototype.valueOf,Ba=w("$sce"),ja={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},ia=w("$compile"),Z=U.createElement("a"),gd=za(N.location.href,!0);Bc.$inject=["$provide"];hd.$inject=["$locale"];jd.$inject=["$locale"];var md=".",Ff={yyyy:$("FullYear",4),yy:$("FullYear",2,0,!0),y:$("FullYear",1),MMMM:Bb("Month"),MMM:Bb("Month",!0),MM:$("Month",2,1),M:$("Month",1,1),dd:$("Date",2),d:$("Date",1),HH:$("Hours",2),H:$("Hours",1),hh:$("Hours",2,-12),h:$("Hours",1,-12),mm:$("Minutes",2),m:$("Minutes",1),ss:$("Seconds",2),s:$("Seconds",1),sss:$("Milliseconds",3),EEEE:Bb("Day"),EEE:Bb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1];},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Ab(Math[0<a?"floor":"ceil"](a/60),2)+Ab(Math.abs(a%60),2));},ww:od(2),w:od(1)},Ef=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,Df=/^\-?\d+$/;id.$inject=["$locale"];var Bf=da(S),Cf=da(ob);kd.$inject=["$parse"];var Rd=da({restrict:"E",compile:function(a,c){if(!c.href&&!c.xlinkHref&&!c.name){return function(a,c){var f="[object SVGAnimatedString]"===Ja.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault();});};}}}),pb={};s(vb,function(a,c){if("multiple"!=a){var d=ua("ng-"+c);pb[d]=function(){return{restrict:"A",priority:100,link:function(a,f,g){a.$watch(g[d],function(a){g.$set(c,!!a);});}};};}});s(Lc,function(a,c){pb[c]=function(){return{priority:100,link:function(a,e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(Hf))){f.$set("ngPattern",new RegExp(e[1],e[2]));return;}a.$watch(f[c],function(a){f.$set(c,a);});}};};});s(["src","srcset","href"],function(a){var c=ua("ng-"+a);pb[c]=function(){return{priority:99,link:function(d,e,f){var g=a,k=a;"href"===a&&"[object SVGAnimatedString]"===Ja.call(e.prop("href"))&&(k="xlinkHref",f.$attr[k]="xlink:href",g=null);f.$observe(c,function(c){c?(f.$set(k,c),Ha&&g&&e.prop(g,f[k])):"href"===a&&f.$set(k,null);});}};};});var Cb={$addControl:y,$$renameControl:function(a,c){a.$name=c;},$removeControl:y,$setValidity:y,$setDirty:y,$setPristine:y,$setSubmitted:y};pd.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var wd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:pd,compile:function(a){a.addClass(Pa).addClass(fb);return{pre:function(a,d,g,k){if(!("action" in g)){var h=function(c){a.$apply(function(){k.$commitViewValue();k.$setSubmitted();});c.preventDefault?c.preventDefault():c.returnValue=!1;};d[0].addEventListener("submit",h,!1);d.on("$destroy",function(){c(function(){d[0].removeEventListener("submit",h,!1);},0,!1);});}var l=k.$$parentForm,m=k.$name;m&&(Oa(a,m,k,m),g.$observe(g.name?"name":"ngForm",function(c){m!==c&&(Oa(a,m,t,m),m=c,Oa(a,m,k,m),l.$$renameControl(k,m));}));d.on("$destroy",function(){l.$removeControl(k);m&&Oa(a,m,t,m);F(k,Cb);});}};}};}];},Sd=wd(),ee=wd(!0),Gf=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Rf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Sf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Tf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,xd=/^(\d{4})-(\d{2})-(\d{2})$/,yd=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ic=/^(\d{4})-W(\d\d)$/,zd=/^(\d{4})-(\d\d)$/,Ad=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Uf=/(\s+|^)default(\s+|$)/,Fb=new w("ngModel"),Bd={text:function(a,c,d,e,f,g){db(a,c,d,e,f,g);fc(e);},date:eb("date",xd,Eb(xd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":eb("datetimelocal",yd,Eb(yd,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:eb("time",Ad,Eb(Ad,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:eb("week",ic,function(a,c){if(ea(a)){return a;}if(J(a)){ic.lastIndex=0;var d=ic.exec(a);if(d){var e=+d[1],f=+d[2],g=d=0,k=0,h=0,l=nd(e),f=7*(f-1);c&&(d=c.getHours(),g=c.getMinutes(),k=c.getSeconds(),h=c.getMilliseconds());return new Date(e,0,l.getDate()+f,d,g,k,h);}}return NaN;},"yyyy-Www"),month:eb("month",zd,Eb(zd,["yyyy","MM"]),"yyyy-MM"),number:function(a,c,d,e,f,g){rd(a,c,d,e);db(a,c,d,e,f,g);e.$$parserName="number";e.$parsers.push(function(a){return e.$isEmpty(a)?null:Tf.test(a)?parseFloat(a):t;});e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!X(a)){throw Fb("numfmt",a);}a=a.toString();}return a;});if(d.min||d.ngMin){var k;e.$validators.min=function(a){return e.$isEmpty(a)||x(k)||a>=k;};d.$observe("min",function(a){z(a)&&!X(a)&&(a=parseFloat(a,10));k=X(a)&&!isNaN(a)?a:t;e.$validate();});}if(d.max||d.ngMax){var h;e.$validators.max=function(a){return e.$isEmpty(a)||x(h)||a<=h;};d.$observe("max",function(a){z(a)&&!X(a)&&(a=parseFloat(a,10));h=X(a)&&!isNaN(a)?a:t;e.$validate();});}},url:function(a,c,d,e,f,g){db(a,c,d,e,f,g);fc(e);e.$$parserName="url";e.$validators.url=function(a){return e.$isEmpty(a)||Rf.test(a);};},email:function(a,c,d,e,f,g){db(a,c,d,e,f,g);fc(e);e.$$parserName="email";e.$validators.email=function(a){return e.$isEmpty(a)||Sf.test(a);};},radio:function(a,c,d,e){x(d.name)&&c.attr("name",++gb);c.on("click",function(a){c[0].checked&&e.$setViewValue(d.value,a&&a.type);});e.$render=function(){c[0].checked=d.value==e.$viewValue;};d.$observe("value",e.$render);},checkbox:function(a,c,d,e,f,g,k,h){var l=sd(h,a,"ngTrueValue",d.ngTrueValue,!0),m=sd(h,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(a){e.$setViewValue(c[0].checked,a&&a.type);});e.$render=function(){c[0].checked=e.$viewValue;};e.$isEmpty=function(a){return a!==l;};e.$formatters.push(function(a){return la(a,l);});e.$parsers.push(function(a){return a?l:m;});},hidden:y,button:y,submit:y,reset:y,file:y},vc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:{pre:function(f,g,k,h){h[0]&&(Bd[S(k.type)]||Bd.text)(f,g,k,h[0],c,a,d,e);}}};}],fb="ng-valid",td="ng-invalid",Pa="ng-pristine",Db="ng-dirty",vd="ng-pending",Vf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,c,d,e,f,g,k,h,l,m){this.$modelValue=this.$viewValue=Number.NaN;this.$validators={};this.$asyncValidators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$error={};this.$$success={};this.$pending=t;this.$name=m(d.name||"",!1)(a);var p=f(d.ngModel),q=null,n=this,r=function(){var c=p(a);n.$options&&n.$options.getterSetter&&A(c)&&(c=c());return c;},O=function(c){var d;n.$options&&n.$options.getterSetter&&A(d=p(a))?d(n.$modelValue):p.assign(a,n.$modelValue);};this.$$setOptions=function(a){n.$options=a;if(!(p.assign||a&&a.getterSetter)){throw Fb("nonassign",d.ngModel,sa(e));}};this.$render=y;this.$isEmpty=function(a){return x(a)||""===a||null===a||a!==a;};var B=e.inheritedData("$formController")||Cb,C=0;qd({ctrl:this,$element:e,set:function(a,c){a[c]=!0;},unset:function(a,c){delete a[c];},parentForm:B,$animate:g});this.$setPristine=function(){n.$dirty=!1;n.$pristine=!0;g.removeClass(e,Db);g.addClass(e,Pa);};this.$setUntouched=function(){n.$touched=!1;n.$untouched=!0;g.setClass(e,"ng-untouched","ng-touched");};this.$setTouched=function(){n.$touched=!0;n.$untouched=!1;g.setClass(e,"ng-touched","ng-untouched");};this.$rollbackViewValue=function(){k.cancel(q);n.$viewValue=n.$$lastCommittedViewValue;n.$render();};this.$validate=function(){X(n.$modelValue)&&isNaN(n.$modelValue)||this.$$parseAndValidate();};this.$$runValidators=function(a,c,d,e){function f(){var a=!0;s(n.$validators,function(e,f){var g=e(c,d);a=a&&g;h(f,g);});return a?!0:(s(n.$asyncValidators,function(a,c){h(c,null);}),!1);}function g(){var a=[],e=!0;s(n.$asyncValidators,function(f,g){var k=f(c,d);if(!k||!A(k.then)){throw Fb("$asyncValidators",k);}h(g,t);a.push(k.then(function(){h(g,!0);},function(a){e=!1;h(g,!1);}));});a.length?l.all(a).then(function(){k(e);},y):k(!0);}function h(a,c){m===C&&n.$setValidity(a,c);}function k(a){m===C&&e(a);}C++;var m=C;(function(a){var c=n.$$parserName||"parse";if(a===t){h(c,null);}else{if(h(c,a),!a){return s(n.$validators,function(a,c){h(c,null);}),s(n.$asyncValidators,function(a,c){h(c,null);}),!1;}}return !0;})(a)?f()?g():k(!1):k(!1);};this.$commitViewValue=function(){var a=n.$viewValue;k.cancel(q);if(n.$$lastCommittedViewValue!==a||""===a&&n.$$hasNativeValidators){n.$$lastCommittedViewValue=a,n.$pristine&&(n.$dirty=!0,n.$pristine=!1,g.removeClass(e,Pa),g.addClass(e,Db),B.$setDirty()),this.$$parseAndValidate();}};this.$$parseAndValidate=function(){var a=n.$$lastCommittedViewValue,c=a,d=x(c)?t:!0;if(d){for(var e=0;e<n.$parsers.length;e++){if(c=n.$parsers[e](c),x(c)){d=!1;break;}}}X(n.$modelValue)&&isNaN(n.$modelValue)&&(n.$modelValue=r());var f=n.$modelValue,g=n.$options&&n.$options.allowInvalid;g&&(n.$modelValue=c,n.$modelValue!==f&&n.$$writeModelToScope());n.$$runValidators(d,c,a,function(a){g||(n.$modelValue=a?c:t,n.$modelValue!==f&&n.$$writeModelToScope());});};this.$$writeModelToScope=function(){O(n.$modelValue);s(n.$viewChangeListeners,function(a){try{a();}catch(d){c(d);}});};this.$setViewValue=function(a,c){n.$viewValue=a;n.$options&&!n.$options.updateOnDefault||n.$$debounceViewValueCommit(c);};this.$$debounceViewValueCommit=function(c){var d=0,e=n.$options;e&&z(e.debounce)&&(e=e.debounce,X(e)?d=e:X(e[c])?d=e[c]:X(e["default"])&&(d=e["default"]));k.cancel(q);d?q=k(function(){n.$commitViewValue();},d):h.$$phase?n.$commitViewValue():a.$apply(function(){n.$commitViewValue();});};a.$watch(function(){var a=r();if(a!==n.$modelValue){n.$modelValue=a;for(var c=n.$formatters,d=c.length,e=a;d--;){e=c[d](e);}n.$viewValue!==e&&(n.$viewValue=n.$$lastCommittedViewValue=e,n.$render(),n.$$runValidators(t,a,e,y));}return a;});}],te=function(){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Vf,priority:1,compile:function(a){a.addClass(Pa).addClass("ng-untouched").addClass(fb);return{pre:function(a,d,e,f){var g=f[0],k=f[1]||Cb;g.$$setOptions(f[2]&&f[2].$options);k.$addControl(g);e.$observe("name",function(a){g.$name!==a&&k.$$renameControl(g,a);});a.$on("$destroy",function(){k.$removeControl(g);});},post:function(a,d,e,f){var g=f[0];if(g.$options&&g.$options.updateOn){d.on(g.$options.updateOn,function(a){g.$$debounceViewValueCommit(a&&a.type);});}d.on("blur",function(d){g.$touched||a.$apply(function(){g.$setTouched();});});}};}};},ve=da({restrict:"A",require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange);});}}),xc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a){return !d.required||!e.$isEmpty(a);},d.$observe("required",function(){e.$validate();}));}};},wc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){J(a)&&0<a.length&&(a=new RegExp(a));if(a&&!a.test){throw w("ngPattern")("noregexp",g,a,sa(c));}f=a||t;e.$validate();});e.$validators.pattern=function(a){return e.$isEmpty(a)||x(f)||f.test(a);};}}};},zc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("maxlength",function(a){f=aa(a)||0;e.$validate();});e.$validators.maxlength=function(a,c){return e.$isEmpty(a)||c.length<=f;};}}};},yc=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",function(a){f=aa(a)||0;e.$validate();});e.$validators.minlength=function(a,c){return e.$isEmpty(a)||c.length>=f;};}}};},ue=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",g="false"!==d.ngTrim,k=g?T(f):f;e.$parsers.push(function(a){if(!x(a)){var c=[];a&&s(a.split(k),function(a){a&&c.push(g?T(a):a);});return c;}});e.$formatters.push(function(a){return H(a)?a.join(f):t;});e.$isEmpty=function(a){return !a||!a.length;};}};},Wf=/^(true|false|\d+)$/,we=function(){return{restrict:"A",priority:100,compile:function(a,c){return Wf.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue));}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a);});};}};},xe=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions);this.$options.updateOn!==t?(this.$options.updateOnDefault=!1,this.$options.updateOn=T(this.$options.updateOn.replace(Uf,function(){d.$options.updateOnDefault=!0;return" ";}))):this.$options.updateOnDefault=!0;}]};},Xd=["$compile",function(a){return{restrict:"AC",compile:function(c){a.$$addBindingClass(c);return function(c,e,f){a.$$addBindingInfo(e,f.ngBind);e=e[0];c.$watch(f.ngBind,function(a){e.textContent=a===t?"":a;});};}};}],Zd=["$interpolate","$compile",function(a,c){return{compile:function(d){c.$$addBindingClass(d);return function(d,f,g){d=a(f.attr(g.$attr.ngBindTemplate));c.$$addBindingInfo(f,d.expressions);f=f[0];g.$observe("ngBindTemplate",function(a){f.textContent=a===t?"":a;});};}};}],Yd=["$sce","$parse","$compile",function(a,c,d){return{restrict:"A",compile:function(e,f){var g=c(f.ngBindHtml),k=c(f.ngBindHtml,function(a){return(a||"").toString();});d.$$addBindingClass(e);return function(c,e,f){d.$$addBindingInfo(e,f.ngBindHtml);c.$watch(k,function(){e.html(a.getTrustedHtml(g(c))||"");});};}};}],$d=gc("",!0),be=gc("Odd",0),ae=gc("Even",1),ce=Ia({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak");}}),de=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500};}],Ac={},Xf={blur:!0,focus:!0};s("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=ua("ng-"+a);Ac[c]=["$parse","$rootScope",function(d,e){return{restrict:"A",compile:function(f,g){var k=d(g[c]);return function(c,d){d.on(a,function(d){var f=function(){k(c,{$event:d});};Xf[a]&&e.$$phase?c.$evalAsync(f):c.$apply(f);});};}};}];});var ge=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var k,h,l;c.$watch(e.ngIf,function(c){c?h||g(function(c,f){h=f;c[c.length++]=U.createComment(" end ngIf: "+e.ngIf+" ");k={clone:c};a.enter(c,d.parent(),d);}):(l&&(l.remove(),l=null),h&&(h.$destroy(),h=null),k&&(l=nb(k.clone),a.leave(l).then(function(){l=null;}),k=null));});}};}],he=["$templateRequest","$anchorScroll","$animate","$sce",function(a,c,d,e){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:ta.noop,compile:function(f,g){var k=g.ngInclude||g.src,h=g.onload||"",l=g.autoscroll;return function(f,g,q,n,r){var s=0,t,C,D,G=function(){C&&(C.remove(),C=null);t&&(t.$destroy(),t=null);D&&(d.leave(D).then(function(){C=null;}),C=D,D=null);};f.$watch(e.parseAsResourceUrl(k),function(e){var k=function(){!z(l)||l&&!f.$eval(l)||c();},q=++s;e?(a(e,!0).then(function(a){if(q===s){var c=f.$new();n.template=a;a=r(c,function(a){G();d.enter(a,null,g).then(k);});t=c;D=a;t.$emit("$includeContentLoaded",e);f.$eval(h);}},function(){q===s&&(G(),f.$emit("$includeContentError",e));}),f.$emit("$includeContentRequested",e)):(G(),n.template=null);});};}};}],ye=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){/SVG/.test(d[0].toString())?(d.empty(),a(Dc(f.template,U).childNodes)(c,function(a){d.append(a);},t,t,d)):(d.html(f.template),a(d.contents())(c));}};}],ie=Ia({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit);}};}}),je=Ia({terminal:!0,priority:1000}),ke=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,g){var k=g.count,h=g.$attr.when&&f.attr(g.$attr.when),l=g.offset||0,m=e.$eval(h)||{},p={},q=c.startSymbol(),n=c.endSymbol(),r=/^when(Minus)?(.+)$/;s(g,function(a,c){r.test(c)&&(m[S(c.replace("when","").replace("Minus","-"))]=f.attr(g.$attr[c]));});s(m,function(a,e){p[e]=c(a.replace(d,q+k+"-"+l+n));});e.$watch(function(){var c=parseFloat(e.$eval(k));if(isNaN(c)){return"";}c in m||(c=a.pluralCat(c-l));return p[c](e);},function(a){f.text(a);});}};}],le=["$parse","$animate",function(a,c){var d=w("ngRepeat"),e=function(a,c,d,e,l,m,p){a[d]=e;l&&(a[l]=m);a.$index=c;a.$first=0===c;a.$last=c===p-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1));};return{restrict:"A",multiElement:!0,transclude:"element",priority:1000,terminal:!0,$$tlb:!0,compile:function(f,g){var k=g.ngRepeat,h=U.createComment(" end ngRepeat: "+k+" "),l=k.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!l){throw d("iexp",k);}var m=l[1],p=l[2],q=l[3],n=l[4],l=m.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!l){throw d("iidexp",m);}var r=l[3]||l[1],z=l[2];if(q&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(q)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(q))){throw d("badident",q);}var w,C,D,G,u={$id:Ma};n?w=a(n):(D=function(a,c){return Ma(c);},G=function(a){return a;});return function(a,f,g,l,m){w&&(C=function(c,d,e){z&&(u[z]=c);u[r]=d;u.$index=e;return w(a,u);});var n=wa();a.$watchCollection(p,function(g){var l,p,E=f[0],u,w=wa(),B,y,F,x,H,A,J;q&&(a[q]=g);if(Qa(g)){H=g,p=C||D;}else{p=C||G;H=[];for(J in g){g.hasOwnProperty(J)&&"$"!=J.charAt(0)&&H.push(J);}H.sort();}B=H.length;J=Array(B);for(l=0;l<B;l++){if(y=g===H?l:H[l],F=g[y],x=p(y,F,l),n[x]){A=n[x],delete n[x],w[x]=A,J[l]=A;}else{if(w[x]){throw s(J,function(a){a&&a.scope&&(n[a.id]=a);}),d("dupes",k,x,ra(F));}J[l]={id:x,scope:t,clone:t};w[x]=!0;}}for(u in n){A=n[u];x=nb(A.clone);c.leave(x);if(x[0].parentNode){for(l=0,p=x.length;l<p;l++){x[l].$$NG_REMOVED=!0;}}A.scope.$destroy();}for(l=0;l<B;l++){if(y=g===H?l:H[l],F=g[y],A=J[l],A.scope){u=E;do{u=u.nextSibling;}while(u&&u.$$NG_REMOVED);A.clone[0]!=u&&c.move(nb(A.clone),null,v(E));E=A.clone[A.clone.length-1];e(A.scope,l,r,F,z,y,B);}else{m(function(a,d){A.scope=d;var f=h.cloneNode(!1);a[a.length++]=f;c.enter(a,null,v(E));E=f;A.clone=a;w[A.id]=A;e(A.scope,l,r,F,z,y,B);});}}n=w;});};}};}],me=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"});});}};}],fe=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide",{tempClasses:"ng-hide-animate"});});}};}],ne=Ia(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&s(d,function(a,d){c.css(d,"");});a&&c.css(a);},!0);}),oe=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={};}],link:function(c,d,e,f){var g=[],k=[],h=[],l=[],m=function(a,c){return function(){a.splice(c,1);};};c.$watch(e.ngSwitch||e.on,function(c){var d,e;d=0;for(e=h.length;d<e;++d){a.cancel(h[d]);}d=h.length=0;for(e=l.length;d<e;++d){var r=nb(k[d].clone);l[d].$destroy();(h[d]=a.leave(r)).then(m(h,d));}k.length=0;l.length=0;(g=f.cases["!"+c]||f.cases["?"])&&s(g,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=U.createComment(" end ngSwitchWhen: ");k.push({clone:d});a.enter(d,f.parent(),f);});});});}};}],pe=Ia({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,element:c});}}),qe=Ia({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c});}}),se=Ia({restrict:"EAC",link:function(a,c,d,e,f){if(!f){throw w("ngTransclude")("orphan",sa(c));}f(function(a){c.empty();c.append(a);});}}),Td=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text);}};}],Yf=w("ngOptions"),re=da({restrict:"A",terminal:!0}),Ud=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:y};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var h=this,l={},m=e,p;h.databound=d.ngModel;h.init=function(a,c,d){m=a;p=d;};h.addOption=function(c,d){La(c,'"option value"');l[c]=!0;m.$viewValue==c&&(a.val(c),p.parent()&&p.remove());d&&d[0].hasAttribute("selected")&&(d[0].selected=!0);};h.removeOption=function(a){this.hasOption(a)&&(delete l[a],m.$viewValue==a&&this.renderUnknownOption(a));};h.renderUnknownOption=function(c){c="? "+Ma(c)+" ?";p.val(c);a.prepend(p);a.val(c);p.prop("selected",!0);};h.hasOption=function(a){return l.hasOwnProperty(a);};c.$on("$destroy",function(){h.renderUnknownOption=y;});}],link:function(e,g,k,h){function l(a,c,d,e){d.$render=function(){var a=d.$viewValue;e.hasOption(a)?(u.parent()&&u.remove(),c.val(a),""===a&&A.prop("selected",!0)):x(a)&&A?c.val(""):e.renderUnknownOption(a);};c.on("change",function(){a.$apply(function(){u.parent()&&u.remove();d.$setViewValue(c.val());});});}function m(a,c,d){var e;d.$render=function(){var a=new ab(d.$viewValue);s(c.find("option"),function(c){c.selected=z(a.get(c.value));});};a.$watch(function(){la(e,d.$viewValue)||(e=qa(d.$viewValue),d.$render());});c.on("change",function(){a.$apply(function(){var a=[];s(c.find("option"),function(c){c.selected&&a.push(c.value);});d.$setViewValue(a);});});}function p(e,f,g){function h(a,c,d){S[y]=d;F&&(S[F]=c);return a(e,S);}function k(a){var c;if(n){if(I&&H(a)){c=new ab([]);for(var d=0;d<a.length;d++){c.put(h(I,null,a[d]),!0);}}else{c=new ab(a);}}else{I&&(a=h(I,null,a));}return function(d,e){var f;f=I?I:v?v:B;return n?z(c.remove(h(f,d,e))):a==h(f,d,e);};}function l(){C||(e.$$postDigest(p),C=!0);}function m(a,c,d){a[c]=a[c]||0;a[c]+=d?1:-1;}function p(){C=!1;var a={"":[]},c=[""],d,l,r,t,u;r=g.$viewValue;t=K(e)||[];var y=F?Object.keys(t).sort():t,v,x,H,B,R={};u=k(r);var N=!1,T,U;P={};for(B=0;H=y.length,B<H;B++){v=B;if(F&&(v=y[B],"$"===v.charAt(0))){continue;}x=t[v];d=h(J,v,x)||"";(l=a[d])||(l=a[d]=[],c.push(d));d=u(v,x);N=N||d;x=h(A,v,x);x=z(x)?x:"";U=I?I(e,S):F?y[B]:B;I&&(P[U]=v);l.push({id:U,label:x,selected:d});}n||(w||null===r?a[""].unshift({id:"",label:"",selected:!N}):N||a[""].unshift({id:"?",label:"",selected:!0}));v=0;for(y=c.length;v<y;v++){d=c[v];l=a[d];Q.length<=v?(r={element:G.clone().attr("label",d),label:l.label},t=[r],Q.push(t),f.append(r.element)):(t=Q[v],r=t[0],r.label!=d&&r.element.attr("label",r.label=d));N=null;B=0;for(H=l.length;B<H;B++){d=l[B],(u=t[B+1])?(N=u.element,u.label!==d.label&&(m(R,u.label,!1),m(R,d.label,!0),N.text(u.label=d.label)),u.id!==d.id&&N.val(u.id=d.id),N[0].selected!==d.selected&&(N.prop("selected",u.selected=d.selected),Ha&&N.prop("selected",u.selected))):(""===d.id&&w?T=w:(T=D.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).text(d.label),t.push(u={element:T,label:d.label,id:d.id,selected:d.selected}),m(R,d.label,!0),N?N.after(T):r.element.append(T),N=T);}for(B++;t.length>B;){d=t.pop(),m(R,d.label,!1),d.element.remove();}s(R,function(a,c){0<a?q.addOption(c):0>a&&q.removeOption(c);});}for(;Q.length>v;){Q.pop()[0].element.remove();}}var u;if(!(u=r.match(d))){throw Yf("iexp",r,sa(f));}var A=c(u[2]||u[1]),y=u[4]||u[6],x=/ as /.test(u[0])&&u[1],v=x?c(x):null,F=u[5],J=c(u[3]||""),B=c(u[2]?u[1]:y),K=c(u[7]),I=u[8]?c(u[8]):null,P={},Q=[[{element:f,label:""}]],S={};w&&(a(w)(e),w.removeClass("ng-scope"),w.remove());f.empty();f.on("change",function(){e.$apply(function(){var a=K(e)||[],c;if(n){c=[],s(f.val(),function(d){d=I?P[d]:d;c.push("?"===d?t:""===d?null:h(v?v:B,d,a[d]));});}else{var d=I?P[f.val()]:f.val();c="?"===d?t:""===d?null:h(v?v:B,d,a[d]);}g.$setViewValue(c);p();});});g.$render=p;e.$watchCollection(K,l);e.$watchCollection(function(){var a=K(e),c;if(a&&H(a)){c=Array(a.length);for(var d=0,f=a.length;d<f;d++){c[d]=h(A,d,a[d]);}}else{if(a){for(d in c={},a){a.hasOwnProperty(d)&&(c[d]=h(A,d,a[d]));}}}return c;},l);n&&e.$watchCollection(function(){return g.$modelValue;},l);}if(h[1]){var q=h[0];h=h[1];var n=k.multiple,r=k.ngOptions,w=!1,A,C=!1,D=v(U.createElement("option")),G=v(U.createElement("optgroup")),u=D.clone();k=0;for(var y=g.children(),F=y.length;k<F;k++){if(""===y[k].value){A=w=y.eq(k);break;}}q.init(h,w,u);n&&(h.$isEmpty=function(a){return !a||0===a.length;});r?p(e,g,h):n?m(e,g,h):l(e,g,h,q);}}};}],Wd=["$interpolate",function(a){var c={addOption:y,removeOption:y};return{restrict:"E",priority:100,compile:function(d,e){if(x(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text());}return function(a,d,e){var l=d.parent(),m=l.data("$selectController")||l.parent().data("$selectController");m&&m.databound||(m=c);f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&m.removeOption(c);m.addOption(a,d);}):m.addOption(e.value,d);d.on("$destroy",function(){m.removeOption(e.value);});};}};}],Vd=da({restrict:"E",terminal:!1});N.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(Ld(),Nd(ta),v(U).ready(function(){Hd(U,rc);}));})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>');"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){function d(a,b){return M(new (M(function(){},{prototype:a})),b);}function e(a){return L(arguments,function(b){b!==a&&L(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b);});}),a;}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d]){break;}c.push(a.path[d]);}return c;}function g(a){if(Object.keys){return Object.keys(a);}var c=[];return b.forEach(a,function(a,b){c.push(b);}),c;}function h(a,b){if(Array.prototype.indexOf){return a.indexOf(b,Number(arguments[2])||0);}var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++){if(d in a&&a[d]===b){return d;}}return -1;}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i){if(i[l].params&&(e=g(i[l].params),e.length)){for(var m in e){h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);}}}return M({},j,b);}function j(a,b,c){if(!c){c=[];for(var d in a){c.push(d);}}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f]){return !1;}}return !0;}function k(a,b){var c={};return L(a,function(a){c[a]=b[a];}),c;}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a){-1==h(c,d)&&(b[d]=a[d]);}return b;}function m(a,b){var c=K(a),d=c?[]:{};return L(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a);}),d;}function n(a,b){var c=K(a)?[]:{};return L(a,function(a,d){c[d]=b(a,d);}),c;}function o(a,b){var d=1,f=2,i={},j=[],k=i,m=M(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d){throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));}if(s[c]=d,I(a)){q.push(c,[function(){return b.get(a);}],j);}else{var e=b.annotate(a);L(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a);}),q.push(c,a,e);}r.pop(),s[c]=f;}}function o(a){return J(a)&&a.then&&a.$$promises;}if(!J(i)){throw new Error("'invocables' must be an object");}var p=g(i||{}),q=[],r=[],s={};return L(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t));}function i(a){r.$$failure=a,n.reject(a);}function j(c,e,f){function j(a){l.reject(a),i(a);}function k(){if(!G(r.$$failure)){try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h();},j);}catch(a){j(a);}}}var l=a.defer(),m=0;L(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k();},j));}),m||k(),s[c]=l.promise;}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!J(d)){throw new Error("'locals' must be an object");}}else{d=k;}if(f){if(!o(f)){throw new Error("'parent' must be a promise returned by $resolve.resolve()");}}else{f=m;}var n=a.defer(),r=n.promise,s=r.$$promises={},t=M({},d),u=1+q.length/3,v=!1;if(G(f.$$failure)){return i(f.$$failure),r;}f.$$inheritedValues&&e(t,l(f.$$inheritedValues,p)),M(s,f.$$promises),f.$$values?(v=e(t,l(f.$$values,p)),r.$$inheritedValues=l(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=l(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3){d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);}return r;};},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d);};}function p(a,b,c){this.fromConfig=function(a,b,c){return G(a.template)?this.fromString(a.template,b):G(a.templateUrl)?this.fromUrl(a.templateUrl,b):G(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null;},this.fromString=function(a,b){return H(a)?a(b):a;},this.fromUrl=function(c,d){return H(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data;});},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b});};}function q(a,b,e){function f(b,c,d,e){if(q.push(b),o[b]){return o[b];}if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b)){throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");}if(p[b]){throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");}return p[b]=new O.Param(b,c,d,e),p[b];}function g(a,b,c){var d=["",""],e=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b){return e;}switch(c){case !1:d=["(",")"];break;case !0:d=["?(",")?"];break;default:d=["("+c+"|",")?"];}return e+d[0]+b+d[1];}function h(c,e){var f,g,h,i,j;return f=c[2]||c[3],j=b.params[f],h=a.substring(m,c.index),g=e?c[4]:c[4]||("*"==c[1]?".*":null),i=O.type(g||"string")||d(O.type("string"),{pattern:new RegExp(g)}),{id:f,regexp:g,segment:h,type:i,cfg:j};}b=M({params:{}},J(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new O.ParamSet,q=[];this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));){s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash),n.push(r.segment),m=j.lastIndex;}t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0){for(m=0;i=k.exec(v);){r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex;}}}else{this.sourcePath=a,this.sourceSearch="";}l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q;}function r(a){M(this,a);}function s(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a;}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a;}function f(a){return this.pattern.test(a);}function i(){return{strict:t,caseInsensitive:p};}function j(a){return H(a)||K(a)&&H(a[a.length-1]);}function k(){for(;x.length;){var a=x.shift();if(a.pattern){throw new Error("You cannot override a type's .pattern at runtime.");}b.extend(v[a.name],o.invoke(a.def));}}function l(a){M(this,a||{});}O=this;var o,p=!1,t=!0,u=!1,v={},w=!0,x=[],y={string:{encode:a,decode:e,is:f,pattern:/[^/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10);},is:function(a){return G(a)&&this.decode(a.toString())===a;},pattern:/\d+/},bool:{encode:function(a){return a?1:0;},decode:function(a){return 0!==parseInt(a,10);},is:function(a){return a===!0||a===!1;},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c;},decode:function(a){if(this.is(a)){return a;}var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c;},is:function(a){return a instanceof Date&&!isNaN(a.valueOf());},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString();},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^/]*/},any:{encode:b.identity,decode:b.identity,is:b.identity,equals:b.equals,pattern:/.*/}};s.$$getDefaultValue=function(a){if(!j(a.value)){return a.value;}if(!o){throw new Error("Injectable functions cannot be called at configuration time");}return o.invoke(a.value);},this.caseInsensitive=function(a){return G(a)&&(p=a),p;},this.strictMode=function(a){return G(a)&&(t=a),t;},this.defaultSquashPolicy=function(a){if(!G(a)){return u;}if(a!==!0&&a!==!1&&!I(a)){throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");}return u=a,a;},this.compile=function(a,b){return new q(a,M(i(),b));},this.isMatcher=function(a){if(!J(a)){return !1;}var b=!0;return L(q.prototype,function(c,d){H(c)&&(b=b&&G(a[d])&&H(a[d]));}),b;},this.type=function(a,b,c){if(!G(b)){return v[a];}if(v.hasOwnProperty(a)){throw new Error("A type named '"+a+"' has already been defined.");}return v[a]=new r(M({name:a},b)),c&&(x.push({name:a,def:c}),w||k()),this;},L(y,function(a,b){v[b]=new r(M({name:b},a));}),v=d(v,{}),this.$get=["$injector",function(a){return o=a,w=!1,k(),L(y,function(a,b){v[b]||(v[b]=new r(a));}),this;}],this.Param=function(a,b,d,e){function f(a){var b=J(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=j(a.value)?a.value:function(){return a.value;},a;}function i(b,c,d){if(b.type&&c){throw new Error("Param '"+a+"' has two type configurations.");}return c?c:b.type?b.type instanceof r?b.type:new r(b.type):"config"===d?v.any:v.string;}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return M(b,c,d).array;}function l(a,b){var c=a.squash;if(!b||c===!1){return !1;}if(!G(c)||null==c){return u;}if(c===!0||I(c)){return c;}throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string");}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=K(a.replace)?a.replace:[],I(e)&&f.push({from:e,to:c}),g=n(f,function(a){return a.from;}),m(i,function(a){return -1===h(g,a.from);}).concat(f);}function q(){if(!o){throw new Error("Injectable functions cannot be called at configuration time");}return o.invoke(d.$$fn);}function s(a){function b(a){return function(b){return b.from===a;};}function c(a){var c=n(m(w.replace,b(a)),function(a){return a.to;});return c.length?c[0]:a;}return a=c(a),G(a)?w.type.decode(a):q();}function t(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}";}var w=this;d=f(d),b=i(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=l(d,y),A=p(d,x,y,z);M(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:s,dynamic:c,config:d,toString:t});},l.prototype={$$new:function(){return d(this,M(new l,{$$parent:this}));},$$keys:function(){for(var a=[],b=[],c=this,d=g(l.prototype);c;){b.push(c),c=c.$$parent;}return b.reverse(),L(b,function(b){L(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b);});}),a;},$$values:function(a){var b={},c=this;return L(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d]);}),b;},$$equals:function(a,b){var c=!0,d=this;return L(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1);}),c;},$$validates:function(a){var b,c,d,e=!0,f=this;return L(this.$$keys(),function(g){d=f[g],c=a[g],b=!c&&d.isOptional,e=e&&(b||!!d.type.is(c));}),e;},$$parent:c},this.ParamSet=l;}function t(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):"";}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)];});}function g(a,b,c){if(!c){return !1;}var d=a.invoke(b,b,{$match:c});return G(d)?d:!0;}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a;}function m(a){function b(a){var b=a(f,d);return b?(I(b)&&d.replace().url(b),!0):!1;}if(!a||!a.defaultPrevented){var e=o&&d.url()===o;if(o=c,e){return !0;}var g,h=j.length;for(g=0;h>g;g++){if(b(j[g])){return;}}k&&b(k);}}function n(){return i=i||e.$on("$locationChangeSuccess",m);}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m();},listen:function(){return n();},update:function(a){return a?void (q=d.url()):void (d.url()!==q&&(d.url(q),d.replace()));},push:function(a,b,e){d.url(a.format(b||{})),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace();},href:function(c,e,f){if(!c.validates(e)){return null;}var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),i=h(i,g,f.absolute),!f.absolute||!i){return i;}var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("");}};}var i,j=[],k=null,l=!1;this.rule=function(a){if(!H(a)){throw new Error("'rule' must be a function");}return j.push(a),this;},this.otherwise=function(a){if(I(a)){var b=a;a=function(){return b;};}else{if(!H(a)){throw new Error("'rule' must be a function");}}return k=a,this;},this.when=function(a,b){var c,h=I(b);if(I(a)&&(a=d.compile(a)),!h&&!H(b)&&!K(b)){throw new Error("invalid 'handler' in when()");}var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a);}]),M(function(c,d){return g(c,b,a.exec(d.path(),d.search()));},{prefix:I(a.prefix)?a.prefix:""});},regex:function(a,b){if(a.global||a.sticky){throw new Error("when() RegExp must not be global or sticky");}return h&&(c=b,b=["$match",function(a){return f(c,a);}]),M(function(c,d){return g(c,b,a.exec(d.path()));},{prefix:e(a)});}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j){if(j[k]){return this.rule(i[k](a,b));}}throw new Error("invalid 'what' in when()");},this.deferIntercept=function(a){a===c&&(a=!0),l=a;},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"];}function u(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^");}function l(a,b){if(!a){return c;}var d=I(a),e=d?a:a.name,g=f(e);if(g){if(!b){throw new Error("No reference point given for path '"+e+"'");}b=l(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++){if(""!==h[i]||0!==i){if("^"!==h[i]){break;}if(!k.parent){throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");}k=k.parent;}else{k=b;}}h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h;}var m=y[e];return !m||!d&&(d||m!==a&&m.self!==a)?c:m;}function m(a,b){z[a]||(z[a]=[]),z[a].push(b);}function o(a){for(var b=z[a]||[];b.length;){p(b.shift());}}function p(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name;}});var c=b.name;if(!I(c)||c.indexOf("@")>=0){throw new Error("State must have a valid name");}if(y.hasOwnProperty(c)){throw new Error("State '"+c+"'' is already defined");}var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):I(b.parent)?b.parent:J(b.parent)&&I(b.parent.name)?b.parent.name:"";if(e&&!y[e]){return m(e,b.self);}for(var f in B){H(B[f])&&(b[f]=B[f](b,B.$delegates[f]));}return y[c]=b,!b[A]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){x.$current.navigable==b&&j(a,c)||x.transitionTo(b,a,{inherit:!0,location:!1});}]),o(c),b;}function q(a){return a.indexOf("*")>-1;}function r(a){var b=a.split("."),c=x.$current.name.split(".");if("**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length){return !1;}for(var d=0,e=b.length;e>d;d++){"*"===b[d]&&(c[d]="*");}return c.join("")===b.join("");}function s(a,b){return I(a)&&!G(b)?B[a]:H(b)&&I(a)?(B[a]&&!B.$delegates[a]&&(B.$delegates[a]=B[a]),B[a]=b,this):this;}function t(a,b){return J(a)?b=a:b.name=a,p(b),this;}function u(a,e,f,h,m,o,p){function s(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented){return p.update(),B;}if(!g.retry){return null;}if(f.$retry){return p.update(),C;}var h=x.transition=e.when(g.retry);return h.then(function(){return h!==x.transition?u:(b.options.$retry=!0,x.transitionTo(b.to,b.toParams,b.options));},function(){return B;}),p.update(),h;}function t(a,c,d,g,i,j){var l=d?c:k(a.params.$$keys(),c),n={$stateParams:l};i.resolve=m.resolve(a.resolve,n,i.resolve,a);var o=[i.resolve.then(function(a){i.globals=a;})];return g&&o.push(g),L(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return f.load(d,{view:c,locals:n,params:l,notify:j.notify})||"";}],o.push(m.resolve(e,n,i.resolve,a).then(function(f){if(H(c.controllerProvider)||K(c.controllerProvider)){var g=b.extend({},e,n);f.$$controller=h.invoke(c.controllerProvider,null,g);}else{f.$$controller=c.controller;}f.$$state=a,f.$$controllerAs=c.controllerAs,i[d]=f;}));}),e.all(o).then(function(){return i;});}var u=e.reject(new Error("transition superseded")),z=e.reject(new Error("transition prevented")),B=e.reject(new Error("transition aborted")),C=e.reject(new Error("transition failed"));return w.locals={resolve:null,globals:{$stateParams:{}}},x={params:{},current:w.self,$current:w,transition:null},x.reload=function(){return x.transitionTo(x.current,o,{reload:!0,inherit:!1,notify:!0});},x.go=function(a,b,c){return x.transitionTo(a,b,M({inherit:!0,relative:x.$current},c));},x.transitionTo=function(b,c,f){c=c||{},f=M({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=x.$current,m=x.params,n=j.path,q=l(b,f.relative);if(!G(q)){var r={to:b,toParams:c,options:f},y=s(r,j.self,m,f);if(y){return y;}if(b=r.to,c=r.toParams,f=r.options,q=l(b,f.relative),!G(q)){if(!f.relative){throw new Error("No such state '"+b+"'");}throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'");}}if(q[A]){throw new Error("Cannot transition to abstract state '"+b+"'");}if(f.inherit&&(c=i(o,c||{},x.$current,q)),!q.params.$$validates(c)){return C;}c=q.params.$$values(c),b=q;var B=b.path,D=0,E=B[D],F=w.locals,H=[];if(!f.reload){for(;E&&E===n[D]&&E.ownParams.$$equals(c,m);){F=H[D]=E.locals,D++,E=B[D];}}if(v(b,j,F,f)){return b.self.reloadOnSearch!==!1&&p.update(),x.transition=null,e.when(x.current);}if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,m).defaultPrevented){return p.update(),z;}for(var I=e.when(F),J=D;J<B.length;J++,E=B[J]){F=H[J]=d(F),I=t(E,c,E===b,I,F,f);}var K=x.transition=I.then(function(){var d,e,g;if(x.transition!==K){return u;}for(d=n.length-1;d>=D;d--){g=n[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;}for(d=D;d<B.length;d++){e=B[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);}return x.transition!==K?u:(x.$current=b,x.current=b.self,x.params=c,N(x.params,o),x.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,m),p.update(!0),x.current);},function(d){return x.transition!==K?u:(x.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,m,d),g.defaultPrevented||p.update(),e.reject(d));});return K;},x.is=function(a,b,d){d=M({relative:x.$current},d||{});var e=l(a,d.relative);return G(e)?x.$current!==e?!1:b?j(e.params.$$values(b),o):!0:c;},x.includes=function(a,b,d){if(d=M({relative:x.$current},d||{}),I(a)&&q(a)){if(!r(a)){return !1;}a=x.$current.name;}var e=l(a,d.relative);return G(e)?G(x.$current.includes[e.name])?b?j(e.params.$$values(b),o,g(b)):!0:!1:c;},x.href=function(a,b,d){d=M({lossy:!0,inherit:!0,absolute:!1,relative:x.$current},d||{});var e=l(a,d.relative);if(!G(e)){return null;}d.inherit&&(b=i(o,b||{},x.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys(),b||{}),{absolute:d.absolute}):null;},x.get=function(a,b){if(0===arguments.length){return n(g(y),function(a){return y[a].self;});}var c=l(a,b||x.$current);return c&&c.self?c.self:null;},x;}function v(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0;}var w,x,y={},z={},A="abstract",B={parent:function(a){if(G(a.parent)&&a.parent){return l(a.parent);}var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):w;},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=M({},a.parent.data,a.data)),a.data;},url:function(a){var b=a.url,c={params:a.params||{}};if(I(b)){return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||w).url.concat(b,c);}if(!b||e.isMatcher(b)){return b;}throw new Error("Invalid url '"+b+"' in state '"+a+"'");},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null;},ownParams:function(a){var b=a.url&&a.url.params||new O.ParamSet;return L(a.params||{},function(a,c){b[c]||(b[c]=new O.Param(c,null,a,"config"));}),b;},params:function(a){return a.parent&&a.parent.params?M(a.parent.params.$$new(),a.ownParams):new O.ParamSet;},views:function(a){var b={};return L(G(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c;}),b;},path:function(a){return a.parent?a.parent.path.concat(a):[];},includes:function(a){var b=a.parent?M({},a.parent.includes):{};return b[a.name]=!0,b;},$delegates:{}};w=p({name:"",url:"^",views:null,"abstract":!0}),w.navigable=null,this.decorator=s,this.state=t,this.$get=u,u.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"];}function v(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=M(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e;}};}this.$get=a,a.$inject=["$rootScope","$templateFactory"];}function w(){var a=!1;this.useAnchorScroll=function(){a=!0;},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView();},0,!1);};}];}function x(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null;}:function(a){try{return c.get(a);}catch(b){return null;}};}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c();},leave:function(a,b){a.remove(),b();}};};if(j){return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c);},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b);}};}if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c();},leave:function(a,b){d.leave(a),b();}};}return c();}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null;}),l=m,m=null);}function k(g){var k,l=z(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a);}),j();});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p);}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1);}),c.$on("$viewContentLoading",function(){k(!1);}),k(!0);};}};return k;}function y(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=z(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m);}l(e);}};}};}function z(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"");}function A(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length){throw new Error("Invalid state ref '"+a+"'");}return{state:c[1],paramExpr:c[3]||null};}function B(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0;}function C(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=A(g.uiSref,a.current.name),j=null,k=B(f)||a.$current,l=null,m="A"===f.prop("tagName"),n="FORM"===f[0].nodeName,o=n?"action":"href",p=!0,q={relative:k,inherit:!0},r=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in r&&(q[a]=r[a]);});var s=function(c){if(c&&(j=b.copy(c)),p){l=a.href(i.state,j,q);var d=h[1]||h[0];return d&&d.$$setStateInfo(i.state,j),null===l?(p=!1,!1):void g.$set(o,l);}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&s(a);},!0),j=b.copy(e.$eval(i.paramExpr))),s(),n||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,q);});b.preventDefault();var g=m&&!l?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e);};}});}};}function D(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(j):d.removeClass(j);}function g(){return"undefined"!=typeof e.uiSrefActiveEq?h&&a.is(h.name,i):h&&a.includes(h.name,i);}var h,i,j;j=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$setStateInfo=function(b,c){h=a.get(b,B(d)),i=c,f();},b.$on("$stateChangeSuccess",f);}]};}function E(a){var b=function(b){return a.is(b);};return b.$stateful=!0,b;}function F(a){var b=function(b){return a.includes(b);};return b.$stateful=!0,b;}var G=b.isDefined,H=b.isFunction,I=b.isString,J=b.isObject,K=b.isArray,L=b.forEach,M=b.extend,N=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),o.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",o),p.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",p);var O;q.prototype.concat=function(a,b){var c={caseInsensitive:O.caseInsensitive(),strict:O.strictMode(),squash:O.defaultSquashPolicy()};return new q(this.sourcePath+a+this.sourceSearch,M(c,b),this);},q.prototype.toString=function(){return this.source;},q.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("");}function c(a){return a.replace(/\\-/,"-");}var d=b(a).split(/-(?!\\)/),e=n(d,b);return n(e,c).reverse();}var d=this.regexp.exec(a);if(!d){return null;}b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1){throw new Error("Unbalanced capture group in route '"+this.source+"'");}for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++){l.replace[f].from===m&&(m=l.replace[f].to);}m&&l.array===!0&&(m=c(m)),k[g]=l.value(m);}for(;i>e;e++){g=h[e],k[g]=this.params[g].value(b[g]);}return k;},q.prototype.parameters=function(a){return G(a)?this.params[a]||null:this.$$paramNames;},q.prototype.validates=function(a){return this.params.$$validates(a);},q.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase();});}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a)){return null;}var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],o=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),o),q=p?m.squash:!1,r=m.type.encode(o);if(k){var s=c[f+1];if(q===!1){null!=r&&(j+=K(r)?n(r,b).join("-"):encodeURIComponent(r)),j+=s;}else{if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1];}else{I(q)&&(j+=q+s);}}}else{if(null==r||p&&q!==!1){continue;}K(r)||(r=[r]),r=n(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0;}}return j;},r.prototype.is=function(){return !0;},r.prototype.encode=function(a){return a;},r.prototype.decode=function(a){return a;},r.prototype.equals=function(a,b){return a==b;},r.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2);},r.prototype.pattern=/.*/,r.prototype.toString=function(){return"{Type:"+this.name+"}";},r.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments);};}function e(a){return K(a)?a:G(a)?[a]:[];}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a;}}function g(a){return !a;}function h(a,b){return function(c){c=e(c);var d=n(c,a);return b===!0?0===m(d,g).length:f(d);};}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length){return !1;}for(var g=0;g<d.length;g++){if(!a(d[g],f[g])){return !1;}}return !0;};}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$arrayMode=b;}if(!a){return this;}if("auto"===a&&!b){throw new Error("'auto' array mode is for query parameters only");}return new d(this,a);},b.module("ui.router.util").provider("$urlMatcherFactory",s),b.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),t.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",t),u.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",u),v.$inject=[],b.module("ui.router.state").provider("$view",v),b.module("ui.router.state").provider("$uiViewScroll",w),x.$inject=["$state","$injector","$uiViewScroll","$interpolate"],y.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",x),b.module("ui.router.state").directive("uiView",y),C.$inject=["$state","$timeout"],D.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",C).directive("uiSrefActive",D).directive("uiSrefActiveEq",D),E.$inject=["$state"],F.$inject=["$state"],b.module("ui.router.state").filter("isState",E).filter("includedByState",F);}(window,window.angular);/*
   angular-block-ui v0.2.0
   (c) 2015 (null) McNull https://github.com/McNull/angular-block-ui
   License: MIT
*/
(function(angular){var blkUI=angular.module("blockUI",[]);blkUI.config(["$provide","$httpProvider",function($provide,$httpProvider){$provide.decorator("$exceptionHandler",["$delegate","$injector",function($delegate,$injector){var blockUI,blockUIConfig;return function(exception,cause){blockUIConfig=blockUIConfig||$injector.get("blockUIConfig");if(blockUIConfig.resetOnException){try{blockUI=blockUI||$injector.get("blockUI");blockUI.instances.reset();}catch(ex){console.log("$exceptionHandler",exception);}}$delegate(exception,cause);};}]);$httpProvider.interceptors.push("blockUIHttpInterceptor");}]);blkUI.run(["$document","blockUIConfig","$templateCache",function($document,blockUIConfig,$templateCache){if(blockUIConfig.autoInjectBodyBlock){$document.find("body").attr("block-ui","main");}if(blockUIConfig.template){blockUIConfig.templateUrl="$$block-ui-template$$";$templateCache.put(blockUIConfig.templateUrl,blockUIConfig.template);}}]);function moduleLoaded(name){try{angular.module(name);}catch(ex){return false;}return true;}blkUI.config(["$provide",function($provide){$provide.decorator("$location",decorateLocation);}]);var decorateLocation=["$delegate","blockUI","blockUIConfig",function($delegate,blockUI,blockUIConfig){if(blockUIConfig.blockBrowserNavigation){blockUI.$_blockLocationChange=true;var overrides=["url","path","search","hash","state"];function hook(f){var s=$delegate[f];$delegate[f]=function(){var result=s.apply($delegate,arguments);if(result===$delegate){blockUI.$_blockLocationChange=false;}return result;};}angular.forEach(overrides,hook);}return $delegate;}];function blockNavigation($scope,mainBlockUI,blockUIConfig){if(blockUIConfig.blockBrowserNavigation){function registerLocationChange(){$scope.$on("$locationChangeStart",function(event){if(mainBlockUI.$_blockLocationChange&&mainBlockUI.state().blockCount>0){event.preventDefault();}});$scope.$on("$locationChangeSuccess",function(){mainBlockUI.$_blockLocationChange=blockUIConfig.blockBrowserNavigation;});}if(moduleLoaded("ngRoute")){var fn=$scope.$on("$viewContentLoaded",function(){fn();registerLocationChange();});}else{registerLocationChange();}}}blkUI.directive("blockUiContainer",["blockUIConfig","blockUiContainerLinkFn",function(blockUIConfig,blockUiContainerLinkFn){return{scope:true,restrict:"A",templateUrl:blockUIConfig.templateUrl,compile:function($element){return blockUiContainerLinkFn;}};}]).factory("blockUiContainerLinkFn",["blockUI","blockUIUtils",function(blockUI,blockUIUtils){return function($scope,$element,$attrs){var srvInstance=$element.inheritedData("block-ui");if(!srvInstance){throw new Error("No parent block-ui service instance located.");}$scope.state=srvInstance.state();};}]);blkUI.directive("blockUi",["blockUiCompileFn",function(blockUiCompileFn){return{scope:true,restrict:"A",compile:blockUiCompileFn};}]).factory("blockUiCompileFn",["blockUiPreLinkFn",function(blockUiPreLinkFn){return function($element,$attrs){$element.append('<div block-ui-container class="block-ui-container"></div>');return{pre:blockUiPreLinkFn};};}]).factory("blockUiPreLinkFn",["blockUI","blockUIUtils","blockUIConfig",function(blockUI,blockUIUtils,blockUIConfig){return function($scope,$element,$attrs){if(!$element.hasClass("block-ui")){$element.addClass(blockUIConfig.cssClass);}$attrs.$observe("blockUiMessageClass",function(value){$scope.$_blockUiMessageClass=value;});var instanceId=$attrs.blockUi||"_"+$scope.$id;var srvInstance=blockUI.instances.get(instanceId);if(instanceId==="main"){blockNavigation($scope,srvInstance,blockUIConfig);}else{var parentInstance=$element.inheritedData("block-ui");if(parentInstance){srvInstance._parent=parentInstance;}}$scope.$on("$destroy",function(){srvInstance.release();});srvInstance.addRef();$scope.$_blockUiState=srvInstance.state();$scope.$watch("$_blockUiState.blocking",function(value){$element.attr("aria-busy",!!value);$element.toggleClass("block-ui-visible",!!value);});$scope.$watch("$_blockUiState.blockCount > 0",function(value){$element.toggleClass("block-ui-active",!!value);});var pattern=$attrs.blockUiPattern;if(pattern){var regExp=blockUIUtils.buildRegExp(pattern);srvInstance.pattern(regExp);}$element.data("block-ui",srvInstance);};}]);blkUI.constant("blockUIConfig",{templateUrl:"angular-block-ui/angular-block-ui.ng.html",delay:250,message:"Loading ...",autoBlock:true,resetOnException:true,requestFilter:angular.noop,autoInjectBodyBlock:true,cssClass:"block-ui block-ui-anim-fade",blockBrowserNavigation:false});blkUI.factory("blockUIHttpInterceptor",["$q","$injector","blockUIConfig","$templateCache",function($q,$injector,blockUIConfig,$templateCache){var blockUI;function injectBlockUI(){blockUI=blockUI||$injector.get("blockUI");}function stopBlockUI(config){if(blockUIConfig.autoBlock&&(config&&!config.$_noBlock&&config.$_blocks)){injectBlockUI();config.$_blocks.stop();}}function error(rejection){try{stopBlockUI(rejection.config);}catch(ex){console.log("httpRequestError",ex);}return $q.reject(rejection);}return{request:function(config){if(blockUIConfig.autoBlock&&!(config.method=="GET"&&$templateCache.get(config.url))){var result=blockUIConfig.requestFilter(config);if(result===false){config.$_noBlock=true;}else{injectBlockUI();config.$_blocks=blockUI.instances.locate(config);config.$_blocks.start(result);}}return config;},requestError:error,response:function(response){if(response){stopBlockUI(response.config);}return response;},responseError:error};}]);blkUI.factory("blockUI",["blockUIConfig","$timeout","blockUIUtils","$document",function(blockUIConfig,$timeout,blockUIUtils,$document){var $body=$document.find("body");function BlockUI(id){var self=this;var state={id:id,blockCount:0,message:blockUIConfig.message,blocking:false},startPromise,doneCallbacks=[];this._id=id;this._refs=0;this.start=function(message){if(state.blockCount>0){message=message||state.message||blockUIConfig.message;}else{message=message||blockUIConfig.message;}state.message=message;state.blockCount++;var $ae=angular.element($document[0].activeElement);if($ae.length&&blockUIUtils.isElementInBlockScope($ae,self)){self._restoreFocus=$ae[0];$timeout(function(){if(self._restoreFocus){self._restoreFocus.blur();}});}if(!startPromise){startPromise=$timeout(function(){startPromise=null;state.blocking=true;},blockUIConfig.delay);}};this._cancelStartTimeout=function(){if(startPromise){$timeout.cancel(startPromise);startPromise=null;}};this.stop=function(){state.blockCount=Math.max(0,--state.blockCount);if(state.blockCount===0){self.reset(true);}};this.message=function(value){state.message=value;};this.pattern=function(regexp){if(regexp!==undefined){self._pattern=regexp;}return self._pattern;};this.reset=function(executeCallbacks){self._cancelStartTimeout();state.blockCount=0;state.blocking=false;if(self._restoreFocus&&(!$document[0].activeElement||$document[0].activeElement===$body[0])){self._restoreFocus.focus();self._restoreFocus=null;}try{if(executeCallbacks){angular.forEach(doneCallbacks,function(cb){cb();});}}finally{doneCallbacks.length=0;}};this.done=function(fn){doneCallbacks.push(fn);};this.state=function(){return state;};this.addRef=function(){self._refs+=1;};this.release=function(){if(--self._refs<=0){mainBlock.instances._destroy(self);}};}var instances=[];instances.get=function(id){if(!isNaN(id)){throw new Error("BlockUI id cannot be a number");}var instance=instances[id];if(!instance){instance=instances[id]=new BlockUI(id);instances.push(instance);}return instance;};instances._destroy=function(idOrInstance){if(angular.isString(idOrInstance)){idOrInstance=instances[idOrInstance];}if(idOrInstance){idOrInstance.reset();var i=blockUIUtils.indexOf(instances,idOrInstance);instances.splice(i,1);delete instances[idOrInstance.state().id];}};instances.locate=function(request){var result=[];blockUIUtils.forEachFnHook(result,"start");blockUIUtils.forEachFnHook(result,"stop");var i=instances.length;while(i--){var instance=instances[i];var pattern=instance._pattern;if(pattern&&pattern.test(request.url)){result.push(instance);}}if(result.length===0){result.push(mainBlock);}return result;};blockUIUtils.forEachFnHook(instances,"reset");var mainBlock=instances.get("main");mainBlock.addRef();mainBlock.instances=instances;return mainBlock;}]);blkUI.factory("blockUIUtils",function(){var $=angular.element;var utils={buildRegExp:function(pattern){var match=pattern.match(/^\/(.*)\/([gim]*)$/),regExp;if(match){regExp=new RegExp(match[1],match[2]);}else{throw Error("Incorrect regular expression format: "+pattern);}return regExp;},forEachFn:function(arr,fnName,args){var i=arr.length;while(i--){var t=arr[i];t[fnName].apply(t,args);}},forEachFnHook:function(arr,fnName){arr[fnName]=function(){utils.forEachFn(this,fnName,arguments);};},isElementInBlockScope:function($element,blockScope){var c=$element.inheritedData("block-ui");while(c){if(c===blockScope){return true;}c=c._parent;}return false;},findElement:function($element,predicateFn,traverse){var ret=null;if(predicateFn($element)){ret=$element;}else{var $elements;if(traverse){$elements=$element.parent();}else{$elements=$element.children();}var i=$elements.length;while(!ret&&i--){ret=utils.findElement($($elements[i]),predicateFn,traverse);}}return ret;},indexOf:function(arr,obj,start){for(var i=(start||0),j=arr.length;i<j;i++){if(arr[i]===obj){return i;}}return -1;}};return utils;});angular.module("blockUI").run(["$templateCache",function($templateCache){$templateCache.put("angular-block-ui/angular-block-ui.ng.html",'<div class="block-ui-overlay"></div><div class="block-ui-message-container" aria-live="assertive" aria-atomic="true"><div class="block-ui-message" ng-class="$_blockUiMessageClass">{{ state.message }}</div></div>');}]);})(angular);var awk;(function(awk){var grid;(function(grid){var ColumnChangeEvent=(function(){function ColumnChangeEvent(type){this.type=type;}ColumnChangeEvent.prototype.toString=function(){var result="ColumnChangeEvent {type: "+this.type;if(this.column){result+=", column: "+this.column.colId;}if(this.columnGroup){result+=", columnGroup: "+this.columnGroup.name;}if(this.fromIndex){result+=", fromIndex: "+this.fromIndex;}if(this.toIndex){result+=", toIndex: "+this.toIndex;}if(this.pinnedColumnCount){result+=", pinnedColumnCount: "+this.pinnedColumnCount;}result+="}";return result;};ColumnChangeEvent.prototype.withColumn=function(column){this.column=column;return this;};ColumnChangeEvent.prototype.withColumnGroup=function(columnGroup){this.columnGroup=columnGroup;return this;};ColumnChangeEvent.prototype.withFromIndex=function(fromIndex){this.fromIndex=fromIndex;return this;};ColumnChangeEvent.prototype.withPinnedColumnCount=function(pinnedColumnCount){this.pinnedColumnCount=pinnedColumnCount;return this;};ColumnChangeEvent.prototype.withToIndex=function(toIndex){this.toIndex=toIndex;return this;};ColumnChangeEvent.prototype.getFromIndex=function(){return this.fromIndex;};ColumnChangeEvent.prototype.getToIndex=function(){return this.toIndex;};ColumnChangeEvent.prototype.getPinnedColumnCount=function(){return this.pinnedColumnCount;};ColumnChangeEvent.prototype.getType=function(){return this.type;};ColumnChangeEvent.prototype.getColumn=function(){return this.column;};ColumnChangeEvent.prototype.getColumnGroup=function(){return this.columnGroup;};ColumnChangeEvent.prototype.isPivotChanged=function(){return this.type===ColumnChangeEvent.TYPE_PIVOT_CHANGE||this.type===ColumnChangeEvent.TYPE_EVERYTHING;};ColumnChangeEvent.prototype.isValueChanged=function(){return this.type===ColumnChangeEvent.TYPE_VALUE_CHANGE||this.type===ColumnChangeEvent.TYPE_EVERYTHING;};ColumnChangeEvent.prototype.isIndividualColumnResized=function(){return this.type===ColumnChangeEvent.TYPE_COLUMN_RESIZED&&this.column!==undefined&&this.column!==null;};ColumnChangeEvent.TYPE_EVERYTHING="everything";ColumnChangeEvent.TYPE_PIVOT_CHANGE="pivot";ColumnChangeEvent.TYPE_VALUE_CHANGE="value";ColumnChangeEvent.TYPE_COLUMN_MOVED="columnMoved";ColumnChangeEvent.TYPE_COLUMN_VISIBLE="columnVisible";ColumnChangeEvent.TYPE_COLUMN_GROUP_OPENED="columnGroupOpened";ColumnChangeEvent.TYPE_COLUMN_RESIZED="columnResized";ColumnChangeEvent.TYPE_PINNED_COUNT_CHANGED="pinnedCountChanged";return ColumnChangeEvent;})();grid.ColumnChangeEvent=ColumnChangeEvent;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var FUNCTION_STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;var FUNCTION_ARGUMENT_NAMES=/([^\s,]+)/g;var Utils=(function(){function Utils(){}Utils.iterateObject=function(object,callback){var keys=Object.keys(object);for(var i=0;i<keys.length;i++){var key=keys[i];var value=object[key];callback(key,value);}};Utils.map=function(array,callback){var result=[];for(var i=0;i<array.length;i++){var item=array[i];var mappedItem=callback(item);result.push(mappedItem);}return result;};Utils.forEach=function(array,callback){if(!array){return;}for(var i=0;i<array.length;i++){var value=array[i];callback(value,i);}};Utils.filter=function(array,callback){var result=[];array.forEach(function(item){if(callback(item)){result.push(item);}});return result;};Utils.assign=function(object,source){Utils.iterateObject(source,function(key,value){object[key]=value;});};Utils.getFunctionParameters=function(func){var fnStr=func.toString().replace(FUNCTION_STRIP_COMMENTS,"");var result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(FUNCTION_ARGUMENT_NAMES);if(result===null){return[];}else{return result;}};Utils.find=function(collection,predicate,value){if(collection===null||collection===undefined){return null;}for(var i=0;i<collection.length;i++){if(collection[i][predicate]===value){return collection[i];}}return null;};Utils.toStrings=function(array){return this.map(array,function(item){if(item===undefined||item===null||!item.toString){return null;}else{return item.toString();}});};Utils.iterateArray=function(array,callback){for(var index=0;index<array.length;index++){var value=array[index];callback(value,index);}};Utils.isNode=function(o){return(typeof Node==="object"?o instanceof Node:o&&typeof o==="object"&&typeof o.nodeType==="number"&&typeof o.nodeName==="string");};Utils.isElement=function(o){return(typeof HTMLElement==="object"?o instanceof HTMLElement:o&&typeof o==="object"&&o!==null&&o.nodeType===1&&typeof o.nodeName==="string");};Utils.isNodeOrElement=function(o){return this.isNode(o)||this.isElement(o);};Utils.addChangeListener=function(element,listener){element.addEventListener("changed",listener);element.addEventListener("paste",listener);element.addEventListener("input",listener);element.addEventListener("keydown",listener);element.addEventListener("keyup",listener);};Utils.makeNull=function(value){if(value===null||value===undefined||value===""){return null;}else{return value;}};Utils.removeAllChildren=function(node){if(node){while(node.hasChildNodes()){node.removeChild(node.lastChild);}}};Utils.removeElement=function(parent,cssSelector){this.removeFromParent(parent.querySelector(cssSelector));};Utils.removeFromParent=function(node){if(node&&node.parentNode){node.parentNode.removeChild(node);}};Utils.isVisible=function(element){return(element.offsetParent!==null);};Utils.loadTemplate=function(template){var tempDiv=document.createElement("div");tempDiv.innerHTML=template;return tempDiv.firstChild;};Utils.querySelectorAll_addCssClass=function(eParent,selector,cssClass){var eRows=eParent.querySelectorAll(selector);for(var k=0;k<eRows.length;k++){this.addCssClass(eRows[k],cssClass);}};Utils.querySelectorAll_removeCssClass=function(eParent,selector,cssClass){var eRows=eParent.querySelectorAll(selector);for(var k=0;k<eRows.length;k++){this.removeCssClass(eRows[k],cssClass);}};Utils.querySelectorAll_replaceCssClass=function(eParent,selector,cssClassToRemove,cssClassToAdd){var eRows=eParent.querySelectorAll(selector);for(var k=0;k<eRows.length;k++){this.removeCssClass(eRows[k],cssClassToRemove);this.addCssClass(eRows[k],cssClassToAdd);}};Utils.addOrRemoveCssClass=function(element,className,addOrRemove){if(addOrRemove){this.addCssClass(element,className);}else{this.removeCssClass(element,className);}};Utils.addCssClass=function(element,className){if(element.className&&element.className.length>0){var cssClasses=element.className.split(" ");if(cssClasses.indexOf(className)<0){cssClasses.push(className);element.className=cssClasses.join(" ");}}else{element.className=className;}};Utils.offsetHeight=function(element){return element&&element.clientHeight?element.clientHeight:0;};Utils.offsetWidth=function(element){return element&&element.clientWidth?element.clientWidth:0;};Utils.removeCssClass=function(element,className){if(element.className&&element.className.length>0){var cssClasses=element.className.split(" ");var index=cssClasses.indexOf(className);if(index>=0){cssClasses.splice(index,1);element.className=cssClasses.join(" ");}}};Utils.removeFromArray=function(array,object){if(array.indexOf(object)>=0){array.splice(array.indexOf(object),1);}};Utils.defaultComparator=function(valueA,valueB){var valueAMissing=valueA===null||valueA===undefined;var valueBMissing=valueB===null||valueB===undefined;if(valueAMissing&&valueBMissing){return 0;}if(valueAMissing){return -1;}if(valueBMissing){return 1;}if(valueA<valueB){return -1;}else{if(valueA>valueB){return 1;}else{return 0;}}};Utils.formatWidth=function(width){if(typeof width==="number"){return width+"px";}else{return width;}};Utils.useRenderer=function(eParent,eRenderer,params){var resultFromRenderer=eRenderer(params);if(typeof resultFromRenderer==="string"){var eTextSpan=document.createElement("span");eTextSpan.innerHTML=resultFromRenderer;eParent.appendChild(eTextSpan);}else{if(this.isNodeOrElement(resultFromRenderer)){eParent.appendChild(resultFromRenderer);}}};Utils.createIcon=function(iconName,gridOptionsWrapper,colDefWrapper,svgFactoryFunc){var eResult=document.createElement("span");var userProvidedIcon;if(colDefWrapper&&colDefWrapper.colDef.icons){userProvidedIcon=colDefWrapper.colDef.icons[iconName];}if(!userProvidedIcon&&gridOptionsWrapper.getIcons()){userProvidedIcon=gridOptionsWrapper.getIcons()[iconName];}if(userProvidedIcon){var rendererResult;if(typeof userProvidedIcon==="function"){rendererResult=userProvidedIcon();}else{if(typeof userProvidedIcon==="string"){rendererResult=userProvidedIcon;}else{throw"icon from grid options needs to be a string or a function";}}if(typeof rendererResult==="string"){eResult.innerHTML=rendererResult;}else{if(this.isNodeOrElement(rendererResult)){eResult.appendChild(rendererResult);}else{throw"iconRenderer should return back a string or a dom object";}}}else{eResult.appendChild(svgFactoryFunc());}return eResult;};Utils.addStylesToElement=function(eElement,styles){Object.keys(styles).forEach(function(key){eElement.style[key]=styles[key];});};Utils.getScrollbarWidth=function(){var outer=document.createElement("div");outer.style.visibility="hidden";outer.style.width="100px";outer.style.msOverflowStyle="scrollbar";document.body.appendChild(outer);var widthNoScroll=outer.offsetWidth;outer.style.overflow="scroll";var inner=document.createElement("div");inner.style.width="100%";outer.appendChild(inner);var widthWithScroll=inner.offsetWidth;outer.parentNode.removeChild(outer);return widthNoScroll-widthWithScroll;};Utils.isKeyPressed=function(event,keyToCheck){var pressedKey=event.which||event.keyCode;return pressedKey===keyToCheck;};Utils.setVisible=function(element,visible){if(visible){element.style.display="inline";}else{element.style.display="none";}};Utils.isBrowserIE=function(){return this.isIE;};Utils.isBrowserSafari=function(){return this.isSafari;};Utils.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;Utils.isIE=false||!!document.documentMode;return Utils;})();grid.Utils=Utils;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var Constants=(function(){function Constants(){}Constants.STEP_EVERYTHING=0;Constants.STEP_FILTER=1;Constants.STEP_SORT=2;Constants.STEP_MAP=3;Constants.ASC="asc";Constants.DESC="desc";Constants.ROW_BUFFER_SIZE=20;Constants.MIN_COL_WIDTH=10;Constants.SUM="sum";Constants.MIN="min";Constants.MAX="max";Constants.KEY_TAB=9;Constants.KEY_ENTER=13;Constants.KEY_ESCAPE=27;Constants.KEY_SPACE=32;Constants.KEY_DOWN=40;Constants.KEY_UP=38;Constants.KEY_LEFT=37;Constants.KEY_RIGHT=39;return Constants;})();grid.Constants=Constants;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var constants=grid.Constants;var Column=(function(){function Column(colDef,actualWidth){this.colDef=colDef;this.actualWidth=actualWidth;this.visible=!colDef.hide;this.sort=colDef.sort;this.sortedAt=colDef.sortedAt;if(colDef.colId){this.colId=colDef.colId;}else{if(colDef.field){this.colId=colDef.field;}else{this.colId=""+Column.colIdSequence++;}}}Column.prototype.isGreaterThanMax=function(width){if(this.colDef.maxWidth>=constants.MIN_COL_WIDTH){return width>this.colDef.maxWidth;}else{return false;}};Column.prototype.getMinimumWidth=function(){if(this.colDef.minWidth>constants.MIN_COL_WIDTH){return this.colDef.minWidth;}else{return constants.MIN_COL_WIDTH;}};Column.prototype.setMinimum=function(){this.actualWidth=this.getMinimumWidth();};Column.colIdSequence=0;return Column;})();grid.Column=Column;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var ColumnGroup=(function(){function ColumnGroup(pinned,name){this.allColumns=[];this.displayedColumns=[];this.expandable=false;this.expanded=false;this.pinned=pinned;this.name=name;}ColumnGroup.prototype.getMinimumWidth=function(){var result=0;this.displayedColumns.forEach(function(column){result+=column.getMinimumWidth();});return result;};ColumnGroup.prototype.addColumn=function(column){this.allColumns.push(column);};ColumnGroup.prototype.calculateExpandable=function(){var atLeastOneShowingWhenOpen=false;var atLeastOneShowingWhenClosed=false;var atLeastOneChangeable=false;for(var i=0,j=this.allColumns.length;i<j;i++){var column=this.allColumns[i];if(column.colDef.headerGroupShow==="open"){atLeastOneShowingWhenOpen=true;atLeastOneChangeable=true;}else{if(column.colDef.headerGroupShow==="closed"){atLeastOneShowingWhenClosed=true;atLeastOneChangeable=true;}else{atLeastOneShowingWhenOpen=true;atLeastOneShowingWhenClosed=true;}}}this.expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;};ColumnGroup.prototype.calculateActualWidth=function(){var actualWidth=0;this.displayedColumns.forEach(function(column){actualWidth+=column.actualWidth;});this.actualWidth=actualWidth;};ColumnGroup.prototype.calculateDisplayedColumns=function(){this.displayedColumns=[];if(!this.expandable){this.displayedColumns=this.allColumns;return;}for(var i=0,j=this.allColumns.length;i<j;i++){var column=this.allColumns[i];switch(column.colDef.headerGroupShow){case"open":if(this.expanded){this.displayedColumns.push(column);}break;case"closed":if(!this.expanded){this.displayedColumns.push(column);}break;default:this.displayedColumns.push(column);break;}}};ColumnGroup.prototype.addToVisibleColumns=function(colsToAdd){for(var i=0;i<this.displayedColumns.length;i++){var column=this.displayedColumns[i];colsToAdd.push(column);}};return ColumnGroup;})();grid.ColumnGroup=ColumnGroup;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var DEFAULT_ROW_HEIGHT=30;var constants=grid.Constants;function isTrue(value){return value===true||value==="true";}var GridOptionsWrapper=(function(){function GridOptionsWrapper(gridOptions){this.gridOptions=gridOptions;this.headerHeight=gridOptions.headerHeight;this.groupHeaders=gridOptions.groupHeaders;this.rowHeight=gridOptions.rowHeight;this.floatingTopRowData=gridOptions.floatingTopRowData;this.floatingBottomRowData=gridOptions.floatingBottomRowData;if(!this.rowHeight){this.rowHeight=DEFAULT_ROW_HEIGHT;}this.checkForDeprecated();}GridOptionsWrapper.prototype.isRowSelection=function(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple";};GridOptionsWrapper.prototype.isRowDeselection=function(){return isTrue(this.gridOptions.rowDeselection);};GridOptionsWrapper.prototype.isRowSelectionMulti=function(){return this.gridOptions.rowSelection==="multiple";};GridOptionsWrapper.prototype.getContext=function(){return this.gridOptions.context;};GridOptionsWrapper.prototype.isVirtualPaging=function(){return isTrue(this.gridOptions.virtualPaging);};GridOptionsWrapper.prototype.isShowToolPanel=function(){return isTrue(this.gridOptions.showToolPanel);};GridOptionsWrapper.prototype.isToolPanelSuppressPivot=function(){return isTrue(this.gridOptions.toolPanelSuppressPivot);};GridOptionsWrapper.prototype.isToolPanelSuppressValues=function(){return isTrue(this.gridOptions.toolPanelSuppressValues);};GridOptionsWrapper.prototype.isRowsAlreadyGrouped=function(){return isTrue(this.gridOptions.rowsAlreadyGrouped);};GridOptionsWrapper.prototype.isGroupSelectsChildren=function(){return isTrue(this.gridOptions.groupSelectsChildren);};GridOptionsWrapper.prototype.isGroupHidePivotColumns=function(){return isTrue(this.gridOptions.groupHidePivotColumns);};GridOptionsWrapper.prototype.isGroupIncludeFooter=function(){return isTrue(this.gridOptions.groupIncludeFooter);};GridOptionsWrapper.prototype.isGroupSuppressBlankHeader=function(){return isTrue(this.gridOptions.groupSuppressBlankHeader);};GridOptionsWrapper.prototype.isSuppressRowClickSelection=function(){return isTrue(this.gridOptions.suppressRowClickSelection);};GridOptionsWrapper.prototype.isSuppressCellSelection=function(){return isTrue(this.gridOptions.suppressCellSelection);};GridOptionsWrapper.prototype.isSuppressMultiSort=function(){return isTrue(this.gridOptions.suppressMultiSort);};GridOptionsWrapper.prototype.isGroupSuppressAutoColumn=function(){return isTrue(this.gridOptions.groupSuppressAutoColumn);};GridOptionsWrapper.prototype.isDontUseScrolls=function(){return isTrue(this.gridOptions.dontUseScrolls);};GridOptionsWrapper.prototype.isSuppressHorizontalScroll=function(){return isTrue(this.gridOptions.suppressHorizontalScroll);};GridOptionsWrapper.prototype.isUnSortIcon=function(){return isTrue(this.gridOptions.unSortIcon);};GridOptionsWrapper.prototype.isSuppressMenuHide=function(){return isTrue(this.gridOptions.suppressMenuHide);};GridOptionsWrapper.prototype.getRowStyle=function(){return this.gridOptions.rowStyle;};GridOptionsWrapper.prototype.getRowClass=function(){return this.gridOptions.rowClass;};GridOptionsWrapper.prototype.getHeaderCellRenderer=function(){return this.gridOptions.headerCellRenderer;};GridOptionsWrapper.prototype.getApi=function(){return this.gridOptions.api;};GridOptionsWrapper.prototype.isEnableColResize=function(){return isTrue(this.gridOptions.enableColResize);};GridOptionsWrapper.prototype.getGroupDefaultExpanded=function(){return this.gridOptions.groupDefaultExpanded;};GridOptionsWrapper.prototype.getGroupKeys=function(){return this.gridOptions.groupKeys;};GridOptionsWrapper.prototype.getGroupAggFunction=function(){return this.gridOptions.groupAggFunction;};GridOptionsWrapper.prototype.getGroupAggFields=function(){return this.gridOptions.groupAggFields;};GridOptionsWrapper.prototype.getRowData=function(){return this.gridOptions.rowData;};GridOptionsWrapper.prototype.isGroupUseEntireRow=function(){return isTrue(this.gridOptions.groupUseEntireRow);};GridOptionsWrapper.prototype.getGroupColumnDef=function(){return this.gridOptions.groupColumnDef;};GridOptionsWrapper.prototype.isGroupSuppressRow=function(){return isTrue(this.gridOptions.groupSuppressRow);};GridOptionsWrapper.prototype.isAngularCompileRows=function(){return isTrue(this.gridOptions.angularCompileRows);};GridOptionsWrapper.prototype.isAngularCompileFilters=function(){return isTrue(this.gridOptions.angularCompileFilters);};GridOptionsWrapper.prototype.isAngularCompileHeaders=function(){return isTrue(this.gridOptions.angularCompileHeaders);};GridOptionsWrapper.prototype.isDebug=function(){return isTrue(this.gridOptions.debug);};GridOptionsWrapper.prototype.getColumnDefs=function(){return this.gridOptions.columnDefs;};GridOptionsWrapper.prototype.getBeforeFilterChanged=function(){return this.gridOptions.beforeFilterChanged;};GridOptionsWrapper.prototype.getAfterFilterChanged=function(){return this.gridOptions.afterFilterChanged;};GridOptionsWrapper.prototype.getFilterModified=function(){return this.gridOptions.filterModified;};GridOptionsWrapper.prototype.getBeforeSortChanged=function(){return this.gridOptions.beforeSortChanged;};GridOptionsWrapper.prototype.getAfterSortChanged=function(){return this.gridOptions.afterSortChanged;};GridOptionsWrapper.prototype.getModelUpdated=function(){return this.gridOptions.modelUpdated;};GridOptionsWrapper.prototype.getCellClicked=function(){return this.gridOptions.cellClicked;};GridOptionsWrapper.prototype.getCellDoubleClicked=function(){return this.gridOptions.cellDoubleClicked;};GridOptionsWrapper.prototype.getCellValueChanged=function(){return this.gridOptions.cellValueChanged;};GridOptionsWrapper.prototype.getCellFocused=function(){return this.gridOptions.cellFocused;};GridOptionsWrapper.prototype.getRowSelected=function(){return this.gridOptions.rowSelected;};GridOptionsWrapper.prototype.getColumnResized=function(){return this.gridOptions.columnResized;};GridOptionsWrapper.prototype.getColumnVisibilityChanged=function(){return this.gridOptions.columnVisibilityChanged;};GridOptionsWrapper.prototype.getColumnOrderChanged=function(){return this.gridOptions.columnOrderChanged;};GridOptionsWrapper.prototype.getSelectionChanged=function(){return this.gridOptions.selectionChanged;};GridOptionsWrapper.prototype.getVirtualRowRemoved=function(){return this.gridOptions.virtualRowRemoved;};GridOptionsWrapper.prototype.getDatasource=function(){return this.gridOptions.datasource;};GridOptionsWrapper.prototype.getReady=function(){return this.gridOptions.ready;};GridOptionsWrapper.prototype.getRowBuffer=function(){return this.gridOptions.rowBuffer;};GridOptionsWrapper.prototype.isEnableSorting=function(){return isTrue(this.gridOptions.enableSorting)||isTrue(this.gridOptions.enableServerSideSorting);};GridOptionsWrapper.prototype.isEnableCellExpressions=function(){return isTrue(this.gridOptions.enableCellExpressions);};GridOptionsWrapper.prototype.isEnableServerSideSorting=function(){return isTrue(this.gridOptions.enableServerSideSorting);};GridOptionsWrapper.prototype.isEnableFilter=function(){return isTrue(this.gridOptions.enableFilter)||isTrue(this.gridOptions.enableServerSideFilter);};GridOptionsWrapper.prototype.isEnableServerSideFilter=function(){return this.gridOptions.enableServerSideFilter;};GridOptionsWrapper.prototype.isSuppressScrollLag=function(){return isTrue(this.gridOptions.suppressScrollLag);};GridOptionsWrapper.prototype.setSelectedRows=function(newSelectedRows){return this.gridOptions.selectedRows=newSelectedRows;};GridOptionsWrapper.prototype.setSelectedNodesById=function(newSelectedNodes){return this.gridOptions.selectedNodesById=newSelectedNodes;};GridOptionsWrapper.prototype.getIcons=function(){return this.gridOptions.icons;};GridOptionsWrapper.prototype.getIsScrollLag=function(){return this.gridOptions.isScrollLag;};GridOptionsWrapper.prototype.getSortingOrder=function(){return this.gridOptions.sortingOrder;};GridOptionsWrapper.prototype.getSlaveGrids=function(){return this.gridOptions.slaveGrids;};GridOptionsWrapper.prototype.getGroupRowRenderer=function(){return this.gridOptions.groupRowRenderer;};GridOptionsWrapper.prototype.getRowHeight=function(){return this.rowHeight;};GridOptionsWrapper.prototype.getHeaderHeight=function(){if(typeof this.headerHeight==="number"){return this.headerHeight;}else{if(this.groupHeaders){return 50;}else{return 25;}}};GridOptionsWrapper.prototype.setHeaderHeight=function(headerHeight){this.headerHeight=headerHeight;};GridOptionsWrapper.prototype.isGroupHeaders=function(){return isTrue(this.groupHeaders);};GridOptionsWrapper.prototype.setGroupHeaders=function(groupHeaders){this.groupHeaders=groupHeaders;};GridOptionsWrapper.prototype.getFloatingTopRowData=function(){return this.floatingTopRowData;};GridOptionsWrapper.prototype.setFloatingTopRowData=function(rows){this.floatingTopRowData=rows;};GridOptionsWrapper.prototype.getFloatingBottomRowData=function(){return this.floatingBottomRowData;};GridOptionsWrapper.prototype.setFloatingBottomRowData=function(rows){this.floatingBottomRowData=rows;};GridOptionsWrapper.prototype.isExternalFilterPresent=function(){if(typeof this.gridOptions.isExternalFilterPresent==="function"){return this.gridOptions.isExternalFilterPresent();}else{return false;}};GridOptionsWrapper.prototype.doesExternalFilterPass=function(node){if(typeof this.gridOptions.doesExternalFilterPass==="function"){return this.gridOptions.doesExternalFilterPass(node);}else{return false;}};GridOptionsWrapper.prototype.getGroupRowInnerRenderer=function(){if(this.gridOptions.groupInnerRenderer){console.warn("ag-grid: as of v1.10.0 (21st Jun 2015) groupInnerRenderer is now called groupRowInnerRenderer. Please change you code as groupInnerRenderer is deprecated.");return this.gridOptions.groupInnerRenderer;}else{return this.gridOptions.groupRowInnerRenderer;}};GridOptionsWrapper.prototype.getColWidth=function(){if(typeof this.gridOptions.colWidth!=="number"||this.gridOptions.colWidth<constants.MIN_COL_WIDTH){return 200;}else{return this.gridOptions.colWidth;}};GridOptionsWrapper.prototype.checkForDeprecated=function(){var options=this.gridOptions;if(options.suppressUnSort){console.warn("ag-grid: as of v1.12.4 suppressUnSort is not used. Please use sortOrder instead.");}if(options.suppressDescSort){console.warn("ag-grid: as of v1.12.4 suppressDescSort is not used. Please use sortOrder instead.");}};GridOptionsWrapper.prototype.getPinnedColCount=function(){if(this.isDontUseScrolls()){return 0;}if(this.gridOptions.pinnedColumnCount){return Number(this.gridOptions.pinnedColumnCount);}else{return 0;}};GridOptionsWrapper.prototype.getLocaleTextFunc=function(){var that=this;return function(key,defaultValue){var localeText=that.gridOptions.localeText;if(localeText&&localeText[key]){return localeText[key];}else{return defaultValue;}};};return GridOptionsWrapper;})();grid.GridOptionsWrapper=GridOptionsWrapper;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var LoggerFactory=(function(){function LoggerFactory(logging){this.logging=logging;}LoggerFactory.prototype.create=function(name){return new Logger(name,this.logging);};return LoggerFactory;})();grid.LoggerFactory=LoggerFactory;var Logger=(function(){function Logger(name,logging){this.name=name;this.logging=logging;}Logger.prototype.log=function(message){if(this.logging){console.log(this.name+" "+message);}};return Logger;})();grid.Logger=Logger;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var MasterSlaveService=(function(){function MasterSlaveService(){this.consuming=false;}MasterSlaveService.prototype.init=function(gridOptionsWrapper,columnController,gridPanel,loggerFactory){this.gridOptionsWrapper=gridOptionsWrapper;this.columnController=columnController;this.gridPanel=gridPanel;this.logger=loggerFactory.create("MasterSlaveService");};MasterSlaveService.prototype.fireEvent=function(callback){if(this.consuming){return;}var slaveGrids=this.gridOptionsWrapper.getSlaveGrids();if(slaveGrids){slaveGrids.forEach(function(slaveGridOptions){if(slaveGridOptions.api){var slaveService=slaveGridOptions.api.__getMasterSlaveService();callback(slaveService);}});}};MasterSlaveService.prototype.onEvent=function(callback){this.consuming=true;callback();this.consuming=false;};MasterSlaveService.prototype.fireColumnEvent=function(event){this.fireEvent(function(slaveService){slaveService.onColumnEvent(event);});};MasterSlaveService.prototype.fireHorizontalScrollEvent=function(horizontalScroll){this.fireEvent(function(slaveService){slaveService.onScrollEvent(horizontalScroll);});};MasterSlaveService.prototype.onScrollEvent=function(horizontalScroll){var _this=this;this.onEvent(function(){_this.gridPanel.setHorizontalScrollPosition(horizontalScroll);});};MasterSlaveService.prototype.onColumnEvent=function(event){var _this=this;this.onEvent(function(){var masterColumn=event.getColumn();var slaveColumn;if(masterColumn){slaveColumn=_this.columnController.getColumn(masterColumn.colId);}if(masterColumn&&!slaveColumn){return;}var masterColumnGroup=event.getColumnGroup();var slaveColumnGroup;if(masterColumnGroup){slaveColumnGroup=_this.columnController.getColumnGroup(masterColumnGroup.name);}if(masterColumnGroup&&!slaveColumnGroup){return;}switch(event.getType()){case grid.ColumnChangeEvent.TYPE_COLUMN_MOVED:_this.logger.log("onColumnEvent-> processing "+event+" fromIndex = "+event.getFromIndex()+", toIndex = "+event.getToIndex());_this.columnController.moveColumn(event.getFromIndex(),event.getToIndex());break;case grid.ColumnChangeEvent.TYPE_COLUMN_VISIBLE:_this.logger.log("onColumnEvent-> processing "+event+" visible = "+masterColumn.visible);_this.columnController.setColumnVisible(slaveColumn,masterColumn.visible);break;case grid.ColumnChangeEvent.TYPE_COLUMN_GROUP_OPENED:_this.logger.log("onColumnEvent-> processing "+event+" expanded = "+masterColumnGroup.expanded);_this.columnController.columnGroupOpened(slaveColumnGroup,masterColumnGroup.expanded);break;case grid.ColumnChangeEvent.TYPE_COLUMN_RESIZED:_this.logger.log("onColumnEvent-> processing "+event+" actualWidth = "+masterColumn.actualWidth);_this.columnController.setColumnWidth(slaveColumn,masterColumn.actualWidth);break;case grid.ColumnChangeEvent.TYPE_PINNED_COUNT_CHANGED:_this.logger.log("onColumnEvent-> processing "+event);_this.columnController.setPinnedColumnCount(event.getPinnedColumnCount());break;}});};return MasterSlaveService;})();grid.MasterSlaveService=MasterSlaveService;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var constants=grid.Constants;var ColumnApi=(function(){function ColumnApi(columnController){this.columnController=columnController;}ColumnApi.prototype.sizeColumnsToFit=function(gridWidth){this.columnController.sizeColumnsToFit(gridWidth);};ColumnApi.prototype.hideColumns=function(colIds,hide){this.columnController.hideColumns(colIds,hide);};ColumnApi.prototype.columnGroupOpened=function(group,newValue){this.columnController.columnGroupOpened(group,newValue);};ColumnApi.prototype.getColumnGroup=function(name){return this.columnController.getColumnGroup(name);};ColumnApi.prototype.addChangeListener=function(listener){this.columnController.addChangeListener(listener);};ColumnApi.prototype.getDisplayNameForCol=function(column){return this.columnController.getDisplayNameForCol(column);};ColumnApi.prototype.getColumn=function(key){return this.columnController.getColumn(key);};ColumnApi.prototype.setState=function(columnState){return this.columnController.setState(columnState);};ColumnApi.prototype.getState=function(){return this.columnController.getState();};ColumnApi.prototype.isPinning=function(){return this.columnController.isPinning();};ColumnApi.prototype.getVisibleColAfter=function(col){return this.columnController.getVisibleColAfter(col);};ColumnApi.prototype.getVisibleColBefore=function(col){return this.columnController.getVisibleColBefore(col);};ColumnApi.prototype.setColumnVisible=function(column,visible){this.columnController.setColumnVisible(column,visible);};ColumnApi.prototype.getAllColumns=function(){return this.columnController.getAllColumns();};ColumnApi.prototype.getDisplayedColumns=function(){return this.columnController.getDisplayedColumns();};ColumnApi.prototype.getPivotedColumns=function(){return this.columnController.getPivotedColumns();};ColumnApi.prototype.getValueColumns=function(){return this.columnController.getValueColumns();};ColumnApi.prototype.moveColumn=function(fromIndex,toIndex){this.columnController.moveColumn(fromIndex,toIndex);};ColumnApi.prototype.movePivotColumn=function(fromIndex,toIndex){this.columnController.movePivotColumn(fromIndex,toIndex);};ColumnApi.prototype.setColumnAggFunction=function(column,aggFunc){this.columnController.setColumnAggFunction(column,aggFunc);};ColumnApi.prototype.setColumnWidth=function(column,newWidth){this.columnController.setColumnWidth(column,newWidth);};ColumnApi.prototype.removeValueColumn=function(column){this.columnController.removeValueColumn(column);};ColumnApi.prototype.addValueColumn=function(column){this.columnController.addValueColumn(column);};ColumnApi.prototype.removePivotColumn=function(column){this.columnController.removePivotColumn(column);};ColumnApi.prototype.setPinnedColumnCount=function(count){this.columnController.setPinnedColumnCount(count);};ColumnApi.prototype.addPivotColumn=function(column){this.columnController.addPivotColumn(column);};ColumnApi.prototype.getHeaderGroups=function(){return this.columnController.getHeaderGroups();};ColumnApi.prototype.hideColumn=function(colId,hide){this.columnController.hideColumns([colId],hide);};return ColumnApi;})();grid.ColumnApi=ColumnApi;var ColumnController=(function(){function ColumnController(){this.setupComplete=false;this.changedListeners=[];}ColumnController.prototype.init=function(angularGrid,selectionRendererFactory,gridOptionsWrapper,expressionService,valueService,masterSlaveController){this.gridOptionsWrapper=gridOptionsWrapper;this.angularGrid=angularGrid;this.selectionRendererFactory=selectionRendererFactory;this.expressionService=expressionService;this.valueService=valueService;this.masterSlaveController=masterSlaveController;this.pinnedColumnCount=gridOptionsWrapper.getPinnedColCount();if(!(this.pinnedColumnCount>0)){this.pinnedColumnCount=0;}};ColumnController.prototype.getColumnApi=function(){return new ColumnApi(this);};ColumnController.prototype.isSetupComplete=function(){return this.setupComplete;};ColumnController.prototype.getHeaderGroups=function(){return this.columnGroups;};ColumnController.prototype.getPinnedContainerWidth=function(){return this.getTotalColWidth(true);};ColumnController.prototype.addPivotColumn=function(column){if(this.allColumns.indexOf(column)<0){console.warn("not a valid column: "+column);return;}if(this.pivotColumns.indexOf(column)>=0){console.warn("column is already a value column");return;}this.pivotColumns.push(column);this.updateModel();this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_PIVOT_CHANGE));};ColumnController.prototype.setPinnedColumnCount=function(count){if(!(typeof count==="number")){console.warn("ag-Grid: setPinnedColumnCount: count must be a number");return;}if(count<0){console.warn("ag-Grid: setPinnedColumnCount: count must be zero or greater");return;}this.pinnedColumnCount=count;this.updateModel();var event=new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_PINNED_COUNT_CHANGED).withPinnedColumnCount(count);this.fireColumnChanged(event);};ColumnController.prototype.removePivotColumn=function(column){if(this.pivotColumns.indexOf(column)<0){console.warn("column not a pivot");return;}_.removeFromArray(this.pivotColumns,column);this.updateModel();this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_PIVOT_CHANGE));};ColumnController.prototype.addValueColumn=function(column){if(this.allColumns.indexOf(column)<0){console.warn("not a valid column: "+column);return;}if(this.valueColumns.indexOf(column)>=0){console.warn("column is already a value column");return;}if(!column.aggFunc){column.aggFunc=constants.SUM;}this.valueColumns.push(column);this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_VALUE_CHANGE));};ColumnController.prototype.removeValueColumn=function(column){if(this.valueColumns.indexOf(column)<0){console.warn("column not a value");return;}_.removeFromArray(this.valueColumns,column);this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_VALUE_CHANGE));};ColumnController.prototype.doesColumnExistInGrid=function(column){var columnInAllColumns=this.allColumns.indexOf(column)>=0;var columnInVisibleColumns=this.visibleColumns.indexOf(column)>=0;return columnInAllColumns||columnInVisibleColumns;};ColumnController.prototype.setColumnWidth=function(column,newWidth){if(!this.doesColumnExistInGrid(column)){console.warn("column does not exist");return;}if(newWidth<column.getMinimumWidth()){newWidth=column.getMinimumWidth();}if(column.isGreaterThanMax(newWidth)){newWidth=column.colDef.maxWidth;}if(column.actualWidth!==newWidth){column.actualWidth=newWidth;this.updateGroupWidthsAfterColumnResize(column);var event=new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_COLUMN_RESIZED).withColumn(column);this.fireColumnChanged(event);}if(typeof this.gridOptionsWrapper.getColumnResized()==="function"){console.warn("ag-Grid: gridOptions.columnResized is deprecated - use the column API and events instead");this.gridOptionsWrapper.getColumnResized()(column);}};ColumnController.prototype.updateGroupWidthsAfterColumnResize=function(column){if(this.columnGroups){this.columnGroups.forEach(function(columnGroup){if(columnGroup.displayedColumns.indexOf(column)>=0){columnGroup.calculateActualWidth();}});}};ColumnController.prototype.setColumnAggFunction=function(column,aggFunc){column.aggFunc=aggFunc;this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_VALUE_CHANGE));};ColumnController.prototype.movePivotColumn=function(fromIndex,toIndex){var column=this.pivotColumns[fromIndex];this.pivotColumns.splice(fromIndex,1);this.pivotColumns.splice(toIndex,0,column);this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_PIVOT_CHANGE));};ColumnController.prototype.moveColumn=function(fromIndex,toIndex){var column=this.allColumns[fromIndex];this.allColumns.splice(fromIndex,1);this.allColumns.splice(toIndex,0,column);this.updateModel();var event=new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_COLUMN_MOVED).withFromIndex(fromIndex).withToIndex(toIndex);this.fireColumnChanged(event);if(typeof this.gridOptionsWrapper.getColumnOrderChanged()==="function"){console.warn("ag-Grid: gridOptions.columnOrderChanged is deprecated, use the column API and events instead");this.gridOptionsWrapper.getColumnOrderChanged()(this.allColumns);}};ColumnController.prototype.getBodyContainerWidth=function(){return this.getTotalColWidth(false);};ColumnController.prototype.getValueColumns=function(){return this.valueColumns;};ColumnController.prototype.getPivotedColumns=function(){return this.pivotColumns;};ColumnController.prototype.getDisplayedColumns=function(){return this.displayedColumns;};ColumnController.prototype.getAllColumns=function(){return this.allColumns;};ColumnController.prototype.setColumnVisible=function(column,visible){column.visible=visible;this.updateModel();this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_COLUMN_VISIBLE).withColumn(column));if(typeof this.gridOptionsWrapper.getColumnVisibilityChanged()==="function"){console.warn("agGrid: gridOptions.columnVisibilityChanged is deprecated - use the column events instead");this.gridOptionsWrapper.getColumnVisibilityChanged()(this.allColumns);}};ColumnController.prototype.getVisibleColBefore=function(col){var oldIndex=this.visibleColumns.indexOf(col);if(oldIndex>0){return this.visibleColumns[oldIndex-1];}else{return null;}};ColumnController.prototype.getVisibleColAfter=function(col){var oldIndex=this.visibleColumns.indexOf(col);if(oldIndex<(this.visibleColumns.length-1)){return this.visibleColumns[oldIndex+1];}else{return null;}};ColumnController.prototype.isPinning=function(){return this.visibleColumns&&this.visibleColumns.length>0&&this.visibleColumns[0].pinned;};ColumnController.prototype.getState=function(){if(!this.allColumns||this.allColumns.length<0){return[];}var result=[];for(var i=0;i<this.allColumns.length;i++){var column=this.allColumns[i];var pivotIndex=this.pivotColumns.indexOf(column);var resultItem={colId:column.colId,hide:!column.visible,aggFunc:column.aggFunc?column.aggFunc:null,width:column.actualWidth,pivotIndex:pivotIndex>=0?pivotIndex:null};result.push(resultItem);}return result;};ColumnController.prototype.setState=function(columnState){var oldColumnList=this.allColumns;this.allColumns=[];this.pivotColumns=[];this.valueColumns=[];var that=this;_.forEach(columnState,function(stateItem){var oldColumn=_.find(oldColumnList,"colId",stateItem.colId);if(!oldColumn){console.warn("ag-grid: column "+stateItem.colId+" not found");return;}oldColumn.visible=stateItem.hide?false:true;oldColumn.actualWidth=stateItem.width>=constants.MIN_COL_WIDTH?stateItem.width:oldColumn.actualWidth;var aggFuncValid=[constants.MIN,constants.MAX,constants.SUM].indexOf(stateItem.aggFunc)>=0;if(aggFuncValid){oldColumn.aggFunc=stateItem.aggFunc;that.valueColumns.push(oldColumn);}else{oldColumn.aggFunc=null;}if(typeof stateItem.pivotIndex==="number"&&stateItem.pivotIndex>=0){that.pivotColumns.push(oldColumn);}that.allColumns.push(oldColumn);oldColumnList.splice(oldColumnList.indexOf(oldColumn),1);});_.forEach(oldColumnList,function(oldColumn){oldColumn.visible=false;oldColumn.aggFunc=null;that.allColumns.push(oldColumn);});this.pivotColumns.sort(function(colA,colB){return colA.pivotIndex-colB.pivotIndex;});this.updateModel();this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_EVERYTHING));};ColumnController.prototype.getColumn=function(key){if(!key){return null;}var listsToCheck=[this.allColumns,this.visibleColumns];for(var j=0;j<listsToCheck.length;j++){var list=listsToCheck[j];if(!list){continue;}for(var i=0;i<list.length;i++){var colDefMatches=list[i].colDef===key;var idMatches=list[i].colId===key;if(colDefMatches||idMatches){return list[i];}}}};ColumnController.prototype.getDisplayNameForCol=function(column){var colDef=column.colDef;var headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){var params={colDef:colDef,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};if(typeof headerValueGetter==="function"){return headerValueGetter(params);}else{if(typeof headerValueGetter==="string"){return this.expressionService.evaluate(headerValueGetter,params);}else{console.warn("ag-grid: headerValueGetter must be a function or a string");}}}else{if(colDef.displayName){console.warn("ag-grid: Found displayName "+colDef.displayName+", please use headerName instead, displayName is deprecated.");return colDef.displayName;}else{return colDef.headerName;}}};ColumnController.prototype.addChangeListener=function(listener){this.changedListeners.push(listener);};ColumnController.prototype.getColumnGroup=function(name){if(!name){return null;}if(this.columnGroups){for(var i=0;i<this.columnGroups.length;i++){if(this.columnGroups[i].name===name){return this.columnGroups[i];}}}};ColumnController.prototype.fireColumnChanged=function(event){for(var i=0;i<this.changedListeners.length;i++){this.changedListeners[i](event);}this.masterSlaveController.fireColumnEvent(event);};ColumnController.prototype.onColumnsChanged=function(){var columnDefs=this.gridOptionsWrapper.getColumnDefs();this.checkForDeprecatedItems(columnDefs);this.createColumns(columnDefs);this.createPivotColumns();this.createValueColumns();this.updateModel();this.fireColumnChanged(new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_EVERYTHING));this.setupComplete=true;};ColumnController.prototype.checkForDeprecatedItems=function(columnDefs){if(columnDefs){for(var i=0;i<columnDefs.length;i++){var colDef=columnDefs[i];if(colDef.group!==undefined){console.warn("ag-grid: "+colDef.field+" colDef.group is deprecated, please use colDef.headerGroup");colDef.headerGroup=colDef.group;}if(colDef.groupShow!==undefined){console.warn("ag-grid: "+colDef.field+" colDef.groupShow is deprecated, please use colDef.headerGroupShow");colDef.headerGroupShow=colDef.groupShow;}}}};ColumnController.prototype.columnGroupOpened=function(group,newValue){group.expanded=newValue;this.updateGroups();this.updateDisplayedColumns();var event=new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_COLUMN_GROUP_OPENED).withColumnGroup(group);this.fireColumnChanged(event);};ColumnController.prototype.hideColumns=function(colIds,hide){var _this=this;var updatedCols=[];this.allColumns.forEach(function(column){var idThisCol=column.colId;var hideThisCol=colIds.indexOf(idThisCol)>=0;var newVisible=!hide;if(hideThisCol&&column.visible!==newVisible){column.visible=newVisible;updatedCols.push(column);}});if(updatedCols.length>0){this.updateModel();updatedCols.forEach(function(column){var event=new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_COLUMN_VISIBLE).withColumn(column);_this.fireColumnChanged(event);});}};ColumnController.prototype.updateModel=function(){this.updateVisibleColumns();this.updatePinnedColumns();this.buildGroups();this.updateGroups();this.updateDisplayedColumns();};ColumnController.prototype.updateDisplayedColumns=function(){if(!this.gridOptionsWrapper.isGroupHeaders()){this.displayedColumns=this.visibleColumns;}else{this.displayedColumns=[];for(var i=0;i<this.columnGroups.length;i++){var group=this.columnGroups[i];group.addToVisibleColumns(this.displayedColumns);}}};ColumnController.prototype.sizeColumnsToFit=function(gridWidth){var _this=this;if(gridWidth<=0||this.displayedColumns.length===0){return;}var colsToNotSpread=_.filter(this.displayedColumns,function(column){return column.colDef.suppressSizeToFit===true;});var colsToSpread=_.filter(this.displayedColumns,function(column){return column.colDef.suppressSizeToFit!==true;});var colsToFireEventFor=colsToSpread.slice(0);var finishedResizing=false;while(!finishedResizing){finishedResizing=true;var availablePixels=gridWidth-getTotalWidth(colsToNotSpread);if(availablePixels<=0){colsToSpread.forEach(function(column){column.setMinimum();_this.updateGroupWidthsAfterColumnResize(column);});}else{var scale=availablePixels/getTotalWidth(colsToSpread);var pixelsForLastCol=availablePixels;for(var i=colsToSpread.length-1;i>=0;i--){var column=colsToSpread[i];var newWidth=Math.round(column.actualWidth*scale);if(newWidth<column.getMinimumWidth()){column.setMinimum();moveToNotSpread(column);finishedResizing=false;}else{if(column.isGreaterThanMax(newWidth)){column.actualWidth=column.colDef.maxWidth;moveToNotSpread(column);finishedResizing=false;}else{var onLastCol=i===0;if(onLastCol){column.actualWidth=pixelsForLastCol;}else{pixelsForLastCol-=newWidth;column.actualWidth=newWidth;}}}this.updateGroupWidthsAfterColumnResize(column);}}}colsToFireEventFor.forEach(function(column){var event=new grid.ColumnChangeEvent(grid.ColumnChangeEvent.TYPE_COLUMN_RESIZED).withColumn(column);_this.fireColumnChanged(event);});function moveToNotSpread(column){_.removeFromArray(colsToSpread,column);colsToNotSpread.push(column);}function getTotalWidth(columns){var result=0;for(var i=0;i<columns.length;i++){result+=columns[i].actualWidth;}return result;}};ColumnController.prototype.buildGroups=function(){if(!this.gridOptionsWrapper.isGroupHeaders()){this.columnGroups=null;return;}var currentGroup=null;this.columnGroups=[];var that=this;var lastColWasPinned=true;this.visibleColumns.forEach(function(column){var endOfPinnedHeader=lastColWasPinned&&!column.pinned;if(!column.pinned){lastColWasPinned=false;}var groupKeyMismatch=currentGroup&&column.colDef.headerGroup!==currentGroup.name;var colNotInGroup=currentGroup&&!currentGroup.name;var processingFirstCol=currentGroup===null;var newGroupNeeded=processingFirstCol||endOfPinnedHeader||groupKeyMismatch||colNotInGroup;if(newGroupNeeded){var pinned=column.pinned;currentGroup=new grid.ColumnGroup(pinned,column.colDef.headerGroup);that.columnGroups.push(currentGroup);}currentGroup.addColumn(column);});};ColumnController.prototype.updateGroups=function(){if(!this.gridOptionsWrapper.isGroupHeaders()){return;}for(var i=0;i<this.columnGroups.length;i++){var group=this.columnGroups[i];group.calculateExpandable();group.calculateDisplayedColumns();group.calculateActualWidth();}};ColumnController.prototype.updateVisibleColumns=function(){this.visibleColumns=[];var needAGroupColumn=this.pivotColumns.length>0&&!this.gridOptionsWrapper.isGroupSuppressAutoColumn()&&!this.gridOptionsWrapper.isGroupUseEntireRow()&&!this.gridOptionsWrapper.isGroupSuppressRow();var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();if(needAGroupColumn){var groupColDef=this.gridOptionsWrapper.getGroupColumnDef();if(!groupColDef){groupColDef={headerName:localeTextFunc("group","Group"),cellRenderer:{renderer:"group"}};}var groupColumnWidth=this.calculateColInitialWidth(groupColDef);var groupColumn=new grid.Column(groupColDef,groupColumnWidth);this.visibleColumns.push(groupColumn);}for(var i=0;i<this.allColumns.length;i++){var column=this.allColumns[i];var hideBecauseOfPivot=this.pivotColumns.indexOf(column)>=0&&this.gridOptionsWrapper.isGroupHidePivotColumns();if(column.visible&&!hideBecauseOfPivot){column.index=this.visibleColumns.length;this.visibleColumns.push(this.allColumns[i]);}}};ColumnController.prototype.updatePinnedColumns=function(){for(var i=0;i<this.visibleColumns.length;i++){var pinned=i<this.pinnedColumnCount;this.visibleColumns[i].pinned=pinned;}};ColumnController.prototype.createColumns=function(colDefs){this.allColumns=[];if(colDefs){for(var i=0;i<colDefs.length;i++){var colDef=colDefs[i];var width=this.calculateColInitialWidth(colDef);var column=new grid.Column(colDef,width);this.allColumns.push(column);}}};ColumnController.prototype.createPivotColumns=function(){this.pivotColumns=[];var groupKeys=this.gridOptionsWrapper.getGroupKeys();if(!groupKeys||groupKeys.length<=0){return;}for(var i=0;i<groupKeys.length;i++){var groupKey=groupKeys[i];var column=this.getColumn(groupKey);if(!column){column=this.createDummyColumn(groupKey);}this.pivotColumns.push(column);}};ColumnController.prototype.createValueColumns=function(){this.valueColumns=[];for(var i=0;i<this.allColumns.length;i++){var column=this.allColumns[i];if(column.colDef.aggFunc){column.aggFunc=column.colDef.aggFunc;this.valueColumns.push(column);}}};ColumnController.prototype.createDummyColumn=function(field){var colDef={field:field,headerName:field,hide:false};var width=this.gridOptionsWrapper.getColWidth();var column=new grid.Column(colDef,width);return column;};ColumnController.prototype.calculateColInitialWidth=function(colDef){if(!colDef.width){return this.gridOptionsWrapper.getColWidth();}else{if(colDef.width<constants.MIN_COL_WIDTH){return constants.MIN_COL_WIDTH;}else{return colDef.width;}}};ColumnController.prototype.getTotalColWidth=function(includePinned){var widthSoFar=0;var pinedNotImportant=typeof includePinned!=="boolean";this.displayedColumns.forEach(function(column){var includeThisCol=pinedNotImportant||column.pinned===includePinned;if(includeThisCol){widthSoFar+=column.actualWidth;}});return widthSoFar;};return ColumnController;})();grid.ColumnController=ColumnController;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var ExpressionService=(function(){function ExpressionService(){this.expressionToFunctionCache={};}ExpressionService.prototype.init=function(loggerFactory){this.logger=loggerFactory.create("ExpressionService");};ExpressionService.prototype.evaluate=function(expression,params){try{var javaScriptFunction=this.createExpressionFunction(expression);var result=javaScriptFunction(params.value,params.context,params.node,params.data,params.colDef,params.rowIndex,params.api,params.getValue);return result;}catch(e){this.logger.log("Processing of the expression failed");this.logger.log("Expression = "+expression);this.logger.log("Exception = "+e);return null;}};ExpressionService.prototype.createExpressionFunction=function(expression){if(this.expressionToFunctionCache[expression]){return this.expressionToFunctionCache[expression];}var functionBody=this.createFunctionBody(expression);var theFunction=new Function("x, ctx, node, data, colDef, rowIndex, api, getValue",functionBody);this.expressionToFunctionCache[expression]=theFunction;return theFunction;};ExpressionService.prototype.createFunctionBody=function(expression){if(expression.indexOf("return")>=0){return expression;}else{return"return "+expression+";";}};return ExpressionService;})();grid.ExpressionService=ExpressionService;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var template="<div>"+"<div>"+'<select class="ag-filter-select" id="filterType">'+'<option value="1">[CONTAINS]</option>'+'<option value="2">[EQUALS]</option>'+'<option value="3">[STARTS WITH]</option>'+'<option value="4">[ENDS WITH]</option>'+"</select>"+"</div>"+"<div>"+'<input class="ag-filter-filter" id="filterText" type="text" placeholder="[FILTER...]"/>'+"</div>"+'<div class="ag-filter-apply-panel" id="applyPanel">'+'<button type="button" id="applyButton">[APPLY FILTER]</button>'+"</div>"+"</div>";var CONTAINS=1;var EQUALS=2;var STARTS_WITH=3;var ENDS_WITH=4;var TextFilter=(function(){function TextFilter(){}TextFilter.prototype.init=function(params){this.filterParams=params.filterParams;this.applyActive=this.filterParams&&this.filterParams.apply==true;this.filterChangedCallback=params.filterChangedCallback;this.filterModifiedCallback=params.filterModifiedCallback;this.localeTextFunc=params.localeTextFunc;this.valueGetter=params.valueGetter;this.createGui();this.filterText=null;this.filterType=CONTAINS;this.createApi();};TextFilter.prototype.onNewRowsLoaded=function(){var keepSelection=this.filterParams&&this.filterParams.newRowsAction==="keep";if(!keepSelection){this.api.setType(CONTAINS);this.api.setFilter(null);}};TextFilter.prototype.afterGuiAttached=function(){this.eFilterTextField.focus();};TextFilter.prototype.doesFilterPass=function(node){if(!this.filterText){return true;}var value=this.valueGetter(node);if(!value){return false;}var valueLowerCase=value.toString().toLowerCase();switch(this.filterType){case CONTAINS:return valueLowerCase.indexOf(this.filterText)>=0;case EQUALS:return valueLowerCase===this.filterText;case STARTS_WITH:return valueLowerCase.indexOf(this.filterText)===0;case ENDS_WITH:var index=valueLowerCase.indexOf(this.filterText);return index>=0&&index===(valueLowerCase.length-this.filterText.length);default:console.warn("invalid filter type "+this.filterType);return false;}};TextFilter.prototype.getGui=function(){return this.eGui;};TextFilter.prototype.isFilterActive=function(){return this.filterText!==null;};TextFilter.prototype.createTemplate=function(){return template.replace("[FILTER...]",this.localeTextFunc("filterOoo","Filter...")).replace("[EQUALS]",this.localeTextFunc("equals","Equals")).replace("[CONTAINS]",this.localeTextFunc("contains","Contains")).replace("[STARTS WITH]",this.localeTextFunc("startsWith","Starts with")).replace("[ENDS WITH]",this.localeTextFunc("endsWith","Ends with")).replace("[APPLY FILTER]",this.localeTextFunc("applyFilter","Apply Filter"));};TextFilter.prototype.createGui=function(){this.eGui=utils.loadTemplate(this.createTemplate());this.eFilterTextField=this.eGui.querySelector("#filterText");this.eTypeSelect=this.eGui.querySelector("#filterType");utils.addChangeListener(this.eFilterTextField,this.onFilterChanged.bind(this));this.eTypeSelect.addEventListener("change",this.onTypeChanged.bind(this));this.setupApply();};TextFilter.prototype.setupApply=function(){var _this=this;if(this.applyActive){this.eApplyButton=this.eGui.querySelector("#applyButton");this.eApplyButton.addEventListener("click",function(){_this.filterChangedCallback();});}else{utils.removeElement(this.eGui,"#applyPanel");}};TextFilter.prototype.onTypeChanged=function(){this.filterType=parseInt(this.eTypeSelect.value);this.filterChanged();};TextFilter.prototype.onFilterChanged=function(){var filterText=utils.makeNull(this.eFilterTextField.value);if(filterText&&filterText.trim()===""){filterText=null;}var newFilterText;if(filterText!==null&&filterText!==undefined){newFilterText=filterText.toLowerCase();}else{newFilterText=null;}if(this.filterText!==newFilterText){this.filterText=newFilterText;this.filterChanged();}};TextFilter.prototype.filterChanged=function(){this.filterModifiedCallback();if(!this.applyActive){this.filterChangedCallback();}};TextFilter.prototype.createApi=function(){var that=this;this.api={EQUALS:EQUALS,CONTAINS:CONTAINS,STARTS_WITH:STARTS_WITH,ENDS_WITH:ENDS_WITH,setType:function(type){that.filterType=type;that.eTypeSelect.value=type;},setFilter:function(filter){filter=utils.makeNull(filter);if(filter){that.filterText=filter.toLowerCase();that.eFilterTextField.value=filter;}else{that.filterText=null;that.eFilterTextField.value=null;}},getType:function(){return that.filterType;},getFilter:function(){return that.filterText;},getModel:function(){if(that.isFilterActive()){return{type:that.filterType,filter:that.filterText};}else{return null;}},setModel:function(dataModel){if(dataModel){this.setType(dataModel.type);this.setFilter(dataModel.filter);}else{this.setFilter(null);}}};};TextFilter.prototype.getApi=function(){return this.api;};return TextFilter;})();grid.TextFilter=TextFilter;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var template="<div>"+"<div>"+'<select class="ag-filter-select" id="filterType">'+'<option value="1">[EQUALS]</option>'+'<option value="2">[LESS THAN]</option>'+'<option value="3">[GREATER THAN]</option>'+"</select>"+"</div>"+"<div>"+'<input class="ag-filter-filter" id="filterText" type="text" placeholder="[FILTER...]"/>'+"</div>"+'<div class="ag-filter-apply-panel" id="applyPanel">'+'<button type="button" id="applyButton">[APPLY FILTER]</button>'+"</div>"+"</div>";var EQUALS=1;var LESS_THAN=2;var GREATER_THAN=3;var NumberFilter=(function(){function NumberFilter(){}NumberFilter.prototype.init=function(params){this.filterParams=params.filterParams;this.applyActive=this.filterParams&&this.filterParams.apply==true;this.filterChangedCallback=params.filterChangedCallback;this.filterModifiedCallback=params.filterModifiedCallback;this.localeTextFunc=params.localeTextFunc;this.valueGetter=params.valueGetter;this.createGui();this.filterNumber=null;this.filterType=EQUALS;this.createApi();};NumberFilter.prototype.onNewRowsLoaded=function(){var keepSelection=this.filterParams&&this.filterParams.newRowsAction==="keep";if(!keepSelection){this.api.setType(EQUALS);this.api.setFilter(null);}};NumberFilter.prototype.afterGuiAttached=function(){this.eFilterTextField.focus();};NumberFilter.prototype.doesFilterPass=function(node){if(this.filterNumber===null){return true;}var value=this.valueGetter(node);if(!value&&value!==0){return false;}var valueAsNumber;if(typeof value==="number"){valueAsNumber=value;}else{valueAsNumber=parseFloat(value);}switch(this.filterType){case EQUALS:return valueAsNumber===this.filterNumber;case LESS_THAN:return valueAsNumber<this.filterNumber;case GREATER_THAN:return valueAsNumber>this.filterNumber;default:console.warn("invalid filter type "+this.filterType);return false;}};NumberFilter.prototype.getGui=function(){return this.eGui;};NumberFilter.prototype.isFilterActive=function(){return this.filterNumber!==null;};NumberFilter.prototype.createTemplate=function(){return template.replace("[FILTER...]",this.localeTextFunc("filterOoo","Filter...")).replace("[EQUALS]",this.localeTextFunc("equals","Equals")).replace("[LESS THAN]",this.localeTextFunc("lessThan","Less than")).replace("[GREATER THAN]",this.localeTextFunc("greaterThan","Greater than")).replace("[APPLY FILTER]",this.localeTextFunc("applyFilter","Apply Filter"));};NumberFilter.prototype.createGui=function(){this.eGui=utils.loadTemplate(this.createTemplate());this.eFilterTextField=this.eGui.querySelector("#filterText");this.eTypeSelect=this.eGui.querySelector("#filterType");utils.addChangeListener(this.eFilterTextField,this.onFilterChanged.bind(this));this.eTypeSelect.addEventListener("change",this.onTypeChanged.bind(this));this.setupApply();};NumberFilter.prototype.setupApply=function(){var _this=this;if(this.applyActive){this.eApplyButton=this.eGui.querySelector("#applyButton");this.eApplyButton.addEventListener("click",function(){_this.filterChangedCallback();});}else{utils.removeElement(this.eGui,"#applyPanel");}};NumberFilter.prototype.onTypeChanged=function(){this.filterType=parseInt(this.eTypeSelect.value);this.filterChanged();};NumberFilter.prototype.filterChanged=function(){this.filterModifiedCallback();if(!this.applyActive){this.filterChangedCallback();}};NumberFilter.prototype.onFilterChanged=function(){var filterText=utils.makeNull(this.eFilterTextField.value);if(filterText&&filterText.trim()===""){filterText=null;}var newFilter;if(filterText!==null&&filterText!==undefined){newFilter=parseFloat(filterText);}else{newFilter=null;}if(this.filterNumber!==newFilter){this.filterNumber=newFilter;this.filterChanged();}};NumberFilter.prototype.createApi=function(){var that=this;this.api={EQUALS:EQUALS,LESS_THAN:LESS_THAN,GREATER_THAN:GREATER_THAN,setType:function(type){that.filterType=type;that.eTypeSelect.value=type;},setFilter:function(filter){filter=utils.makeNull(filter);if(filter!==null&&!(typeof filter==="number")){filter=parseFloat(filter);}that.filterNumber=filter;that.eFilterTextField.value=filter;},getType:function(){return that.filterType;},getFilter:function(){return that.filterNumber;},getModel:function(){if(that.isFilterActive()){return{type:that.filterType,filter:that.filterNumber};}else{return null;}},setModel:function(dataModel){if(dataModel){this.setType(dataModel.type);this.setFilter(dataModel.filter);}else{this.setFilter(null);}}};};NumberFilter.prototype.getApi=function(){return this.api;};return NumberFilter;})();grid.NumberFilter=NumberFilter;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var SetFilterModel=(function(){function SetFilterModel(colDef,rowModel,valueGetter,doesRowPassOtherFilters){this.colDef=colDef;this.rowModel=rowModel;this.valueGetter=valueGetter;this.doesRowPassOtherFilters=doesRowPassOtherFilters;this.filterParams=this.colDef.filterParams;this.usingProvidedSet=this.filterParams&&this.filterParams.values;this.showingAvailableOnly=this.filterParams&&!this.filterParams.suppressRemoveEntries;this.createAllUniqueValues();this.createAvailableUniqueValues();this.displayedValues=this.availableUniqueValues;this.miniFilter=null;this.selectedValuesMap={};this.selectEverything();}SetFilterModel.prototype.refreshAfterNewRowsLoaded=function(keepSelection,isSelectAll){this.createAllUniqueValues();this.createAvailableUniqueValues();var oldModel=Object.keys(this.selectedValuesMap);this.selectedValuesMap={};this.processMiniFilter();if(keepSelection){this.setModel(oldModel,isSelectAll);}else{this.selectEverything();}};SetFilterModel.prototype.refreshAfterAnyFilterChanged=function(){if(this.showingAvailableOnly){this.createAvailableUniqueValues();this.processMiniFilter();}};SetFilterModel.prototype.createAllUniqueValues=function(){if(this.usingProvidedSet){this.allUniqueValues=_.toStrings(this.filterParams.values);}else{this.allUniqueValues=_.toStrings(this.getUniqueValues(false));}if(this.colDef.comparator){this.allUniqueValues.sort(this.colDef.comparator);}else{this.allUniqueValues.sort(_.defaultComparator);}};SetFilterModel.prototype.createAvailableUniqueValues=function(){var dontCheckAvailableValues=!this.showingAvailableOnly||this.usingProvidedSet;if(dontCheckAvailableValues){this.availableUniqueValues=this.allUniqueValues;return;}this.availableUniqueValues=_.toStrings(this.getUniqueValues(true));if(this.colDef.comparator){this.availableUniqueValues.sort(this.colDef.comparator);}else{this.availableUniqueValues.sort(_.defaultComparator);}};SetFilterModel.prototype.getUniqueValues=function(filterOutNotAvailable){var _this=this;var uniqueCheck={};var result=[];this.rowModel.forEachInMemory(function(node){if(!node.group){var value=_this.valueGetter(node);if(value===""||value===undefined){value=null;}if(filterOutNotAvailable){if(!_this.doesRowPassOtherFilters(node)){return;}}if(value!=null&&Array.isArray(value)){for(var j=0;j<value.length;j++){addUniqueValueIfMissing(value[j]);}}else{addUniqueValueIfMissing(value);}}});function addUniqueValueIfMissing(value){if(!uniqueCheck.hasOwnProperty(value)){result.push(value);uniqueCheck[value]=1;}}return result;};SetFilterModel.prototype.setMiniFilter=function(newMiniFilter){newMiniFilter=_.makeNull(newMiniFilter);if(this.miniFilter===newMiniFilter){return false;}this.miniFilter=newMiniFilter;this.processMiniFilter();return true;};SetFilterModel.prototype.getMiniFilter=function(){return this.miniFilter;};SetFilterModel.prototype.processMiniFilter=function(){if(this.miniFilter===null){this.displayedValues=this.availableUniqueValues;return;}this.displayedValues=[];var miniFilterUpperCase=this.miniFilter.toUpperCase();for(var i=0,l=this.availableUniqueValues.length;i<l;i++){var filteredValue=this.availableUniqueValues[i];if(filteredValue!==null&&filteredValue.toString().toUpperCase().indexOf(miniFilterUpperCase)>=0){this.displayedValues.push(filteredValue);}}};SetFilterModel.prototype.getDisplayedValueCount=function(){return this.displayedValues.length;};SetFilterModel.prototype.getDisplayedValue=function(index){return this.displayedValues[index];};SetFilterModel.prototype.selectEverything=function(){var count=this.allUniqueValues.length;for(var i=0;i<count;i++){var value=this.allUniqueValues[i];this.selectedValuesMap[value]=null;}this.selectedValuesCount=count;};SetFilterModel.prototype.isFilterActive=function(){return this.allUniqueValues.length!==this.selectedValuesCount;};SetFilterModel.prototype.selectNothing=function(){this.selectedValuesMap={};this.selectedValuesCount=0;};SetFilterModel.prototype.getUniqueValueCount=function(){return this.allUniqueValues.length;};SetFilterModel.prototype.getUniqueValue=function(index){return this.allUniqueValues[index];};SetFilterModel.prototype.unselectValue=function(value){if(this.selectedValuesMap[value]!==undefined){delete this.selectedValuesMap[value];this.selectedValuesCount--;}};SetFilterModel.prototype.selectValue=function(value){if(this.selectedValuesMap[value]===undefined){this.selectedValuesMap[value]=null;this.selectedValuesCount++;}};SetFilterModel.prototype.isValueSelected=function(value){return this.selectedValuesMap[value]!==undefined;};SetFilterModel.prototype.isEverythingSelected=function(){return this.allUniqueValues.length===this.selectedValuesCount;};SetFilterModel.prototype.isNothingSelected=function(){return this.allUniqueValues.length===0;};SetFilterModel.prototype.getModel=function(){if(!this.isFilterActive()){return null;}var selectedValues=[];_.iterateObject(this.selectedValuesMap,function(key){selectedValues.push(key);});return selectedValues;};SetFilterModel.prototype.setModel=function(model,isSelectAll){if(model&&!isSelectAll){this.selectNothing();for(var i=0;i<model.length;i++){var newValue=model[i];if(this.allUniqueValues.indexOf(newValue)>=0){this.selectValue(model[i]);}else{console.warn("Value "+newValue+" is not a valid value for filter");}}}else{this.selectEverything();}};return SetFilterModel;})();grid.SetFilterModel=SetFilterModel;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var template="<div>"+'<div class="ag-filter-header-container">'+'<input class="ag-filter-filter" type="text" placeholder="[SEARCH...]"/>'+"</div>"+'<div class="ag-filter-header-container">'+"<label>"+'<input id="selectAll" type="checkbox" class="ag-filter-checkbox"/>'+"([SELECT ALL])"+"</label>"+"</div>"+'<div class="ag-filter-list-viewport">'+'<div class="ag-filter-list-container">'+'<div id="itemForRepeat" class="ag-filter-item">'+"<label>"+'<input type="checkbox" class="ag-filter-checkbox" filter-checkbox="true"/>'+'<span class="ag-filter-value"></span>'+"</label>"+"</div>"+"</div>"+"</div>"+'<div class="ag-filter-apply-panel" id="applyPanel">'+'<button type="button" id="applyButton">[APPLY FILTER]</button>'+"</div>"+"</div>";var DEFAULT_ROW_HEIGHT=20;var SetFilter=(function(){function SetFilter(){}SetFilter.prototype.init=function(params){this.filterParams=params.filterParams;this.rowHeight=(this.filterParams&&this.filterParams.cellHeight)?this.filterParams.cellHeight:DEFAULT_ROW_HEIGHT;this.applyActive=this.filterParams&&this.filterParams.apply==true;this.model=new grid.SetFilterModel(params.colDef,params.rowModel,params.valueGetter,params.doesRowPassOtherFilter);this.filterChangedCallback=params.filterChangedCallback;this.filterModifiedCallback=params.filterModifiedCallback;this.valueGetter=params.valueGetter;this.rowsInBodyContainer={};this.colDef=params.colDef;this.localeTextFunc=params.localeTextFunc;if(this.filterParams){this.cellRenderer=this.filterParams.cellRenderer;}this.createGui();this.addScrollListener();this.createApi();};SetFilter.prototype.afterGuiAttached=function(){this.drawVirtualRows();};SetFilter.prototype.isFilterActive=function(){return this.model.isFilterActive();};SetFilter.prototype.doesFilterPass=function(node){if(this.model.isEverythingSelected()){return true;}if(this.model.isNothingSelected()){return false;}var value=this.valueGetter(node);value=_.makeNull(value);if(Array.isArray(value)){for(var i=0;i<value.length;i++){if(this.model.isValueSelected(value[i])){return true;}}return false;}else{return this.model.isValueSelected(value);}};SetFilter.prototype.getGui=function(){return this.eGui;};SetFilter.prototype.onNewRowsLoaded=function(){var keepSelection=this.filterParams&&this.filterParams.newRowsAction==="keep";var isSelectAll=this.eSelectAll&&this.eSelectAll.checked&&!this.eSelectAll.indeterminate;this.model.refreshAfterNewRowsLoaded(keepSelection,isSelectAll);this.setContainerHeight();this.refreshVirtualRows();};SetFilter.prototype.onAnyFilterChanged=function(){this.model.refreshAfterAnyFilterChanged();this.setContainerHeight();this.refreshVirtualRows();};SetFilter.prototype.createTemplate=function(){return template.replace("[SELECT ALL]",this.localeTextFunc("selectAll","Select All")).replace("[SEARCH...]",this.localeTextFunc("searchOoo","Search...")).replace("[APPLY FILTER]",this.localeTextFunc("applyFilter","Apply Filter"));};SetFilter.prototype.createGui=function(){var _this=this;this.eGui=_.loadTemplate(this.createTemplate());this.eListContainer=this.eGui.querySelector(".ag-filter-list-container");this.eFilterValueTemplate=this.eGui.querySelector("#itemForRepeat");this.eSelectAll=this.eGui.querySelector("#selectAll");this.eListViewport=this.eGui.querySelector(".ag-filter-list-viewport");this.eMiniFilter=this.eGui.querySelector(".ag-filter-filter");this.eListContainer.style.height=(this.model.getUniqueValueCount()*this.rowHeight)+"px";this.setContainerHeight();this.eMiniFilter.value=this.model.getMiniFilter();_.addChangeListener(this.eMiniFilter,function(){_this.onMiniFilterChanged();});_.removeAllChildren(this.eListContainer);this.eSelectAll.onclick=this.onSelectAll.bind(this);if(this.model.isEverythingSelected()){this.eSelectAll.indeterminate=false;this.eSelectAll.checked=true;}else{if(this.model.isNothingSelected()){this.eSelectAll.indeterminate=false;this.eSelectAll.checked=false;}else{this.eSelectAll.indeterminate=true;}}this.setupApply();};SetFilter.prototype.setupApply=function(){var _this=this;if(this.applyActive){this.eApplyButton=this.eGui.querySelector("#applyButton");this.eApplyButton.addEventListener("click",function(){_this.filterChangedCallback();});}else{_.removeElement(this.eGui,"#applyPanel");}};SetFilter.prototype.setContainerHeight=function(){this.eListContainer.style.height=(this.model.getDisplayedValueCount()*this.rowHeight)+"px";};SetFilter.prototype.drawVirtualRows=function(){var topPixel=this.eListViewport.scrollTop;var bottomPixel=topPixel+this.eListViewport.offsetHeight;var firstRow=Math.floor(topPixel/this.rowHeight);var lastRow=Math.floor(bottomPixel/this.rowHeight);this.ensureRowsRendered(firstRow,lastRow);};SetFilter.prototype.ensureRowsRendered=function(start,finish){var _this=this;var rowsToRemove=Object.keys(this.rowsInBodyContainer);for(var rowIndex=start;rowIndex<=finish;rowIndex++){if(rowsToRemove.indexOf(rowIndex.toString())>=0){rowsToRemove.splice(rowsToRemove.indexOf(rowIndex.toString()),1);continue;}if(this.model.getDisplayedValueCount()>rowIndex){var value=this.model.getDisplayedValue(rowIndex);_this.insertRow(value,rowIndex);}}this.removeVirtualRows(rowsToRemove);};SetFilter.prototype.removeVirtualRows=function(rowsToRemove){var _this=this;rowsToRemove.forEach(function(indexToRemove){var eRowToRemove=_this.rowsInBodyContainer[indexToRemove];_this.eListContainer.removeChild(eRowToRemove);delete _this.rowsInBodyContainer[indexToRemove];});};SetFilter.prototype.insertRow=function(value,rowIndex){var _this=this;var eFilterValue=this.eFilterValueTemplate.cloneNode(true);var valueElement=eFilterValue.querySelector(".ag-filter-value");if(this.cellRenderer){var resultFromRenderer=this.cellRenderer({value:value});if(_.isNode(resultFromRenderer)){valueElement.appendChild(resultFromRenderer);}else{valueElement.innerHTML=resultFromRenderer;}}else{var blanksText="("+this.localeTextFunc("blanks","Blanks")+")";var displayNameOfValue=value===null?blanksText:value;valueElement.innerHTML=displayNameOfValue;}var eCheckbox=eFilterValue.querySelector("input");eCheckbox.checked=this.model.isValueSelected(value);eCheckbox.onclick=function(){_this.onCheckboxClicked(eCheckbox,value);};eFilterValue.style.top=(this.rowHeight*rowIndex)+"px";this.eListContainer.appendChild(eFilterValue);this.rowsInBodyContainer[rowIndex]=eFilterValue;};SetFilter.prototype.onCheckboxClicked=function(eCheckbox,value){var checked=eCheckbox.checked;if(checked){this.model.selectValue(value);if(this.model.isEverythingSelected()){this.eSelectAll.indeterminate=false;this.eSelectAll.checked=true;}else{this.eSelectAll.indeterminate=true;}}else{this.model.unselectValue(value);if(this.model.isNothingSelected()){this.eSelectAll.indeterminate=false;this.eSelectAll.checked=false;}else{this.eSelectAll.indeterminate=true;}}this.filterChanged();};SetFilter.prototype.filterChanged=function(){this.filterModifiedCallback();if(!this.applyActive){this.filterChangedCallback();}};SetFilter.prototype.onMiniFilterChanged=function(){var miniFilterChanged=this.model.setMiniFilter(this.eMiniFilter.value);if(miniFilterChanged){this.setContainerHeight();this.refreshVirtualRows();}};SetFilter.prototype.refreshVirtualRows=function(){this.clearVirtualRows();this.drawVirtualRows();};SetFilter.prototype.clearVirtualRows=function(){var rowsToRemove=Object.keys(this.rowsInBodyContainer);this.removeVirtualRows(rowsToRemove);};SetFilter.prototype.onSelectAll=function(){var checked=this.eSelectAll.checked;if(checked){this.model.selectEverything();}else{this.model.selectNothing();}this.updateAllCheckboxes(checked);this.filterChanged();};SetFilter.prototype.updateAllCheckboxes=function(checked){var currentlyDisplayedCheckboxes=this.eListContainer.querySelectorAll("[filter-checkbox=true]");for(var i=0,l=currentlyDisplayedCheckboxes.length;i<l;i++){currentlyDisplayedCheckboxes[i].checked=checked;}};SetFilter.prototype.addScrollListener=function(){var _this=this;this.eListViewport.addEventListener("scroll",function(){_this.drawVirtualRows();});};SetFilter.prototype.getApi=function(){return this.api;};SetFilter.prototype.createApi=function(){var model=this.model;var that=this;this.api={setMiniFilter:function(newMiniFilter){model.setMiniFilter(newMiniFilter);},getMiniFilter:function(){return model.getMiniFilter();},selectEverything:function(){that.eSelectAll.indeterminate=false;that.eSelectAll.checked=true;model.selectEverything();},isFilterActive:function(){return model.isFilterActive();},selectNothing:function(){that.eSelectAll.indeterminate=false;that.eSelectAll.checked=false;model.selectNothing();},unselectValue:function(value){model.unselectValue(value);that.refreshVirtualRows();},selectValue:function(value){model.selectValue(value);that.refreshVirtualRows();},isValueSelected:function(value){return model.isValueSelected(value);},isEverythingSelected:function(){return model.isEverythingSelected();},isNothingSelected:function(){return model.isNothingSelected();},getUniqueValueCount:function(){return model.getUniqueValueCount();},getUniqueValue:function(index){return model.getUniqueValue(index);},getModel:function(){return model.getModel();},setModel:function(dataModel){model.setModel(dataModel);that.refreshVirtualRows();}};};return SetFilter;})();grid.SetFilter=SetFilter;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var PopupService=(function(){function PopupService(){}PopupService.prototype.init=function(ePopupParent){this.ePopupParent=ePopupParent;};PopupService.prototype.positionPopup=function(eventSource,ePopup,minWidth){var sourceRect=eventSource.getBoundingClientRect();var parentRect=this.ePopupParent.getBoundingClientRect();var x=sourceRect.left-parentRect.left;var y=sourceRect.top-parentRect.top+sourceRect.height;if(minWidth>0){var widthOfParent=parentRect.right-parentRect.left;var maxX=widthOfParent-minWidth;if(x>maxX){x=maxX;}if(x<0){x=0;}}ePopup.style.left=x+"px";ePopup.style.top=y+"px";};PopupService.prototype.addAsModalPopup=function(eChild,closeOnEsc){var eBody=document.body;if(!eBody){console.warn("ag-grid: could not find the body of the document, document.body is empty");return;}var popupAlreadyShown=_.isVisible(eChild);if(popupAlreadyShown){return;}this.ePopupParent.appendChild(eChild);var that=this;setTimeout(function(){if(closeOnEsc){eBody.addEventListener("keydown",hidePopupOnEsc);}eBody.addEventListener("click",hidePopup);eChild.addEventListener("click",consumeClick);},0);var eventFromChild=null;function hidePopupOnEsc(event){var key=event.which||event.keyCode;if(key===grid.Constants.KEY_ESCAPE){hidePopup(null);}}function hidePopup(event){if(event&&event===eventFromChild){return;}that.ePopupParent.removeChild(eChild);eBody.removeEventListener("keydown",hidePopupOnEsc);eBody.removeEventListener("click",hidePopup);eChild.removeEventListener("click",consumeClick);}function consumeClick(event){eventFromChild=event;}return hidePopup;};return PopupService;})();grid.PopupService=PopupService;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(_grid){var _=_grid.Utils;var FilterManager=(function(){function FilterManager(){}FilterManager.prototype.init=function(grid,gridOptionsWrapper,$compile,$scope,columnController,popupService,valueService){this.$compile=$compile;this.$scope=$scope;this.gridOptionsWrapper=gridOptionsWrapper;this.grid=grid;this.allFilters={};this.columnController=columnController;this.popupService=popupService;this.valueService=valueService;this.columnController=columnController;this.quickFilter=null;};FilterManager.prototype.setFilterModel=function(model){var _this=this;if(model){var modelKeys=Object.keys(model);_.iterateObject(this.allFilters,function(colId,filterWrapper){_.removeFromArray(modelKeys,colId);var newModel=model[colId];_this.setModelOnFilterWrapper(filterWrapper.filter,newModel);});_.iterateArray(modelKeys,function(colId){var column=_this.columnController.getColumn(colId);if(!column){console.warn("Warning ag-grid setFilterModel - no column found for colId "+colId);return;}var filterWrapper=_this.getOrCreateFilterWrapper(column);_this.setModelOnFilterWrapper(filterWrapper.filter,model[colId]);});}else{_.iterateObject(this.allFilters,function(key,filterWrapper){_this.setModelOnFilterWrapper(filterWrapper.filter,null);});}};FilterManager.prototype.setModelOnFilterWrapper=function(filter,newModel){if(typeof filter.getApi!=="function"){console.warn("Warning ag-grid - filter missing getApi method, which is needed for getFilterModel");return;}var filterApi=filter.getApi();if(typeof filterApi.setModel!=="function"){console.warn("Warning ag-grid - filter API missing setModel method, which is needed for setFilterModel");return;}filterApi.setModel(newModel);};FilterManager.prototype.getFilterModel=function(){var result={};_.iterateObject(this.allFilters,function(key,filterWrapper){if(typeof filterWrapper.filter.getApi!=="function"){console.warn("Warning ag-grid - filter missing getApi method, which is needed for getFilterModel");return;}var filterApi=filterWrapper.filter.getApi();if(typeof filterApi.getModel!=="function"){console.warn("Warning ag-grid - filter API missing getModel method, which is needed for getFilterModel");return;}var model=filterApi.getModel();if(model){result[key]=model;}});return result;};FilterManager.prototype.setRowModel=function(rowModel){this.rowModel=rowModel;};FilterManager.prototype.isAdvancedFilterPresent=function(){var atLeastOneActive=false;_.iterateObject(this.allFilters,function(key,filterWrapper){if(!filterWrapper.filter.isFilterActive){console.error("Filter is missing method isFilterActive");}if(filterWrapper.filter.isFilterActive()){atLeastOneActive=true;}});return atLeastOneActive;};FilterManager.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.advancedFilterPresent||this.externalFilterPresent;};FilterManager.prototype.isFilterPresentForCol=function(colId){var filterWrapper=this.allFilters[colId];if(!filterWrapper){return false;}if(!filterWrapper.filter.isFilterActive){console.error("Filter is missing method isFilterActive");}var filterPresent=filterWrapper.filter.isFilterActive();return filterPresent;};FilterManager.prototype.doesFilterPass=function(node,filterToSkip){var data=node.data;var colKeys=Object.keys(this.allFilters);for(var i=0,l=colKeys.length;i<l;i++){var colId=colKeys[i];var filterWrapper=this.allFilters[colId];if(filterWrapper===undefined){continue;}if(filterWrapper.filter===filterToSkip){continue;}if(!filterWrapper.filter.doesFilterPass){console.error("Filter is missing method doesFilterPass");}var params={node:node,data:data};if(!filterWrapper.filter.doesFilterPass(params)){return false;}}return true;};FilterManager.prototype.setQuickFilter=function(newFilter){if(newFilter===undefined||newFilter===""){newFilter=null;}if(this.quickFilter!==newFilter){if(this.gridOptionsWrapper.isVirtualPaging()){console.warn("ag-grid: cannot do quick filtering when doing virtual paging");return;}if(newFilter===undefined||newFilter===""){newFilter=null;}if(newFilter!==null){newFilter=newFilter.toUpperCase();}this.quickFilter=newFilter;return true;}else{return false;}};FilterManager.prototype.onFilterChanged=function(){this.advancedFilterPresent=this.isAdvancedFilterPresent();this.externalFilterPresent=this.gridOptionsWrapper.isExternalFilterPresent();_.iterateObject(this.allFilters,function(key,filterWrapper){if(filterWrapper.filter.onAnyFilterChanged){filterWrapper.filter.onAnyFilterChanged();}});};FilterManager.prototype.isQuickFilterPresent=function(){return this.quickFilter!==null;};FilterManager.prototype.doesRowPassOtherFilters=function(filterToSkip,node){return this.doesRowPassFilter(node,filterToSkip);};FilterManager.prototype.doesRowPassFilter=function(node,filterToSkip){if(this.isQuickFilterPresent()){if(!node.quickFilterAggregateText){this.aggregateRowForQuickFilter(node);}if(node.quickFilterAggregateText.indexOf(this.quickFilter)<0){return false;}}if(this.externalFilterPresent){if(!this.gridOptionsWrapper.doesExternalFilterPass(node)){return false;}}if(this.advancedFilterPresent){if(!this.doesFilterPass(node,filterToSkip)){return false;}}return true;};FilterManager.prototype.aggregateRowForQuickFilter=function(node){var aggregatedText="";var that=this;this.columnController.getAllColumns().forEach(function(column){var data=node.data;var value=that.valueService.getValue(column.colDef,data,node);if(value&&value!==""){aggregatedText=aggregatedText+value.toString().toUpperCase()+"_";}});node.quickFilterAggregateText=aggregatedText;};FilterManager.prototype.refreshDisplayedValues=function(){var rows=this.rowModel.getTopLevelNodes();var colKeys=Object.keys(this.allFilters);for(var i=0,l=colKeys.length;i<l;i++){var colId=colKeys[i];var filterWrapper=this.allFilters[colId];if(filterWrapper===undefined||(typeof filterWrapper.filter.setFilteredDisplayValues!=="function")){continue;}var displayedFilterValues=new Array();for(var j=0;j<rows.length;j++){if(this.doesFilterPass(rows[j],i)){displayedFilterValues.push(rows[j]);}}filterWrapper.filter.setFilteredDisplayValues(displayedFilterValues);}};FilterManager.prototype.onNewRowsLoaded=function(){var that=this;Object.keys(this.allFilters).forEach(function(field){var filter=that.allFilters[field].filter;if(filter.onNewRowsLoaded){filter.onNewRowsLoaded();}});};FilterManager.prototype.createValueGetter=function(column){var that=this;return function valueGetter(node){return that.valueService.getValue(column.colDef,node.data,node);};};FilterManager.prototype.getFilterApi=function(column){var filterWrapper=this.getOrCreateFilterWrapper(column);if(filterWrapper){if(typeof filterWrapper.filter.getApi==="function"){return filterWrapper.filter.getApi();}}};FilterManager.prototype.getOrCreateFilterWrapper=function(column){var filterWrapper=this.allFilters[column.colId];if(!filterWrapper){filterWrapper=this.createFilterWrapper(column);this.allFilters[column.colId]=filterWrapper;this.refreshDisplayedValues();}return filterWrapper;};FilterManager.prototype.createFilterWrapper=function(column){var colDef=column.colDef;var filterWrapper={column:column,filter:null,scope:null,gui:null};if(typeof colDef.filter==="function"){if(this.gridOptionsWrapper.isAngularCompileFilters()){filterWrapper.scope=this.$scope.$new();}this.assertMethodHasNoParameters(colDef.filter);filterWrapper.filter=new colDef.filter();}else{if(colDef.filter==="text"){filterWrapper.filter=new _grid.TextFilter();}else{if(colDef.filter==="number"){filterWrapper.filter=new _grid.NumberFilter();}else{filterWrapper.filter=new _grid.SetFilter();}}}var filterChangedCallback=this.grid.onFilterChanged.bind(this.grid);var filterModifiedCallback=this.grid.onFilterModified.bind(this.grid);var doesRowPassOtherFilters=this.doesRowPassOtherFilters.bind(this,filterWrapper.filter);var filterParams=colDef.filterParams;var params={colDef:colDef,rowModel:this.rowModel,filterChangedCallback:filterChangedCallback,filterModifiedCallback:filterModifiedCallback,filterParams:filterParams,localeTextFunc:this.gridOptionsWrapper.getLocaleTextFunc(),valueGetter:this.createValueGetter(column),doesRowPassOtherFilter:doesRowPassOtherFilters,$scope:filterWrapper.scope};if(!filterWrapper.filter.init){throw"Filter is missing method init";}filterWrapper.filter.init(params);if(!filterWrapper.filter.getGui){throw"Filter is missing method getGui";}var eFilterGui=document.createElement("div");eFilterGui.className="ag-filter";var guiFromFilter=filterWrapper.filter.getGui();if(_.isNodeOrElement(guiFromFilter)){eFilterGui.appendChild(guiFromFilter);}else{var eTextSpan=document.createElement("span");eTextSpan.innerHTML=guiFromFilter;eFilterGui.appendChild(eTextSpan);}if(filterWrapper.scope){filterWrapper.gui=this.$compile(eFilterGui)(filterWrapper.scope)[0];}else{filterWrapper.gui=eFilterGui;}return filterWrapper;};FilterManager.prototype.assertMethodHasNoParameters=function(theMethod){var getRowsParams=_.getFunctionParameters(theMethod);if(getRowsParams.length>0){console.warn("ag-grid: It looks like your filter is of the old type and expecting parameters in the constructor.");console.warn("ag-grid: From ag-grid 1.14, the constructor should take no parameters and init() used instead.");}};FilterManager.prototype.showFilter=function(column,eventSource){var filterWrapper=this.getOrCreateFilterWrapper(column);this.popupService.positionPopup(eventSource,filterWrapper.gui,200);var hidePopup=this.popupService.addAsModalPopup(filterWrapper.gui,true);if(filterWrapper.filter.afterGuiAttached){var params={hidePopup:hidePopup,eventSource:eventSource};filterWrapper.filter.afterGuiAttached(params);}};return FilterManager;})();_grid.FilterManager=FilterManager;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var TemplateService=(function(){function TemplateService(){this.templateCache={};this.waitingCallbacks={};}TemplateService.prototype.init=function($scope){this.$scope=$scope;};TemplateService.prototype.getTemplate=function(url,callback){var templateFromCache=this.templateCache[url];if(templateFromCache){return templateFromCache;}var callbackList=this.waitingCallbacks[url];var that=this;if(!callbackList){callbackList=[];this.waitingCallbacks[url]=callbackList;var client=new XMLHttpRequest();client.onload=function(){that.handleHttpResult(this,url);};client.open("GET",url);client.send();}if(callback){callbackList.push(callback);}return null;};TemplateService.prototype.handleHttpResult=function(httpResult,url){if(httpResult.status!==200||httpResult.response===null){console.warn("Unable to get template error "+httpResult.status+" - "+url);return;}this.templateCache[url]=httpResult.response;var callbacks=this.waitingCallbacks[url];for(var i=0;i<callbacks.length;i++){var callback=callbacks[i];callback();}if(this.$scope){var that=this;setTimeout(function(){that.$scope.$apply();},0);}};return TemplateService;})();grid.TemplateService=TemplateService;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var SelectionRendererFactory=(function(){function SelectionRendererFactory(){}SelectionRendererFactory.prototype.init=function(angularGrid,selectionController){this.angularGrid=angularGrid;this.selectionController=selectionController;};SelectionRendererFactory.prototype.createSelectionCheckbox=function(node,rowIndex){var eCheckbox=document.createElement("input");eCheckbox.type="checkbox";eCheckbox.name="name";eCheckbox.className="ag-selection-checkbox";setCheckboxState(eCheckbox,this.selectionController.isNodeSelected(node));var that=this;eCheckbox.onchange=function(){var newValue=eCheckbox.checked;if(newValue){that.selectionController.selectIndex(rowIndex,true);}else{that.selectionController.deselectIndex(rowIndex);}};this.angularGrid.addVirtualRowListener(rowIndex,{rowSelected:function(selected){setCheckboxState(eCheckbox,selected);},rowRemoved:function(){}});return eCheckbox;};return SelectionRendererFactory;})();grid.SelectionRendererFactory=SelectionRendererFactory;function setCheckboxState(eCheckbox,state){if(typeof state==="boolean"){eCheckbox.checked=state;eCheckbox.indeterminate=false;}else{eCheckbox.indeterminate=true;}}})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var vdom;(function(vdom){var _=awk.grid.Utils;var VElement=(function(){function VElement(){this.id=VElement.idSequence++;}VElement.prototype.getId=function(){return this.id;};VElement.prototype.addElementAttachedListener=function(listener){if(!this.elementAttachedListeners){this.elementAttachedListeners=[];}this.elementAttachedListeners.push(listener);};VElement.prototype.fireElementAttached=function(element){if(!this.elementAttachedListeners){return;}for(var i=0;i<this.elementAttachedListeners.length;i++){var listener=this.elementAttachedListeners[i];listener(element);}};VElement.prototype.elementAttached=function(element){this.fireElementAttached(element);};VElement.prototype.toHtmlString=function(){return null;};VElement.idSequence=0;return VElement;})();vdom.VElement=VElement;})(vdom=awk.vdom||(awk.vdom={}));})(awk||(awk={}));var __extends=this.__extends||function(d,b){for(var p in b){if(b.hasOwnProperty(p)){d[p]=b[p];}}function __(){this.constructor=d;}__.prototype=b.prototype;d.prototype=new __();};var awk;(function(awk){var vdom;(function(vdom){var _=awk.grid.Utils;var VHtmlElement=(function(_super){__extends(VHtmlElement,_super);function VHtmlElement(type){_super.call(this);this.style={};this.type=type;}VHtmlElement.prototype.getElement=function(){return this.element;};VHtmlElement.prototype.setInnerHtml=function(innerHtml){if(this.bound){this.element.innerHTML=innerHtml;}else{this.innerHtml=innerHtml;}};VHtmlElement.prototype.addStyles=function(styles){var _this=this;if(!styles){return;}if(!this.bound&&!this.style){this.style={};}_.iterateObject(styles,function(key,value){if(_this.bound){var style=_this.element.style;style[key]=value;}else{_this.style[key]=value;}});};VHtmlElement.prototype.attachEventListeners=function(node){if(!this.eventListeners){return;}for(var i=0;i<this.eventListeners.length;i++){var listener=this.eventListeners[i];node.addEventListener(listener.event,listener.listener);}};VHtmlElement.prototype.addClass=function(newClass){if(this.bound){_.addCssClass(this.element,newClass);}else{if(!this.classes){this.classes=[];}this.classes.push(newClass);}};VHtmlElement.prototype.removeClass=function(oldClass){if(this.bound){_.removeCssClass(this.element,oldClass);}else{if(!this.classes){return;}while(this.classes.indexOf(oldClass)>=0){_.removeFromArray(this.classes,oldClass);}}};VHtmlElement.prototype.addClasses=function(classes){if(!classes||classes.length<=0){return;}if(this.bound){for(var i=0;i<classes.length;i++){_.addCssClass(this.element,classes[i]);}}else{if(!this.classes){this.classes=[];}for(var j=0;j<classes.length;j++){this.classes.push(classes[j]);}}};VHtmlElement.prototype.toHtmlString=function(){var buff="";buff+="<"+this.type+' v_element_id="'+this.getId()+'" ';buff+=this.toHtmlStringClasses();buff+=this.toHtmlStringAttributes();buff+=this.toHtmlStringStyles();buff+=">";if(this.innerHtml){buff+=this.innerHtml;}buff+=this.toHtmlStringChildren();buff+="</"+this.type+">";return buff;};VHtmlElement.prototype.toHtmlStringChildren=function(){if(!this.children){return"";}var result="";for(var i=0;i<this.children.length;i++){result+=this.children[i].toHtmlString();}return result;};VHtmlElement.prototype.toHtmlStringAttributes=function(){if(!this.attributes){return"";}var result="";_.iterateObject(this.attributes,function(key,value){result+=" "+key+'="'+value+'"';});return result;};VHtmlElement.prototype.toHtmlStringClasses=function(){if(!this.classes){return"";}return' class="'+this.classes.join(" ")+'"';};VHtmlElement.prototype.toHtmlStringStyles=function(){var result=' style="';var atLeastOne=false;_.iterateObject(this.style,function(key,value){result+=" "+key+": "+value+";";atLeastOne=true;});result+='"';if(atLeastOne){return result;}else{return"";}};VHtmlElement.prototype.appendChild=function(child){if(this.bound){if(_.isNodeOrElement(child)){this.element.appendChild(child);}else{console.error("cannot appendChild with virtual child to already bound VHTMLElement");}}else{if(!this.children){this.children=[];}if(_.isNodeOrElement(child)){this.children.push(new vdom.VWrapperElement(child));}else{this.children.push(child);}}};VHtmlElement.prototype.setAttribute=function(key,value){if(this.bound){console.error("cannot setAttribute to already bound VHTMLElement");}if(!this.attributes){this.attributes={};}this.attributes[key]=value;};VHtmlElement.prototype.addEventListener=function(event,listener){if(this.bound){console.error("cannot addEventListener to already bound VHTMLElement");}if(!this.eventListeners){this.eventListeners=[];}var entry=new VEventListener(event,listener);this.eventListeners.push(entry);};VHtmlElement.prototype.elementAttached=function(element){_super.prototype.elementAttached.call(this,element);this.element=element;this.attachEventListeners(element);this.fireElementAttachedToChildren(element);this.bound=true;};VHtmlElement.prototype.fireElementAttachedToChildren=function(element){if(!this.children){return;}for(var i=0;i<this.children.length;i++){var child=this.children[i];var childElement=element.querySelector('[v_element_id="'+child.getId()+'"]');child.elementAttached(childElement);}};return VHtmlElement;})(vdom.VElement);vdom.VHtmlElement=VHtmlElement;var VEventListener=(function(){function VEventListener(event,listener){this.event=event;this.listener=listener;}return VEventListener;})();})(vdom=awk.vdom||(awk.vdom={}));})(awk||(awk={}));var awk;(function(awk){var vdom;(function(vdom){var VWrapperElement=(function(_super){__extends(VWrapperElement,_super);function VWrapperElement(wrappedElement){_super.call(this);this.wrappedElement=wrappedElement;}VWrapperElement.prototype.toHtmlString=function(){return'<span v_element_id="'+this.getId()+'"></span>';};VWrapperElement.prototype.elementAttached=function(element){var parent=element.parentNode;parent.insertBefore(this.wrappedElement,element);parent.removeChild(element);};return VWrapperElement;})(vdom.VElement);vdom.VWrapperElement=VWrapperElement;})(vdom=awk.vdom||(awk.vdom={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var RenderedCell=(function(){function RenderedCell(isFirstColumn,column,$compile,rowRenderer,gridOptionsWrapper,expressionService,selectionRendererFactory,selectionController,templateService,cellRendererMap,node,rowIndex,scope,columnController,valueService){this.isFirstColumn=false;this.isFirstColumn=isFirstColumn;this.column=column;this.rowRenderer=rowRenderer;this.gridOptionsWrapper=gridOptionsWrapper;this.expressionService=expressionService;this.selectionRendererFactory=selectionRendererFactory;this.selectionController=selectionController;this.cellRendererMap=cellRendererMap;this.$compile=$compile;this.templateService=templateService;this.columnController=columnController;this.valueService=valueService;this.checkboxSelection=this.column.colDef.checkboxSelection&&!node.floating;this.node=node;this.rowIndex=rowIndex;this.scope=scope;this.data=this.getDataForRow();this.value=this.getValue();this.setupComponents();}RenderedCell.prototype.getValue=function(){return this.valueService.getValue(this.column.colDef,this.data,this.node);};RenderedCell.prototype.getVGridCell=function(){return this.vGridCell;};RenderedCell.prototype.getDataForRow=function(){if(this.node.footer){return this.node.data;}else{if(this.node.group){var footersEnabled=this.gridOptionsWrapper.isGroupIncludeFooter();var suppressHideHeader=this.gridOptionsWrapper.isGroupSuppressBlankHeader();if(this.node.expanded&&footersEnabled&&!suppressHideHeader){return undefined;}else{return this.node.data;}}else{return this.node.data;}}};RenderedCell.prototype.setupComponents=function(){this.vGridCell=new awk.vdom.VHtmlElement("div");this.vGridCell.setAttribute("col",(this.column.index!==undefined&&this.column.index!==null)?this.column.index.toString():"");if(!this.gridOptionsWrapper.isSuppressCellSelection()&&!this.node.floating){this.vGridCell.setAttribute("tabindex","-1");}this.addClasses();this.addCellClickedHandler();this.addCellDoubleClickedHandler();if(!this.node.floating){this.addCellNavigationHandler();}this.vGridCell.addStyles({width:this.column.actualWidth+"px"});this.createParentOfValue();this.populateCell();if(this.eCheckbox){this.setSelected(this.selectionController.isNodeSelected(this.node));}};RenderedCell.prototype.startEditing=function(){var _this=this;var that=this;this.editingCell=true;_.removeAllChildren(this.vGridCell.getElement());var eInput=document.createElement("input");eInput.type="text";_.addCssClass(eInput,"ag-cell-edit-input");var value=this.getValue();if(value!==null&&value!==undefined){eInput.value=value;}eInput.style.width=(this.column.actualWidth-14)+"px";this.vGridCell.appendChild(eInput);eInput.focus();eInput.select();var blurListener=function(){that.stopEditing(eInput,blurListener);};eInput.addEventListener("blur",blurListener);eInput.addEventListener("keypress",function(event){var key=event.which||event.keyCode;if(key==grid.Constants.KEY_ENTER){_this.stopEditing(eInput,blurListener);_this.focusCell(true);}});eInput.addEventListener("keydown",function(event){var key=event.which||event.keyCode;if(key==grid.Constants.KEY_TAB){that.stopEditing(eInput,blurListener);that.rowRenderer.startEditingNextCell(that.rowIndex,that.column,event.shiftKey);event.preventDefault();return false;}});};RenderedCell.prototype.focusCell=function(forceBrowserFocus){this.rowRenderer.focusCell(this.vGridCell.getElement(),this.rowIndex,this.column.index,this.column.colDef,forceBrowserFocus);};RenderedCell.prototype.stopEditing=function(eInput,blurListener){this.editingCell=false;var newValue=eInput.value;var colDef=this.column.colDef;eInput.removeEventListener("blur",blurListener);var paramsForCallbacks={node:this.node,data:this.node.data,oldValue:this.node.data[colDef.field],newValue:newValue,rowIndex:this.rowIndex,colDef:colDef,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};if(colDef.newValueHandler){colDef.newValueHandler(paramsForCallbacks);}else{this.node.data[colDef.field]=newValue;}this.value=this.getValue();paramsForCallbacks.newValue=this.value;if(typeof colDef.cellValueChanged==="function"){colDef.cellValueChanged(paramsForCallbacks);}if(typeof this.gridOptionsWrapper.getCellValueChanged()==="function"){this.gridOptionsWrapper.getCellValueChanged()(paramsForCallbacks);}_.removeAllChildren(this.vGridCell.getElement());if(this.checkboxSelection){this.vGridCell.appendChild(this.vCellWrapper.getElement());}this.refreshCell();};RenderedCell.prototype.addCellDoubleClickedHandler=function(){var that=this;var colDef=this.column.colDef;this.vGridCell.addEventListener("dblclick",function(event){if(that.gridOptionsWrapper.getCellDoubleClicked()){var paramsForGrid={node:that.node,data:that.node.data,value:that.value,rowIndex:that.rowIndex,colDef:colDef,event:event,eventSource:this,context:that.gridOptionsWrapper.getContext(),api:that.gridOptionsWrapper.getApi()};that.gridOptionsWrapper.getCellDoubleClicked()(paramsForGrid);}if(colDef.cellDoubleClicked){var paramsForColDef={node:that.node,data:that.node.data,value:that.value,rowIndex:that.rowIndex,colDef:colDef,event:event,eventSource:this,context:that.gridOptionsWrapper.getContext(),api:that.gridOptionsWrapper.getApi()};colDef.cellDoubleClicked(paramsForColDef);}if(that.isCellEditable()){that.startEditing();}});};RenderedCell.prototype.isCellEditable=function(){if(this.editingCell){return false;}if(this.node.group){return false;}var colDef=this.column.colDef;if(typeof colDef.editable==="boolean"){return colDef.editable;}if(typeof colDef.editable==="function"){var params={value:this.value,data:this.node.data,node:this.node,colDef:colDef,column:this.column,$scope:this.scope,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()};var editableFunc=colDef.editable;return editableFunc(params);}return false;};RenderedCell.prototype.addCellClickedHandler=function(){var colDef=this.column.colDef;var that=this;this.vGridCell.addEventListener("click",function(event){if(!that.node.floating){that.focusCell(false);}if(that.gridOptionsWrapper.getCellClicked()){var paramsForGrid={node:that.node,data:that.node.data,value:that.value,rowIndex:that.rowIndex,colDef:colDef,event:event,eventSource:this,context:that.gridOptionsWrapper.getContext(),api:that.gridOptionsWrapper.getApi()};that.gridOptionsWrapper.getCellClicked()(paramsForGrid);}if(colDef.cellClicked){var paramsForColDef={node:that.node,data:that.node.data,value:that.value,rowIndex:that.rowIndex,colDef:colDef,event:event,eventSource:this,context:that.gridOptionsWrapper.getContext(),api:that.gridOptionsWrapper.getApi()};colDef.cellClicked(paramsForColDef);}});};RenderedCell.prototype.populateCell=function(){this.putDataIntoCell();this.addStylesFromCollDef();this.addClassesFromCollDef();this.addClassesFromRules();};RenderedCell.prototype.addStylesFromCollDef=function(){var colDef=this.column.colDef;if(colDef.cellStyle){var cssToUse;if(typeof colDef.cellStyle==="function"){var cellStyleParams={value:this.value,data:this.node.data,node:this.node,colDef:colDef,column:this.column,$scope:this.scope,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()};var cellStyleFunc=colDef.cellStyle;cssToUse=cellStyleFunc(cellStyleParams);}else{cssToUse=colDef.cellStyle;}if(cssToUse){this.vGridCell.addStyles(cssToUse);}}};RenderedCell.prototype.addClassesFromCollDef=function(){var _this=this;var colDef=this.column.colDef;if(colDef.cellClass){var classToUse;if(typeof colDef.cellClass==="function"){var cellClassParams={value:this.value,data:this.node.data,node:this.node,colDef:colDef,$scope:this.scope,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()};var cellClassFunc=colDef.cellClass;classToUse=cellClassFunc(cellClassParams);}else{classToUse=colDef.cellClass;}if(typeof classToUse==="string"){this.vGridCell.addClass(classToUse);}else{if(Array.isArray(classToUse)){classToUse.forEach(function(cssClassItem){_this.vGridCell.addClass(cssClassItem);});}}}};RenderedCell.prototype.addClassesFromRules=function(){var colDef=this.column.colDef;var classRules=colDef.cellClassRules;if(typeof classRules==="object"&&classRules!==null){var params={value:this.value,data:this.node.data,node:this.node,colDef:colDef,rowIndex:this.rowIndex,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext()};var classNames=Object.keys(classRules);for(var i=0;i<classNames.length;i++){var className=classNames[i];var rule=classRules[className];var resultOfRule;if(typeof rule==="string"){resultOfRule=this.expressionService.evaluate(rule,params);}else{if(typeof rule==="function"){resultOfRule=rule(params);}}if(resultOfRule){this.vGridCell.addClass(className);}else{this.vGridCell.removeClass(className);}}}};RenderedCell.prototype.addCellNavigationHandler=function(){var that=this;this.vGridCell.addEventListener("keydown",function(event){if(that.editingCell){return;}if(event.target!==that.vGridCell.getElement()){return;}var key=event.which||event.keyCode;var startNavigation=key===grid.Constants.KEY_DOWN||key===grid.Constants.KEY_UP||key===grid.Constants.KEY_LEFT||key===grid.Constants.KEY_RIGHT;if(startNavigation){event.preventDefault();that.rowRenderer.navigateToNextCell(key,that.rowIndex,that.column);}var startEdit=key===grid.Constants.KEY_ENTER;if(startEdit&&that.isCellEditable()){that.startEditing();event.preventDefault();}var selectRow=key===grid.Constants.KEY_SPACE;if(selectRow&&that.gridOptionsWrapper.isRowSelection()){var selected=that.selectionController.isNodeSelected(that.node);if(selected){that.selectionController.deselectNode(that.node);}else{that.selectionController.selectNode(that.node,true);}event.preventDefault();}});};RenderedCell.prototype.createSelectionCheckbox=function(){this.eCheckbox=document.createElement("input");this.eCheckbox.type="checkbox";this.eCheckbox.name="name";this.eCheckbox.className="ag-selection-checkbox";this.eCheckbox.addEventListener("click",function(event){event.stopPropagation();});var that=this;this.checkboxOnChangeListener=function(){var newValue=that.eCheckbox.checked;if(newValue){that.selectionController.selectIndex(that.rowIndex,true);}else{that.selectionController.deselectIndex(that.rowIndex);}};this.eCheckbox.onchange=this.checkboxOnChangeListener;};RenderedCell.prototype.setSelected=function(state){if(!this.eCheckbox){return;}this.eCheckbox.onchange=null;if(typeof state==="boolean"){this.eCheckbox.checked=state;this.eCheckbox.indeterminate=false;}else{this.eCheckbox.indeterminate=true;}this.eCheckbox.onchange=this.checkboxOnChangeListener;};RenderedCell.prototype.createParentOfValue=function(){if(this.checkboxSelection){this.vCellWrapper=new awk.vdom.VHtmlElement("span");this.vCellWrapper.addClass("ag-cell-wrapper");this.vGridCell.appendChild(this.vCellWrapper);this.createSelectionCheckbox();this.vCellWrapper.appendChild(new awk.vdom.VWrapperElement(this.eCheckbox));this.vSpanWithValue=new awk.vdom.VHtmlElement("span");this.vSpanWithValue.addClass("ag-cell-value");this.vCellWrapper.appendChild(this.vSpanWithValue);this.vParentOfValue=this.vSpanWithValue;}else{this.vGridCell.addClass("ag-cell-value");this.vParentOfValue=this.vGridCell;}};RenderedCell.prototype.isVolatile=function(){};RenderedCell.prototype.refreshCell=function(){_.removeAllChildren(this.vParentOfValue.getElement());this.value=this.getValue();this.populateCell();if(this.checkboxSelection){this.setSelected(this.selectionController.isNodeSelected(this.node));}if(this.gridOptionsWrapper.isAngularCompileRows()){this.$compile(this.vGridCell.getElement())(this.scope);}};RenderedCell.prototype.putDataIntoCell=function(){var colDef=this.column.colDef;if(colDef.template){this.vParentOfValue.setInnerHtml(colDef.template);}else{if(colDef.templateUrl){var template=this.templateService.getTemplate(colDef.templateUrl,this.refreshCell.bind(this,true));if(template){this.vParentOfValue.setInnerHtml(template);}}else{if(colDef.floatingCellRenderer){this.useCellRenderer(colDef.floatingCellRenderer);}else{if(colDef.cellRenderer){this.useCellRenderer(colDef.cellRenderer);}else{if(this.value!==undefined&&this.value!==null&&this.value!==""){this.vParentOfValue.setInnerHtml(this.value.toString());}}}}}};RenderedCell.prototype.useCellRenderer=function(cellRenderer){var colDef=this.column.colDef;var rendererParams={value:this.value,valueGetter:this.getValue,data:this.node.data,node:this.node,colDef:colDef,column:this.column,$scope:this.scope,rowIndex:this.rowIndex,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext(),refreshCell:this.refreshCell.bind(this),eGridCell:this.vGridCell};var actualCellRenderer;if(typeof cellRenderer==="object"&&cellRenderer!==null){var cellRendererObj=cellRenderer;actualCellRenderer=this.cellRendererMap[cellRendererObj.renderer];if(!actualCellRenderer){throw"Cell renderer "+cellRenderer+" not found, available are "+Object.keys(this.cellRendererMap);}}else{if(typeof cellRenderer==="function"){actualCellRenderer=cellRenderer;}else{throw"Cell Renderer must be String or Function";}}var resultFromRenderer=actualCellRenderer(rendererParams);if(_.isNodeOrElement(resultFromRenderer)){this.vParentOfValue.appendChild(resultFromRenderer);}else{this.vParentOfValue.setInnerHtml(resultFromRenderer);}};RenderedCell.prototype.addClasses=function(){this.vGridCell.addClass("ag-cell");this.vGridCell.addClass("ag-cell-no-focus");this.vGridCell.addClass("cell-col-"+this.column.index);if(this.node.group&&this.node.footer){this.vGridCell.addClass("ag-footer-cell");}if(this.node.group&&!this.node.footer){this.vGridCell.addClass("ag-group-cell");}};return RenderedCell;})();grid.RenderedCell=RenderedCell;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var RenderedRow=(function(){function RenderedRow(gridOptionsWrapper,valueService,parentScope,angularGrid,columnController,expressionService,cellRendererMap,selectionRendererFactory,$compile,templateService,selectionController,rowRenderer,eBodyContainer,ePinnedContainer,node,rowIndex){this.renderedCells={};this.gridOptionsWrapper=gridOptionsWrapper;this.valueService=valueService;this.parentScope=parentScope;this.angularGrid=angularGrid;this.expressionService=expressionService;this.columnController=columnController;this.cellRendererMap=cellRendererMap;this.selectionRendererFactory=selectionRendererFactory;this.$compile=$compile;this.templateService=templateService;this.selectionController=selectionController;this.rowRenderer=rowRenderer;this.eBodyContainer=eBodyContainer;this.ePinnedContainer=ePinnedContainer;this.pinning=columnController.isPinning();var groupHeaderTakesEntireRow=this.gridOptionsWrapper.isGroupUseEntireRow();var rowIsHeaderThatSpans=node.group&&groupHeaderTakesEntireRow;this.vBodyRow=this.createRowContainer();if(this.pinning){this.vPinnedRow=this.createRowContainer();}this.rowIndex=rowIndex;this.node=node;this.scope=this.createChildScopeOrNull(node.data);if(!rowIsHeaderThatSpans){this.drawNormalRow();}this.addDynamicStyles();this.addDynamicClasses();var rowStr=this.rowIndex.toString();if(this.node.floatingBottom){rowStr="fb-"+rowStr;}else{if(this.node.floatingTop){rowStr="ft-"+rowStr;}}this.vBodyRow.setAttribute("row",rowStr);if(this.pinning){this.vPinnedRow.setAttribute("row",rowStr);}if(!this.gridOptionsWrapper.isDontUseScrolls()){this.vBodyRow.style.top=(this.gridOptionsWrapper.getRowHeight()*this.rowIndex)+"px";if(this.pinning){this.vPinnedRow.style.top=(this.gridOptionsWrapper.getRowHeight()*this.rowIndex)+"px";}}this.vBodyRow.style.height=(this.gridOptionsWrapper.getRowHeight())+"px";if(this.pinning){this.vPinnedRow.style.height=(this.gridOptionsWrapper.getRowHeight())+"px";}if(rowIsHeaderThatSpans){this.createGroupRow();}this.bindVirtualElement(this.vBodyRow);if(this.pinning){this.bindVirtualElement(this.vPinnedRow);}if(this.scope){this.$compile(this.vBodyRow.getElement())(this.scope);if(this.pinning){this.$compile(this.vPinnedRow.getElement())(this.scope);}}this.eBodyContainer.appendChild(this.vBodyRow.getElement());if(this.pinning){this.ePinnedContainer.appendChild(this.vPinnedRow.getElement());}}RenderedRow.prototype.onRowSelected=function(selected){_.iterateObject(this.renderedCells,function(key,renderedCell){renderedCell.setSelected(selected);});};RenderedRow.prototype.softRefresh=function(){_.iterateObject(this.renderedCells,function(key,renderedCell){if(renderedCell.isVolatile()){renderedCell.refreshCell();}});};RenderedRow.prototype.getRenderedCellForColumn=function(column){return this.renderedCells[column.index];};RenderedRow.prototype.getCellForCol=function(column){var renderedCell=this.renderedCells[column.index];if(renderedCell){return renderedCell.getVGridCell().getElement();}else{return null;}};RenderedRow.prototype.destroy=function(){this.destroyScope();if(this.pinning){this.ePinnedContainer.removeChild(this.vPinnedRow.getElement());}this.eBodyContainer.removeChild(this.vBodyRow.getElement());};RenderedRow.prototype.destroyScope=function(){if(this.scope){this.scope.$destroy();this.scope=null;}};RenderedRow.prototype.isDataInList=function(rows){return rows.indexOf(this.node.data)>=0;};RenderedRow.prototype.isGroup=function(){return this.node.group===true;};RenderedRow.prototype.drawNormalRow=function(){var columns=this.columnController.getDisplayedColumns();for(var i=0;i<columns.length;i++){var column=columns[i];var firstCol=i===0;var renderedCell=new grid.RenderedCell(firstCol,column,this.$compile,this.rowRenderer,this.gridOptionsWrapper,this.expressionService,this.selectionRendererFactory,this.selectionController,this.templateService,this.cellRendererMap,this.node,this.rowIndex,this.scope,this.columnController,this.valueService);var vGridCell=renderedCell.getVGridCell();if(column.pinned){this.vPinnedRow.appendChild(vGridCell);}else{this.vBodyRow.appendChild(vGridCell);}this.renderedCells[column.index]=renderedCell;}};RenderedRow.prototype.bindVirtualElement=function(vElement){var html=vElement.toHtmlString();var element=_.loadTemplate(html);vElement.elementAttached(element);};RenderedRow.prototype.createGroupRow=function(){var eGroupRow=this.createGroupSpanningEntireRowCell(false);if(this.pinning){this.vPinnedRow.appendChild(eGroupRow);var eGroupRowPadding=this.createGroupSpanningEntireRowCell(true);this.vBodyRow.appendChild(eGroupRowPadding);}else{this.vBodyRow.appendChild(eGroupRow);}};RenderedRow.prototype.createGroupSpanningEntireRowCell=function(padding){var eRow;if(padding){eRow=document.createElement("span");}else{var rowCellRenderer=this.gridOptionsWrapper.getGroupRowRenderer();if(!rowCellRenderer){rowCellRenderer={renderer:"group",innerRenderer:this.gridOptionsWrapper.getGroupRowInnerRenderer()};}var params={node:this.node,data:this.node.data,rowIndex:this.rowIndex,api:this.gridOptionsWrapper.getApi(),colDef:{cellRenderer:rowCellRenderer}};eRow=this.cellRendererMap["group"](params);}if(this.node.footer){_.addCssClass(eRow,"ag-footer-cell-entire-row");}else{_.addCssClass(eRow,"ag-group-cell-entire-row");}return eRow;};RenderedRow.prototype.setMainRowWidth=function(width){this.vBodyRow.addStyles({width:width+"px"});};RenderedRow.prototype.createChildScopeOrNull=function(data){if(this.gridOptionsWrapper.isAngularCompileRows()){var newChildScope=this.parentScope.$new();newChildScope.data=data;return newChildScope;}else{return null;}};RenderedRow.prototype.addDynamicStyles=function(){if(this.gridOptionsWrapper.getRowStyle()){var cssToUse;var rowStyle=this.gridOptionsWrapper.getRowStyle();if(typeof rowStyle==="function"){var params={data:this.node.data,node:this.node,api:this.gridOptionsWrapper.getApi(),context:this.gridOptionsWrapper.getContext(),$scope:this.scope};cssToUse=rowStyle(params);}else{cssToUse=rowStyle;}this.vBodyRow.addStyles(cssToUse);if(this.pinning){this.vPinnedRow.addStyles(cssToUse);}}};RenderedRow.prototype.createRowContainer=function(){var vRow=new awk.vdom.VHtmlElement("div");var that=this;vRow.addEventListener("click",function(event){that.angularGrid.onRowClicked(event,Number(this.getAttribute("row")),that.node);});return vRow;};RenderedRow.prototype.getRowNode=function(){return this.node;};RenderedRow.prototype.getRowIndex=function(){return this.rowIndex;};RenderedRow.prototype.addDynamicClasses=function(){var classes=[];classes.push("ag-row");classes.push(this.rowIndex%2==0?"ag-row-even":"ag-row-odd");if(this.selectionController.isNodeSelected(this.node)){classes.push("ag-row-selected");}if(this.node.group){classes.push("ag-row-group");classes.push("ag-row-level-"+this.node.level);if(!this.node.footer&&this.node.expanded){classes.push("ag-row-group-expanded");}if(!this.node.footer&&!this.node.expanded){classes.push("ag-row-group-contracted");}if(this.node.footer){classes.push("ag-row-footer");}}else{if(this.node.parent){classes.push("ag-row-level-"+(this.node.parent.level+1));}else{classes.push("ag-row-level-0");}}if(this.gridOptionsWrapper.getRowClass()){var gridOptionsRowClass=this.gridOptionsWrapper.getRowClass();var classToUse;if(typeof gridOptionsRowClass==="function"){var params={node:this.node,data:this.node.data,rowIndex:this.rowIndex,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()};classToUse=gridOptionsRowClass(params);}else{classToUse=gridOptionsRowClass;}if(classToUse){if(typeof classToUse==="string"){classes.push(classToUse);}else{if(Array.isArray(classToUse)){classToUse.forEach(function(classItem){classes.push(classItem);});}}}}this.vBodyRow.addClasses(classes);if(this.pinning){this.vPinnedRow.addClasses(classes);}};return RenderedRow;})();grid.RenderedRow=RenderedRow;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var SVG_NS="http://www.w3.org/2000/svg";var SvgFactory=(function(){function SvgFactory(){}SvgFactory.getInstance=function(){if(!this.theInstance){this.theInstance=new SvgFactory();}return this.theInstance;};SvgFactory.prototype.createFilterSvg=function(){var eSvg=createIconSvg();var eFunnel=document.createElementNS(SVG_NS,"polygon");eFunnel.setAttribute("points","0,0 4,4 4,10 6,10 6,4 10,0");eFunnel.setAttribute("class","ag-header-icon");eSvg.appendChild(eFunnel);return eSvg;};SvgFactory.prototype.createColumnShowingSvg=function(){return createCircle(true);};SvgFactory.prototype.createColumnHiddenSvg=function(){return createCircle(false);};SvgFactory.prototype.createMenuSvg=function(){var eSvg=document.createElementNS(SVG_NS,"svg");var size="12";eSvg.setAttribute("width",size);eSvg.setAttribute("height",size);["0","5","10"].forEach(function(y){var eLine=document.createElementNS(SVG_NS,"rect");eLine.setAttribute("y",y);eLine.setAttribute("width",size);eLine.setAttribute("height","2");eLine.setAttribute("class","ag-header-icon");eSvg.appendChild(eLine);});return eSvg;};SvgFactory.prototype.createArrowUpSvg=function(){return createPolygonSvg("0,10 5,0 10,10");};SvgFactory.prototype.createArrowLeftSvg=function(){return createPolygonSvg("10,0 0,5 10,10");};SvgFactory.prototype.createArrowDownSvg=function(){return createPolygonSvg("0,0 5,10 10,0");};SvgFactory.prototype.createArrowRightSvg=function(){return createPolygonSvg("0,0 10,5 0,10");};SvgFactory.prototype.createSmallArrowDownSvg=function(){return createPolygonSvg("0,0 3,6 6,0",6);};SvgFactory.prototype.createArrowUpDownSvg=function(){var svg=createIconSvg();var eAscIcon=document.createElementNS(SVG_NS,"polygon");eAscIcon.setAttribute("points","0,4 5,0 10,4");svg.appendChild(eAscIcon);var eDescIcon=document.createElementNS(SVG_NS,"polygon");eDescIcon.setAttribute("points","0,6 5,10 10,6");svg.appendChild(eDescIcon);return svg;};return SvgFactory;})();grid.SvgFactory=SvgFactory;function createPolygonSvg(points,width){var eSvg=createIconSvg(width);var eDescIcon=document.createElementNS(SVG_NS,"polygon");eDescIcon.setAttribute("points",points);eSvg.appendChild(eDescIcon);return eSvg;}function createIconSvg(width){var eSvg=document.createElementNS(SVG_NS,"svg");if(width>0){eSvg.setAttribute("width",width);eSvg.setAttribute("height",width);}else{eSvg.setAttribute("width","10");eSvg.setAttribute("height","10");}return eSvg;}function createCircle(fill){var eSvg=createIconSvg();var eCircle=document.createElementNS(SVG_NS,"circle");eCircle.setAttribute("cx","5");eCircle.setAttribute("cy","5");eCircle.setAttribute("r","5");eCircle.setAttribute("stroke","black");eCircle.setAttribute("stroke-width","2");if(fill){eCircle.setAttribute("fill","black");}else{eCircle.setAttribute("fill","none");}eSvg.appendChild(eCircle);return eSvg;}})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var svgFactory=grid.SvgFactory.getInstance();var utils=grid.Utils;var constants=grid.Constants;function groupCellRendererFactory(gridOptionsWrapper,selectionRendererFactory){return function groupCellRenderer(params){var eGroupCell=document.createElement("span");var node=params.node;var cellExpandable=node.group&&!node.footer;if(cellExpandable){addExpandAndContract(eGroupCell,params);}var checkboxNeeded=params.colDef&&params.colDef.cellRenderer&&params.colDef.cellRenderer.checkbox&&!node.footer;if(checkboxNeeded){var eCheckbox=selectionRendererFactory.createSelectionCheckbox(node,params.rowIndex);eGroupCell.appendChild(eCheckbox);}if(params.colDef&&params.colDef.cellRenderer&&params.colDef.cellRenderer.innerRenderer){createFromInnerRenderer(eGroupCell,params,params.colDef.cellRenderer.innerRenderer);}else{if(node.footer){createFooterCell(eGroupCell,params);}else{if(node.group){createGroupCell(eGroupCell,params);}else{createLeafCell(eGroupCell,params);}}}if(node.footer||node.level>0){var paddingFactor;if(params.colDef&&params.colDef.cellRenderer&&params.colDef.cellRenderer.padding>=0){paddingFactor=params.colDef.cellRenderer.padding;}else{paddingFactor=10;}var paddingPx=node.level*paddingFactor;if(node.footer){paddingPx+=10;}else{if(!node.group){paddingPx+=5;}}eGroupCell.style.paddingLeft=paddingPx+"px";}return eGroupCell;};function addExpandAndContract(eGroupCell,params){var eExpandIcon=createGroupExpandIcon(true);var eContractIcon=createGroupExpandIcon(false);eGroupCell.appendChild(eExpandIcon);eGroupCell.appendChild(eContractIcon);eExpandIcon.addEventListener("click",expandOrContract);eContractIcon.addEventListener("click",expandOrContract);eGroupCell.addEventListener("dblclick",expandOrContract);showAndHideExpandAndContract(eExpandIcon,eContractIcon,params.node.expanded);if(params.eGridCell){params.eGridCell.addEventListener("keydown",function(event){if(utils.isKeyPressed(event,constants.KEY_ENTER)){expandOrContract();event.preventDefault();}});}function expandOrContract(){expandGroup(eExpandIcon,eContractIcon,params);}}function showAndHideExpandAndContract(eExpandIcon,eContractIcon,expanded){utils.setVisible(eExpandIcon,!expanded);utils.setVisible(eContractIcon,expanded);}function createFromInnerRenderer(eGroupCell,params,renderer){utils.useRenderer(eGroupCell,renderer,params);}function getRefreshFromIndex(params){if(gridOptionsWrapper.isGroupIncludeFooter()){return params.rowIndex;}else{return params.rowIndex+1;}}function expandGroup(eExpandIcon,eContractIcon,params){params.node.expanded=!params.node.expanded;var refreshIndex=getRefreshFromIndex(params);params.api.onGroupExpandedOrCollapsed(refreshIndex);showAndHideExpandAndContract(eExpandIcon,eContractIcon,params.node.expanded);}function createGroupExpandIcon(expanded){var eIcon;if(expanded){eIcon=utils.createIcon("groupContracted",gridOptionsWrapper,null,svgFactory.createArrowRightSvg);}else{eIcon=utils.createIcon("groupExpanded",gridOptionsWrapper,null,svgFactory.createArrowDownSvg);}utils.addCssClass(eIcon,"ag-group-expand");return eIcon;}function createFooterCell(eGroupCell,params){var textToDisplay="Total "+getGroupName(params);var eText=document.createTextNode(textToDisplay);eGroupCell.appendChild(eText);}function getGroupName(params){var cellRenderer=params.colDef.cellRenderer;if(cellRenderer&&cellRenderer.keyMap&&typeof cellRenderer.keyMap==="object"&&params.colDef.cellRenderer!==null){var valueFromMap=cellRenderer.keyMap[params.node.key];if(valueFromMap){return valueFromMap;}else{return params.node.key;}}else{return params.node.key;}}function createGroupCell(eGroupCell,params){var groupName=getGroupName(params);var colDefOfGroupedCol=params.api.getColumnDef(params.node.field);if(colDefOfGroupedCol&&typeof colDefOfGroupedCol.cellRenderer==="function"){params.value=groupName;utils.useRenderer(eGroupCell,colDefOfGroupedCol.cellRenderer,params);}else{eGroupCell.appendChild(document.createTextNode(groupName));}var suppressCount=params.colDef.cellRenderer&&params.colDef.cellRenderer.suppressCount;if(!suppressCount&&params.node.allChildrenCount>=0){eGroupCell.appendChild(document.createTextNode(" ("+params.node.allChildrenCount+")"));}}function createLeafCell(eParent,params){if(params.value){var eText=document.createTextNode(" "+params.value);eParent.appendChild(eText);}}}grid.groupCellRendererFactory=groupCellRendererFactory;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var RowRenderer=(function(){function RowRenderer(){this.renderedTopFloatingRows=[];this.renderedBottomFloatingRows=[];}RowRenderer.prototype.init=function(columnModel,gridOptionsWrapper,gridPanel,angularGrid,selectionRendererFactory,$compile,$scope,selectionController,expressionService,templateService,valueService){this.columnModel=columnModel;this.gridOptionsWrapper=gridOptionsWrapper;this.angularGrid=angularGrid;this.selectionRendererFactory=selectionRendererFactory;this.gridPanel=gridPanel;this.$compile=$compile;this.$scope=$scope;this.selectionController=selectionController;this.expressionService=expressionService;this.templateService=templateService;this.valueService=valueService;this.findAllElements(gridPanel);this.cellRendererMap={"group":grid.groupCellRendererFactory(gridOptionsWrapper,selectionRendererFactory),"default":function(params){return params.value;}};this.renderedRows={};};RowRenderer.prototype.setRowModel=function(rowModel){this.rowModel=rowModel;};RowRenderer.prototype.onIndividualColumnResized=function(column){var newWidthPx=column.actualWidth+"px";var selectorForAllColsInCell=".cell-col-"+column.index;this.eParentsOfRows.forEach(function(rowContainer){var cellsForThisCol=rowContainer.querySelectorAll(selectorForAllColsInCell);for(var i=0;i<cellsForThisCol.length;i++){var element=cellsForThisCol[i];element.style.width=newWidthPx;}});};RowRenderer.prototype.setMainRowWidths=function(){var mainRowWidth=this.columnModel.getBodyContainerWidth()+"px";this.eAllBodyContainers.forEach(function(container){var unpinnedRows=container.querySelectorAll(".ag-row");for(var i=0;i<unpinnedRows.length;i++){unpinnedRows[i].style.width=mainRowWidth;}});};RowRenderer.prototype.findAllElements=function(gridPanel){this.eBodyContainer=gridPanel.getBodyContainer();this.ePinnedColsContainer=gridPanel.getPinnedColsContainer();this.eFloatingTopContainer=gridPanel.getFloatingTopContainer();this.eFloatingTopPinnedContainer=gridPanel.getPinnedFloatingTop();this.eFloatingBottomContainer=gridPanel.getFloatingBottomContainer();this.eFloatingBottomPinnedContainer=gridPanel.getPinnedFloatingBottom();this.eBodyViewport=gridPanel.getBodyViewport();this.eParentsOfRows=gridPanel.getRowsParent();this.eAllBodyContainers=[this.eBodyContainer,this.eFloatingBottomContainer,this.eFloatingTopContainer];this.eAllPinnedContainers=[this.ePinnedColsContainer,this.eFloatingBottomPinnedContainer,this.eFloatingTopPinnedContainer];};RowRenderer.prototype.refreshAllFloatingRows=function(){this.refreshFloatingRows(this.renderedTopFloatingRows,this.gridOptionsWrapper.getFloatingTopRowData(),this.eFloatingTopPinnedContainer,this.eFloatingTopContainer,true);this.refreshFloatingRows(this.renderedBottomFloatingRows,this.gridOptionsWrapper.getFloatingBottomRowData(),this.eFloatingBottomPinnedContainer,this.eFloatingBottomContainer,false);};RowRenderer.prototype.refreshFloatingRows=function(renderedRows,rowData,pinnedContainer,bodyContainer,isTop){var _this=this;renderedRows.forEach(function(row){row.destroy();});renderedRows.length=0;var columns=this.columnModel.getDisplayedColumns();if(!columns||columns.length==0){return;}var mainRowWidth=this.columnModel.getBodyContainerWidth();if(rowData){rowData.forEach(function(data,rowIndex){var node={data:data,floating:true,floatingTop:isTop,floatingBottom:!isTop};var renderedRow=new grid.RenderedRow(_this.gridOptionsWrapper,_this.valueService,_this.$scope,_this.angularGrid,_this.columnModel,_this.expressionService,_this.cellRendererMap,_this.selectionRendererFactory,_this.$compile,_this.templateService,_this.selectionController,_this,bodyContainer,pinnedContainer,node,rowIndex);renderedRow.setMainRowWidth(mainRowWidth);renderedRows.push(renderedRow);});}};RowRenderer.prototype.refreshView=function(refreshFromIndex){if(!this.gridOptionsWrapper.isDontUseScrolls()){var rowCount=this.rowModel.getVirtualRowCount();var containerHeight=this.gridOptionsWrapper.getRowHeight()*rowCount;this.eBodyContainer.style.height=containerHeight+"px";this.ePinnedColsContainer.style.height=containerHeight+"px";}this.refreshAllVirtualRows(refreshFromIndex);this.refreshAllFloatingRows();};RowRenderer.prototype.softRefreshView=function(){_.iterateObject(this.renderedRows,function(key,renderedRow){renderedRow.softRefresh();});};RowRenderer.prototype.rowDataChanged=function(rows){var indexesToRemove=[];var renderedRows=this.renderedRows;Object.keys(renderedRows).forEach(function(key){var renderedRow=renderedRows[key];if(renderedRow.isDataInList(rows)){indexesToRemove.push(key);}});this.removeVirtualRow(indexesToRemove);this.drawVirtualRows();};RowRenderer.prototype.refreshAllVirtualRows=function(fromIndex){var rowsToRemove=Object.keys(this.renderedRows);this.removeVirtualRow(rowsToRemove,fromIndex);this.drawVirtualRows();};RowRenderer.prototype.refreshGroupRows=function(){var rowsToRemove=[];var that=this;Object.keys(this.renderedRows).forEach(function(key){var renderedRow=that.renderedRows[key];if(renderedRow.isGroup()){rowsToRemove.push(key);}});this.removeVirtualRow(rowsToRemove);this.ensureRowsRendered();};RowRenderer.prototype.removeVirtualRow=function(rowsToRemove,fromIndex){var that=this;var realFromIndex=(typeof fromIndex==="number")?fromIndex:-1;rowsToRemove.forEach(function(indexToRemove){if(indexToRemove>=realFromIndex){that.unbindVirtualRow(indexToRemove);if(that.focusedCell&&that.focusedCell.rowIndex==indexToRemove){that.focusedCell=null;}}});};RowRenderer.prototype.unbindVirtualRow=function(indexToRemove){var renderedRow=this.renderedRows[indexToRemove];renderedRow.destroy();if(this.gridOptionsWrapper.getVirtualRowRemoved()){this.gridOptionsWrapper.getVirtualRowRemoved()(renderedRow.getRowNode().data,indexToRemove);}this.angularGrid.onVirtualRowRemoved(indexToRemove);delete this.renderedRows[indexToRemove];};RowRenderer.prototype.drawVirtualRows=function(){var first;var last;var rowCount=this.rowModel.getVirtualRowCount();if(this.gridOptionsWrapper.isDontUseScrolls()){first=0;last=rowCount;}else{var topPixel=this.eBodyViewport.scrollTop;var bottomPixel=topPixel+this.eBodyViewport.offsetHeight;first=Math.floor(topPixel/this.gridOptionsWrapper.getRowHeight());last=Math.floor(bottomPixel/this.gridOptionsWrapper.getRowHeight());var buffer=this.gridOptionsWrapper.getRowBuffer()||grid.Constants.ROW_BUFFER_SIZE;first=first-buffer;last=last+buffer;if(first<0){first=0;}if(last>rowCount-1){last=rowCount-1;}}this.firstVirtualRenderedRow=first;this.lastVirtualRenderedRow=last;this.ensureRowsRendered();};RowRenderer.prototype.getFirstVirtualRenderedRow=function(){return this.firstVirtualRenderedRow;};RowRenderer.prototype.getLastVirtualRenderedRow=function(){return this.lastVirtualRenderedRow;};RowRenderer.prototype.ensureRowsRendered=function(){var mainRowWidth=this.columnModel.getBodyContainerWidth();var that=this;var rowsToRemove=Object.keys(this.renderedRows);for(var rowIndex=this.firstVirtualRenderedRow;rowIndex<=this.lastVirtualRenderedRow;rowIndex++){if(rowsToRemove.indexOf(rowIndex.toString())>=0){rowsToRemove.splice(rowsToRemove.indexOf(rowIndex.toString()),1);continue;}var node=this.rowModel.getVirtualRow(rowIndex);if(node){that.insertRow(node,rowIndex,mainRowWidth);}}this.removeVirtualRow(rowsToRemove);if(this.gridOptionsWrapper.isAngularCompileRows()){setTimeout(function(){that.$scope.$apply();},0);}};RowRenderer.prototype.insertRow=function(node,rowIndex,mainRowWidth){var columns=this.columnModel.getDisplayedColumns();if(!columns||columns.length==0){return;}var renderedRow=new grid.RenderedRow(this.gridOptionsWrapper,this.valueService,this.$scope,this.angularGrid,this.columnModel,this.expressionService,this.cellRendererMap,this.selectionRendererFactory,this.$compile,this.templateService,this.selectionController,this,this.eBodyContainer,this.ePinnedColsContainer,node,rowIndex);renderedRow.setMainRowWidth(mainRowWidth);this.renderedRows[rowIndex]=renderedRow;};RowRenderer.prototype.getIndexOfRenderedNode=function(node){var renderedRows=this.renderedRows;var keys=Object.keys(renderedRows);for(var i=0;i<keys.length;i++){var key=keys[i];if(renderedRows[key].getRowNode()===node){return renderedRows[key].getRowIndex();}}return -1;};RowRenderer.prototype.navigateToNextCell=function(key,rowIndex,column){var cellToFocus={rowIndex:rowIndex,column:column};var renderedRow;var eCell;while(!eCell){cellToFocus=this.getNextCellToFocus(key,cellToFocus);if(!cellToFocus){return;}renderedRow=this.renderedRows[cellToFocus.rowIndex];eCell=renderedRow.getCellForCol(cellToFocus.column);}this.gridPanel.ensureIndexVisible(renderedRow.getRowIndex());this.focusCell(eCell,cellToFocus.rowIndex,cellToFocus.column.index,cellToFocus.column.colDef,true);};RowRenderer.prototype.getNextCellToFocus=function(key,lastCellToFocus){var lastRowIndex=lastCellToFocus.rowIndex;var lastColumn=lastCellToFocus.column;var nextRowToFocus;var nextColumnToFocus;switch(key){case grid.Constants.KEY_UP:if(lastRowIndex===this.firstVirtualRenderedRow){return null;}nextRowToFocus=lastRowIndex-1;nextColumnToFocus=lastColumn;break;case grid.Constants.KEY_DOWN:if(lastRowIndex===this.lastVirtualRenderedRow){return null;}nextRowToFocus=lastRowIndex+1;nextColumnToFocus=lastColumn;break;case grid.Constants.KEY_RIGHT:var colToRight=this.columnModel.getVisibleColAfter(lastColumn);if(!colToRight){return null;}nextRowToFocus=lastRowIndex;nextColumnToFocus=colToRight;break;case grid.Constants.KEY_LEFT:var colToLeft=this.columnModel.getVisibleColBefore(lastColumn);if(!colToLeft){return null;}nextRowToFocus=lastRowIndex;nextColumnToFocus=colToLeft;break;}return{rowIndex:nextRowToFocus,column:nextColumnToFocus};};RowRenderer.prototype.onRowSelected=function(rowIndex,selected){if(this.renderedRows[rowIndex]){this.renderedRows[rowIndex].onRowSelected(selected);}};RowRenderer.prototype.focusCell=function(eCell,rowIndex,colIndex,colDef,forceBrowserFocus){if(this.gridOptionsWrapper.isSuppressCellSelection()){return;}this.eParentsOfRows.forEach(function(rowContainer){_.querySelectorAll_replaceCssClass(rowContainer,".ag-cell-focus","ag-cell-focus","ag-cell-no-focus");var selectorForCell='[row="'+rowIndex+'"] [col="'+colIndex+'"]';_.querySelectorAll_replaceCssClass(rowContainer,selectorForCell,"ag-cell-no-focus","ag-cell-focus");});this.focusedCell={rowIndex:rowIndex,colIndex:colIndex,node:this.rowModel.getVirtualRow(rowIndex),colDef:colDef};if(forceBrowserFocus){eCell.focus();}if(typeof this.gridOptionsWrapper.getCellFocused()==="function"){this.gridOptionsWrapper.getCellFocused()(this.focusedCell);}};RowRenderer.prototype.getFocusedCell=function(){return this.focusedCell;};RowRenderer.prototype.setFocusedCell=function(rowIndex,colIndex){var renderedRow=this.renderedRows[rowIndex];var column=this.columnModel.getDisplayedColumns()[colIndex];if(renderedRow&&column){var eCell=renderedRow.getCellForCol(column);this.focusCell(eCell,rowIndex,colIndex,column.colDef,true);}};RowRenderer.prototype.startEditingNextCell=function(rowIndex,column,shiftKey){var firstRowToCheck=this.firstVirtualRenderedRow;var lastRowToCheck=this.lastVirtualRenderedRow;var currentRowIndex=rowIndex;var visibleColumns=this.columnModel.getDisplayedColumns();var currentCol=column;while(true){var indexOfCurrentCol=visibleColumns.indexOf(currentCol);if(shiftKey){currentCol=visibleColumns[indexOfCurrentCol-1];if(!currentCol){currentCol=visibleColumns[visibleColumns.length-1];currentRowIndex--;}if(currentRowIndex<firstRowToCheck){return;}}else{currentCol=visibleColumns[indexOfCurrentCol+1];if(!currentCol){currentCol=visibleColumns[0];currentRowIndex++;}if(currentRowIndex>lastRowToCheck){return;}}var nextRenderedRow=this.renderedRows[currentRowIndex];var nextRenderedCell=nextRenderedRow.getRenderedCellForColumn(currentCol);if(nextRenderedCell.isCellEditable()){nextRenderedCell.startEditing();nextRenderedCell.focusCell(false);return;}}};return RowRenderer;})();grid.RowRenderer=RowRenderer;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var SELECTED=0;var UNSELECTED=1;var MIXED=2;var DO_NOT_CARE=3;var SelectionController=(function(){function SelectionController(){}SelectionController.prototype.init=function(angularGrid,gridPanel,gridOptionsWrapper,$scope,rowRenderer){this.eParentsOfRows=gridPanel.getRowsParent();this.angularGrid=angularGrid;this.gridOptionsWrapper=gridOptionsWrapper;this.$scope=$scope;this.rowRenderer=rowRenderer;this.initSelectedNodesById();this.selectedRows=[];gridOptionsWrapper.setSelectedRows(this.selectedRows);};SelectionController.prototype.initSelectedNodesById=function(){this.selectedNodesById={};this.gridOptionsWrapper.setSelectedNodesById(this.selectedNodesById);};SelectionController.prototype.getSelectedNodes=function(){var selectedNodes=[];var keys=Object.keys(this.selectedNodesById);for(var i=0;i<keys.length;i++){var id=keys[i];var selectedNode=this.selectedNodesById[id];selectedNodes.push(selectedNode);}return selectedNodes;};SelectionController.prototype.getBestCostNodeSelection=function(){if(typeof this.rowModel.getTopLevelNodes!=="function"){throw"selectAll not available when rows are on the server";}var topLevelNodes=this.rowModel.getTopLevelNodes();var result=[];var that=this;function traverse(nodes){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(that.isNodeSelected(node)){result.push(node);}else{if(node.group&&node.children){traverse(node.children);}}}}traverse(topLevelNodes);return result;};SelectionController.prototype.setRowModel=function(rowModel){this.rowModel=rowModel;};SelectionController.prototype.deselectAll=function(){this.initSelectedNodesById();this.syncSelectedRowsAndCallListener();};SelectionController.prototype.selectAll=function(){if(typeof this.rowModel.getTopLevelNodes!=="function"){throw"selectAll not available when rows are on the server";}var selectedNodesById=this.selectedNodesById;var includeGroups=!this.gridOptionsWrapper.isGroupSelectsChildren();function recursivelySelect(nodes){if(nodes){for(var i=0;i<nodes.length;i++){var node=nodes[i];if(node.group){recursivelySelect(node.children);if(includeGroups){selectedNodesById[node.id]=node;}}else{selectedNodesById[node.id]=node;}}}}var topLevelNodes=this.rowModel.getTopLevelNodes();recursivelySelect(topLevelNodes);this.syncSelectedRowsAndCallListener();};SelectionController.prototype.selectNode=function(node,tryMulti,suppressEvents){var multiSelect=this.gridOptionsWrapper.isRowSelectionMulti()&&tryMulti;var nodeToSelect;if(node.footer){nodeToSelect=node.sibling;}else{nodeToSelect=node;}var atLeastOneItemUnselected=false;var atLeastOneItemSelected=false;if(!multiSelect){atLeastOneItemUnselected=this.doWorkOfDeselectAllNodes();}if(this.gridOptionsWrapper.isGroupSelectsChildren()&&nodeToSelect.group){atLeastOneItemSelected=this.recursivelySelectAllChildren(nodeToSelect);}else{atLeastOneItemSelected=this.doWorkOfSelectNode(nodeToSelect,suppressEvents);}if(atLeastOneItemUnselected||atLeastOneItemSelected){this.syncSelectedRowsAndCallListener(suppressEvents);}this.updateGroupParentsIfNeeded();};SelectionController.prototype.recursivelySelectAllChildren=function(node,suppressEvents){var atLeastOne=false;if(node.children){for(var i=0;i<node.children.length;i++){var child=node.children[i];if(child.group){if(this.recursivelySelectAllChildren(child)){atLeastOne=true;}}else{if(this.doWorkOfSelectNode(child,suppressEvents)){atLeastOne=true;}}}}return atLeastOne;};SelectionController.prototype.recursivelyDeselectAllChildren=function(node){if(node.children){for(var i=0;i<node.children.length;i++){var child=node.children[i];if(child.group){this.recursivelyDeselectAllChildren(child);}else{this.deselectRealNode(child);}}}};SelectionController.prototype.doWorkOfSelectNode=function(node,suppressEvents){if(this.selectedNodesById[node.id]){return false;}this.selectedNodesById[node.id]=node;this.addCssClassForNode_andInformVirtualRowListener(node);if(node.group&&node.expanded&&node.sibling){this.addCssClassForNode_andInformVirtualRowListener(node.sibling);}if(!suppressEvents&&typeof this.gridOptionsWrapper.getRowSelected()==="function"){this.gridOptionsWrapper.getRowSelected()(node.data,node);}return true;};SelectionController.prototype.addCssClassForNode_andInformVirtualRowListener=function(node){var virtualRenderedRowIndex=this.rowRenderer.getIndexOfRenderedNode(node);if(virtualRenderedRowIndex>=0){this.eParentsOfRows.forEach(function(rowContainer){utils.querySelectorAll_addCssClass(rowContainer,'[row="'+virtualRenderedRowIndex+'"]',"ag-row-selected");});this.angularGrid.onVirtualRowSelected(virtualRenderedRowIndex,true);}};SelectionController.prototype.doWorkOfDeselectAllNodes=function(nodeToKeepSelected){var atLeastOneSelectionChange;var selectedNodeKeys=Object.keys(this.selectedNodesById);for(var i=0;i<selectedNodeKeys.length;i++){var key=selectedNodeKeys[i];var nodeToDeselect=this.selectedNodesById[key];if(nodeToDeselect===nodeToKeepSelected){continue;}else{this.deselectRealNode(nodeToDeselect);atLeastOneSelectionChange=true;}}return atLeastOneSelectionChange;};SelectionController.prototype.deselectRealNode=function(node){this.removeCssClassForNode(node);if(node.group&&node.expanded&&node.sibling){this.removeCssClassForNode(node.sibling);}delete this.selectedNodesById[node.id];};SelectionController.prototype.removeCssClassForNode=function(node){var virtualRenderedRowIndex=this.rowRenderer.getIndexOfRenderedNode(node);if(virtualRenderedRowIndex>=0){this.eParentsOfRows.forEach(function(rowContainer){utils.querySelectorAll_removeCssClass(rowContainer,'[row="'+virtualRenderedRowIndex+'"]',"ag-row-selected");});this.angularGrid.onVirtualRowSelected(virtualRenderedRowIndex,false);}};SelectionController.prototype.deselectIndex=function(rowIndex){var node=this.rowModel.getVirtualRow(rowIndex);this.deselectNode(node);};SelectionController.prototype.deselectNode=function(node){if(node){if(this.gridOptionsWrapper.isGroupSelectsChildren()&&node.group){this.recursivelyDeselectAllChildren(node);}else{this.deselectRealNode(node);}}this.syncSelectedRowsAndCallListener();this.updateGroupParentsIfNeeded();};SelectionController.prototype.selectIndex=function(index,tryMulti,suppressEvents){var node=this.rowModel.getVirtualRow(index);this.selectNode(node,tryMulti,suppressEvents);};SelectionController.prototype.syncSelectedRowsAndCallListener=function(suppressEvents){var selectedRows=this.selectedRows;var oldCount=selectedRows.length;selectedRows.length=0;var keys=Object.keys(this.selectedNodesById);for(var i=0;i<keys.length;i++){if(this.selectedNodesById[keys[i]]!==undefined){var selectedNode=this.selectedNodesById[keys[i]];selectedRows.push(selectedNode.data);}}var nothingChangedMustBeInitialising=oldCount===0&&selectedRows.length===0;if(!nothingChangedMustBeInitialising&&!suppressEvents&&typeof this.gridOptionsWrapper.getSelectionChanged()==="function"){this.gridOptionsWrapper.getSelectionChanged()();}var that=this;if(this.$scope){setTimeout(function(){that.$scope.$apply();},0);}};SelectionController.prototype.recursivelyCheckIfSelected=function(node){var foundSelected=false;var foundUnselected=false;if(node.children){for(var i=0;i<node.children.length;i++){var child=node.children[i];var result;if(child.group){result=this.recursivelyCheckIfSelected(child);switch(result){case SELECTED:foundSelected=true;break;case UNSELECTED:foundUnselected=true;break;case MIXED:foundSelected=true;foundUnselected=true;break;}}else{if(this.isNodeSelected(child)){foundSelected=true;}else{foundUnselected=true;}}if(foundSelected&&foundUnselected){return MIXED;}}}if(foundSelected){return SELECTED;}else{if(foundUnselected){return UNSELECTED;}else{return DO_NOT_CARE;}}};SelectionController.prototype.isNodeSelected=function(node){if(this.gridOptionsWrapper.isGroupSelectsChildren()&&node.group){var resultOfChildren=this.recursivelyCheckIfSelected(node);switch(resultOfChildren){case SELECTED:return true;case UNSELECTED:return false;default:return undefined;}}else{return this.selectedNodesById[node.id]!==undefined;}};SelectionController.prototype.updateGroupParentsIfNeeded=function(){if(!this.gridOptionsWrapper.isGroupSelectsChildren()){return;}var firstRow=this.rowRenderer.getFirstVirtualRenderedRow();var lastRow=this.rowRenderer.getLastVirtualRenderedRow();for(var rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){var node=this.rowModel.getVirtualRow(rowIndex);if(node.group){var selected=this.isNodeSelected(node);this.angularGrid.onVirtualRowSelected(rowIndex,selected);this.eParentsOfRows.forEach(function(rowContainer){if(selected){utils.querySelectorAll_addCssClass(rowContainer,'[row="'+rowIndex+'"]',"ag-row-selected");}else{utils.querySelectorAll_removeCssClass(rowContainer,'[row="'+rowIndex+'"]',"ag-row-selected");}});}}};return SelectionController;})();grid.SelectionController=SelectionController;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var RenderedHeaderElement=(function(){function RenderedHeaderElement(eRoot){this.eRoot=eRoot;}RenderedHeaderElement.prototype.getERoot=function(){return this.eRoot;};RenderedHeaderElement.prototype.destroy=function(){};RenderedHeaderElement.prototype.refreshFilterIcon=function(){};RenderedHeaderElement.prototype.refreshSortIcon=function(){};RenderedHeaderElement.prototype.onDragStart=function(){};RenderedHeaderElement.prototype.onDragging=function(dragChange){};RenderedHeaderElement.prototype.onIndividualColumnResized=function(column){};RenderedHeaderElement.prototype.addDragHandler=function(eDraggableElement){var that=this;eDraggableElement.addEventListener("mousedown",function(downEvent){that.onDragStart();that.eRoot.style.cursor="col-resize";that.dragStartX=downEvent.clientX;var listenersToRemove={};listenersToRemove.mousemove=function(moveEvent){var newX=moveEvent.clientX;var change=newX-that.dragStartX;that.onDragging(change);};listenersToRemove.mouseup=function(){that.stopDragging(listenersToRemove);};listenersToRemove.mouseleave=function(){that.stopDragging(listenersToRemove);};that.eRoot.addEventListener("mousemove",listenersToRemove.mousemove);that.eRoot.addEventListener("mouseup",listenersToRemove.mouseup);that.eRoot.addEventListener("mouseleave",listenersToRemove.mouseleave);});};RenderedHeaderElement.prototype.stopDragging=function(listenersToRemove){this.eRoot.style.cursor="";var that=this;_.iterateObject(listenersToRemove,function(key,listener){that.eRoot.removeEventListener(key,listener);});};return RenderedHeaderElement;})();grid.RenderedHeaderElement=RenderedHeaderElement;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var constants=grid.Constants;var svgFactory=grid.SvgFactory.getInstance();var RenderedHeaderCell=(function(_super){__extends(RenderedHeaderCell,_super);function RenderedHeaderCell(column,parentGroup,gridOptionsWrapper,parentScope,filterManager,columnController,$compile,angularGrid,eRoot){_super.call(this,eRoot);this.column=column;this.parentGroup=parentGroup;this.gridOptionsWrapper=gridOptionsWrapper;this.parentScope=parentScope;this.filterManager=filterManager;this.columnController=columnController;this.$compile=$compile;this.angularGrid=angularGrid;this.setupComponents();}RenderedHeaderCell.prototype.getGui=function(){return this.eHeaderCell;};RenderedHeaderCell.prototype.destroy=function(){if(this.childScope){this.childScope.$destroy();}};RenderedHeaderCell.prototype.createScope=function(){if(this.gridOptionsWrapper.isAngularCompileHeaders()){this.childScope=this.parentScope.$new();this.childScope.colDef=this.column.colDef;this.childScope.colIndex=this.column.index;this.childScope.colDefWrapper=this.column;}};RenderedHeaderCell.prototype.addClasses=function(){_.addCssClass(this.eHeaderCell,"ag-header-cell");if(this.gridOptionsWrapper.isGroupHeaders()){_.addCssClass(this.eHeaderCell,"ag-header-cell-grouped");}else{_.addCssClass(this.eHeaderCell,"ag-header-cell-not-grouped");}};RenderedHeaderCell.prototype.addMenu=function(){var showMenu=this.gridOptionsWrapper.isEnableFilter()&&!this.column.colDef.suppressMenu;if(!showMenu){return;}var eMenuButton=_.createIcon("menu",this.gridOptionsWrapper,this.column,svgFactory.createMenuSvg);_.addCssClass(eMenuButton,"ag-header-icon");eMenuButton.setAttribute("class","ag-header-cell-menu-button");var that=this;eMenuButton.onclick=function(){that.filterManager.showFilter(that.column,this);};this.eHeaderCell.appendChild(eMenuButton);if(!this.gridOptionsWrapper.isSuppressMenuHide()){eMenuButton.style.opacity="0";this.eHeaderCell.onmouseenter=function(){eMenuButton.style.opacity="1";};this.eHeaderCell.onmouseleave=function(){eMenuButton.style.opacity="0";};}eMenuButton.style["transition"]="opacity 0.5s, border 0.2s";var style=eMenuButton.style;style["-webkit-transition"]="opacity 0.5s, border 0.2s";};RenderedHeaderCell.prototype.addSortIcons=function(headerCellLabel){var addSortIcons=this.gridOptionsWrapper.isEnableSorting()&&!this.column.colDef.suppressSorting;if(!addSortIcons){return;}this.eSortAsc=_.createIcon("sortAscending",this.gridOptionsWrapper,this.column,svgFactory.createArrowUpSvg);this.eSortDesc=_.createIcon("sortDescending",this.gridOptionsWrapper,this.column,svgFactory.createArrowDownSvg);_.addCssClass(this.eSortAsc,"ag-header-icon ag-sort-ascending-icon");_.addCssClass(this.eSortDesc,"ag-header-icon ag-sort-descending-icon");headerCellLabel.appendChild(this.eSortAsc);headerCellLabel.appendChild(this.eSortDesc);if(this.column.colDef.unSortIcon||this.gridOptionsWrapper.isUnSortIcon()){this.eSortNone=_.createIcon("sortUnSort",this.gridOptionsWrapper,this.column,svgFactory.createArrowUpDownSvg);_.addCssClass(this.eSortNone,"ag-header-icon ag-sort-none-icon");headerCellLabel.appendChild(this.eSortNone);}this.eSortAsc.style.display="none";this.eSortDesc.style.display="none";this.addSortHandling(headerCellLabel);};RenderedHeaderCell.prototype.setupComponents=function(){this.eHeaderCell=document.createElement("div");this.createScope();this.addClasses();this.addHeaderClassesFromCollDef();if(this.column.colDef.headerTooltip){this.eHeaderCell.title=this.column.colDef.headerTooltip;}if(this.gridOptionsWrapper.isEnableColResize()&&!this.column.colDef.suppressResize){var headerCellResize=document.createElement("div");headerCellResize.className="ag-header-cell-resize";this.eHeaderCell.appendChild(headerCellResize);this.addDragHandler(headerCellResize);}this.addMenu();var headerCellLabel=document.createElement("div");headerCellLabel.className="ag-header-cell-label";this.addSortIcons(headerCellLabel);this.eFilterIcon=_.createIcon("filter",this.gridOptionsWrapper,this.column,svgFactory.createFilterSvg);_.addCssClass(this.eFilterIcon,"ag-header-icon");headerCellLabel.appendChild(this.eFilterIcon);var headerCellRenderer;if(this.column.colDef.headerCellRenderer){headerCellRenderer=this.column.colDef.headerCellRenderer;}else{if(this.gridOptionsWrapper.getHeaderCellRenderer()){headerCellRenderer=this.gridOptionsWrapper.getHeaderCellRenderer();}}var headerNameValue=this.columnController.getDisplayNameForCol(this.column);if(headerCellRenderer){this.useRenderer(headerNameValue,headerCellRenderer,headerCellLabel);}else{var eInnerText=document.createElement("span");eInnerText.className="ag-header-cell-text";eInnerText.innerHTML=headerNameValue;headerCellLabel.appendChild(eInnerText);}this.eHeaderCell.appendChild(headerCellLabel);this.eHeaderCell.style.width=_.formatWidth(this.column.actualWidth);this.refreshFilterIcon();this.refreshSortIcon();};RenderedHeaderCell.prototype.useRenderer=function(headerNameValue,headerCellRenderer,headerCellLabel){var cellRendererParams={colDef:this.column.colDef,$scope:this.childScope,context:this.gridOptionsWrapper.getContext(),value:headerNameValue,api:this.gridOptionsWrapper.getApi()};var cellRendererResult=headerCellRenderer(cellRendererParams);var childToAppend;if(_.isNodeOrElement(cellRendererResult)){childToAppend=cellRendererResult;}else{var eTextSpan=document.createElement("span");eTextSpan.innerHTML=cellRendererResult;childToAppend=eTextSpan;}if(this.gridOptionsWrapper.isAngularCompileHeaders()){var childToAppendCompiled=this.$compile(childToAppend)(this.childScope)[0];headerCellLabel.appendChild(childToAppendCompiled);}else{headerCellLabel.appendChild(childToAppend);}};RenderedHeaderCell.prototype.refreshFilterIcon=function(){if(this.eFilterIcon){var filterPresent=this.filterManager.isFilterPresentForCol(this.column.colId);var displayStyle=filterPresent?"inline":"none";this.eFilterIcon.style.display=displayStyle;}};RenderedHeaderCell.prototype.refreshSortIcon=function(){var sortAscending=this.column.sort===constants.ASC;var sortDescending=this.column.sort===constants.DESC;var unSort=this.column.sort!==constants.DESC&&this.column.sort!==constants.ASC;if(this.eSortAsc){_.setVisible(this.eSortAsc,sortAscending);}if(this.eSortDesc){_.setVisible(this.eSortDesc,sortDescending);}if(this.eSortNone){_.setVisible(this.eSortNone,unSort);}};RenderedHeaderCell.prototype.getNextSortDirection=function(){var sortingOrder;if(this.column.colDef.sortingOrder){sortingOrder=this.column.colDef.sortingOrder;}else{if(this.gridOptionsWrapper.getSortingOrder()){sortingOrder=this.gridOptionsWrapper.getSortingOrder();}else{sortingOrder=RenderedHeaderCell.DEFAULT_SORTING_ORDER;}}if(!Array.isArray(sortingOrder)||sortingOrder.length<=0){console.warn("ag-grid: sortingOrder must be an array with at least one element, currently it's "+sortingOrder);return;}var currentIndex=sortingOrder.indexOf(this.column.sort);var notInArray=currentIndex<0;var lastItemInArray=currentIndex==sortingOrder.length-1;var result;if(notInArray||lastItemInArray){result=sortingOrder[0];}else{result=sortingOrder[currentIndex+1];}if(RenderedHeaderCell.DEFAULT_SORTING_ORDER.indexOf(result)<0){console.warn("ag-grid: invalid sort type "+result);return null;}return result;};RenderedHeaderCell.prototype.addSortHandling=function(headerCellLabel){var that=this;headerCellLabel.addEventListener("click",function(event){that.column.sort=that.getNextSortDirection();if(that.column.sort){that.column.sortedAt=new Date().valueOf();}else{that.column.sortedAt=null;}var doingMultiSort=!that.gridOptionsWrapper.isSuppressMultiSort()&&event.shiftKey;if(!doingMultiSort){that.columnController.getAllColumns().forEach(function(columnToClear){if(!(columnToClear===that.column)){columnToClear.sort=null;}});}that.angularGrid.onSortingChanged();});};RenderedHeaderCell.prototype.onDragStart=function(){this.startWidth=this.column.actualWidth;};RenderedHeaderCell.prototype.onDragging=function(dragChange){var newWidth=this.startWidth+dragChange;this.columnController.setColumnWidth(this.column,newWidth);};RenderedHeaderCell.prototype.onIndividualColumnResized=function(column){if(this.column!==column){return;}var newWidthPx=column.actualWidth+"px";this.eHeaderCell.style.width=newWidthPx;};RenderedHeaderCell.prototype.addHeaderClassesFromCollDef=function(){if(this.column.colDef.headerClass){var classToUse;if(typeof this.column.colDef.headerClass==="function"){var params={colDef:this.column.colDef,$scope:this.childScope,context:this.gridOptionsWrapper.getContext(),api:this.gridOptionsWrapper.getApi()};classToUse=this.column.colDef.headerClass(params);}else{classToUse=this.column.colDef.headerClass;}if(typeof classToUse==="string"){_.addCssClass(this.eHeaderCell,classToUse);}else{if(Array.isArray(classToUse)){classToUse.forEach(function(cssClassItem){_.addCssClass(this.eHeaderCell,cssClassItem);});}}}};RenderedHeaderCell.DEFAULT_SORTING_ORDER=[constants.ASC,constants.DESC,null];return RenderedHeaderCell;})(grid.RenderedHeaderElement);grid.RenderedHeaderCell=RenderedHeaderCell;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var constants=grid.Constants;var svgFactory=grid.SvgFactory.getInstance();var RenderedHeaderGroupCell=(function(_super){__extends(RenderedHeaderGroupCell,_super);function RenderedHeaderGroupCell(columnGroup,gridOptionsWrapper,columnController,eRoot,angularGrid,parentScope,filterManager,$compile){_super.call(this,eRoot);this.children=[];this.columnController=columnController;this.columnGroup=columnGroup;this.gridOptionsWrapper=gridOptionsWrapper;this.parentScope=parentScope;this.filterManager=filterManager;this.$compile=$compile;this.angularGrid=angularGrid;this.setupComponents();}RenderedHeaderGroupCell.prototype.getGui=function(){return this.eHeaderGroup;};RenderedHeaderGroupCell.prototype.destroy=function(){this.children.forEach(function(childElement){childElement.destroy();});};RenderedHeaderGroupCell.prototype.refreshFilterIcon=function(){this.children.forEach(function(childElement){childElement.refreshFilterIcon();});};RenderedHeaderGroupCell.prototype.refreshSortIcon=function(){this.children.forEach(function(childElement){childElement.refreshSortIcon();});};RenderedHeaderGroupCell.prototype.onIndividualColumnResized=function(column){if(!this.isColumnInOurDisplayedGroup(column)){return;}this.children.forEach(function(childElement){childElement.onIndividualColumnResized(column);});this.setWidthOfGroupHeaderCell();};RenderedHeaderGroupCell.prototype.setupComponents=function(){var _this=this;this.eHeaderGroup=document.createElement("div");this.eHeaderGroup.className="ag-header-group";this.eHeaderGroupCell=document.createElement("div");var classNames=["ag-header-group-cell"];if(this.columnGroup.name){classNames.push("ag-header-group-cell-with-group");}else{classNames.push("ag-header-group-cell-no-group");}this.eHeaderGroupCell.className=classNames.join(" ");if(this.gridOptionsWrapper.isEnableColResize()){this.eHeaderCellResize=document.createElement("div");this.eHeaderCellResize.className="ag-header-cell-resize";this.eHeaderGroupCell.appendChild(this.eHeaderCellResize);this.addDragHandler(this.eHeaderCellResize);}var groupName=this.columnGroup.name;if(groupName&&groupName!==""){var eGroupCellLabel=document.createElement("div");eGroupCellLabel.className="ag-header-group-cell-label";this.eHeaderGroupCell.appendChild(eGroupCellLabel);var eInnerText=document.createElement("span");eInnerText.className="ag-header-group-text";eInnerText.innerHTML=groupName;eGroupCellLabel.appendChild(eInnerText);if(this.columnGroup.expandable){this.addGroupExpandIcon(eGroupCellLabel);}}this.eHeaderGroup.appendChild(this.eHeaderGroupCell);this.columnGroup.displayedColumns.forEach(function(column){var renderedHeaderCell=new grid.RenderedHeaderCell(column,_this,_this.gridOptionsWrapper,_this.parentScope,_this.filterManager,_this.columnController,_this.$compile,_this.angularGrid,_this.getERoot());_this.children.push(renderedHeaderCell);_this.eHeaderGroup.appendChild(renderedHeaderCell.getGui());});this.setWidthOfGroupHeaderCell();};RenderedHeaderGroupCell.prototype.isColumnInOurDisplayedGroup=function(column){return this.columnGroup.displayedColumns.indexOf(column)>=0;};RenderedHeaderGroupCell.prototype.setWidthOfGroupHeaderCell=function(){this.eHeaderGroupCell.style.width=_.formatWidth(this.columnGroup.actualWidth);};RenderedHeaderGroupCell.prototype.addGroupExpandIcon=function(eGroupCellLabel){var eGroupIcon;if(this.columnGroup.expanded){eGroupIcon=_.createIcon("headerGroupOpened",this.gridOptionsWrapper,null,svgFactory.createArrowLeftSvg);}else{eGroupIcon=_.createIcon("headerGroupClosed",this.gridOptionsWrapper,null,svgFactory.createArrowRightSvg);}eGroupIcon.className="ag-header-expand-icon";eGroupCellLabel.appendChild(eGroupIcon);var that=this;eGroupIcon.onclick=function(){var newExpandedValue=!that.columnGroup.expanded;that.columnController.columnGroupOpened(that.columnGroup,newExpandedValue);};};RenderedHeaderGroupCell.prototype.onDragStart=function(){var _this=this;this.groupWidthStart=this.columnGroup.actualWidth;this.childrenWidthStarts=[];this.columnGroup.displayedColumns.forEach(function(column){_this.childrenWidthStarts.push(column.actualWidth);});this.minWidth=this.columnGroup.getMinimumWidth();};RenderedHeaderGroupCell.prototype.onDragging=function(dragChange){var _this=this;var newWidth=this.groupWidthStart+dragChange;if(newWidth<this.minWidth){newWidth=this.minWidth;}var changeRatio=newWidth/this.groupWidthStart;var pixelsToDistribute=newWidth;var displayedColumns=this.columnGroup.displayedColumns;displayedColumns.forEach(function(column,index){var notLastCol=index!==(displayedColumns.length-1);var newChildSize;if(notLastCol){var startChildSize=_this.childrenWidthStarts[index];newChildSize=startChildSize*changeRatio;if(newChildSize<constants.MIN_COL_WIDTH){newChildSize=constants.MIN_COL_WIDTH;}pixelsToDistribute-=newChildSize;}else{newChildSize=pixelsToDistribute;}_this.columnController.setColumnWidth(column,newChildSize);});};return RenderedHeaderGroupCell;})(grid.RenderedHeaderElement);grid.RenderedHeaderGroupCell=RenderedHeaderGroupCell;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var HeaderRenderer=(function(){function HeaderRenderer(){this.headerElements=[];}HeaderRenderer.prototype.init=function(gridOptionsWrapper,columnController,gridPanel,angularGrid,filterManager,$scope,$compile){this.gridOptionsWrapper=gridOptionsWrapper;this.columnController=columnController;this.angularGrid=angularGrid;this.filterManager=filterManager;this.$scope=$scope;this.$compile=$compile;this.findAllElements(gridPanel);};HeaderRenderer.prototype.findAllElements=function(gridPanel){this.ePinnedHeader=gridPanel.getPinnedHeader();this.eHeaderContainer=gridPanel.getHeaderContainer();this.eRoot=gridPanel.getRoot();};HeaderRenderer.prototype.refreshHeader=function(){utils.removeAllChildren(this.ePinnedHeader);utils.removeAllChildren(this.eHeaderContainer);this.headerElements.forEach(function(headerElement){headerElement.destroy();});this.headerElements=[];if(this.gridOptionsWrapper.isGroupHeaders()){this.insertHeadersWithGrouping();}else{this.insertHeadersWithoutGrouping();}};HeaderRenderer.prototype.insertHeadersWithGrouping=function(){var _this=this;var groups=this.columnController.getHeaderGroups();groups.forEach(function(columnGroup){var renderedHeaderGroup=new grid.RenderedHeaderGroupCell(columnGroup,_this.gridOptionsWrapper,_this.columnController,_this.eRoot,_this.angularGrid,_this.$scope,_this.filterManager,_this.$compile);_this.headerElements.push(renderedHeaderGroup);var eContainerToAddTo=columnGroup.pinned?_this.ePinnedHeader:_this.eHeaderContainer;eContainerToAddTo.appendChild(renderedHeaderGroup.getGui());});};HeaderRenderer.prototype.insertHeadersWithoutGrouping=function(){var _this=this;this.columnController.getDisplayedColumns().forEach(function(column){var renderedHeaderCell=new grid.RenderedHeaderCell(column,null,_this.gridOptionsWrapper,_this.$scope,_this.filterManager,_this.columnController,_this.$compile,_this.angularGrid,_this.eRoot);_this.headerElements.push(renderedHeaderCell);var eContainerToAddTo=column.pinned?_this.ePinnedHeader:_this.eHeaderContainer;eContainerToAddTo.appendChild(renderedHeaderCell.getGui());});};HeaderRenderer.prototype.updateSortIcons=function(){this.headerElements.forEach(function(headerElement){headerElement.refreshSortIcon();});};HeaderRenderer.prototype.updateFilterIcons=function(){this.headerElements.forEach(function(headerElement){headerElement.refreshFilterIcon();});};HeaderRenderer.prototype.onIndividualColumnResized=function(column){this.headerElements.forEach(function(headerElement){headerElement.onIndividualColumnResized(column);});};return HeaderRenderer;})();grid.HeaderRenderer=HeaderRenderer;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var GroupCreator=(function(){function GroupCreator(){}GroupCreator.prototype.init=function(valueService){this.valueService=valueService;};GroupCreator.prototype.group=function(rowNodes,groupedCols,expandByDefault){var topMostGroup={level:-1,children:[],_childrenMap:{}};var allGroups=[];allGroups.push(topMostGroup);var levelToInsertChild=groupedCols.length-1;var i;var currentLevel;var node;var data;var currentGroup;var groupKey;var nextGroup;var index=-1;for(i=0;i<rowNodes.length;i++){node=rowNodes[i];data=node.data;node.level=levelToInsertChild+1;for(currentLevel=0;currentLevel<groupedCols.length;currentLevel++){var groupColumn=groupedCols[currentLevel];groupKey=this.valueService.getValue(groupColumn.colDef,data,node);if(currentLevel===0){currentGroup=topMostGroup;}nextGroup=currentGroup._childrenMap[groupKey];if(!nextGroup){nextGroup={group:true,field:groupColumn.colId,id:index--,key:groupKey,expanded:this.isExpanded(expandByDefault,currentLevel),children:[],parent:currentGroup===topMostGroup?null:currentGroup,allChildrenCount:0,level:currentGroup.level+1,_childrenMap:{}};currentGroup._childrenMap[groupKey]=nextGroup;currentGroup.children.push(nextGroup);allGroups.push(nextGroup);}nextGroup.allChildrenCount++;if(currentLevel==levelToInsertChild){node.parent=nextGroup===topMostGroup?null:nextGroup;nextGroup.children.push(node);}else{currentGroup=nextGroup;}}}"";for(i=0;i<allGroups.length;i++){delete allGroups[i]._childrenMap;}return topMostGroup.children;};GroupCreator.prototype.isExpanded=function(expandByDefault,level){if(typeof expandByDefault==="number"){return level<expandByDefault;}else{return expandByDefault===true||expandByDefault==="true";}};return GroupCreator;})();grid.GroupCreator=GroupCreator;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var constants=grid.Constants;var InMemoryRowController=(function(){function InMemoryRowController(){this.createModel();}InMemoryRowController.prototype.init=function(gridOptionsWrapper,columnController,angularGrid,filterManager,$scope,groupCreator,valueService){this.gridOptionsWrapper=gridOptionsWrapper;this.columnController=columnController;this.angularGrid=angularGrid;this.filterManager=filterManager;this.$scope=$scope;this.groupCreator=groupCreator;this.valueService=valueService;this.allRows=null;this.rowsAfterGroup=null;this.rowsAfterFilter=null;this.rowsAfterSort=null;this.rowsAfterMap=null;};InMemoryRowController.prototype.createModel=function(){var that=this;this.model={getTopLevelNodes:function(){return that.rowsAfterGroup;},getVirtualRow:function(index){return that.rowsAfterMap[index];},getVirtualRowCount:function(){if(that.rowsAfterMap){return that.rowsAfterMap.length;}else{return 0;}},forEachInMemory:function(callback){that.forEachInMemory(callback);}};};InMemoryRowController.prototype.getModel=function(){return this.model;};InMemoryRowController.prototype.forEachInMemory=function(callback){function doCallback(list){if(list){for(var i=0;i<list.length;i++){var item=list[i];callback(item);if(item.group&&item.children){doCallback(item.children);}}}}doCallback(this.rowsAfterGroup);};InMemoryRowController.prototype.updateModel=function(step){switch(step){case constants.STEP_EVERYTHING:case constants.STEP_FILTER:this.doFilter();this.doAggregate();case constants.STEP_SORT:this.doSort();case constants.STEP_MAP:this.doGroupMapping();}if(typeof this.gridOptionsWrapper.getModelUpdated()==="function"){this.gridOptionsWrapper.getModelUpdated()();var $scope=this.$scope;if($scope){setTimeout(function(){$scope.$apply();},0);}}};InMemoryRowController.prototype.defaultGroupAggFunctionFactory=function(valueColumns,valueKeys){return function groupAggFunction(rows){var result={};if(valueKeys){for(var i=0;i<valueKeys.length;i++){var valueKey=valueKeys[i];result[valueKey]=aggregateColumn(rows,constants.SUM,valueKey);}}if(valueColumns){for(var j=0;j<valueColumns.length;j++){var valueColumn=valueColumns[j];var colKey=valueColumn.colDef.field;result[colKey]=aggregateColumn(rows,valueColumn.aggFunc,colKey);}}return result;};function aggregateColumn(rows,aggFunc,colKey){var resultForColumn=null;for(var i=0;i<rows.length;i++){var row=rows[i];var thisColumnValue=row.data[colKey];if(typeof thisColumnValue==="number"){switch(aggFunc){case constants.SUM:resultForColumn+=thisColumnValue;break;case constants.MIN:if(resultForColumn===null){resultForColumn=thisColumnValue;}else{if(resultForColumn>thisColumnValue){resultForColumn=thisColumnValue;}}break;case constants.MAX:if(resultForColumn===null){resultForColumn=thisColumnValue;}else{if(resultForColumn<thisColumnValue){resultForColumn=thisColumnValue;}}break;}}}return resultForColumn;}};InMemoryRowController.prototype.doAggregate=function(){var groupAggFunction=this.gridOptionsWrapper.getGroupAggFunction();if(typeof groupAggFunction==="function"){this.recursivelyCreateAggData(this.rowsAfterFilter,groupAggFunction,0);return;}var valueColumns=this.columnController.getValueColumns();var valueKeys=this.gridOptionsWrapper.getGroupAggFields();if((valueColumns&&valueColumns.length>0)||(valueKeys&&valueKeys.length>0)){var defaultAggFunction=this.defaultGroupAggFunctionFactory(valueColumns,valueKeys);this.recursivelyCreateAggData(this.rowsAfterFilter,defaultAggFunction,0);}else{if(!this.gridOptionsWrapper.isRowsAlreadyGrouped()){this.recursivelyClearAggData(this.rowsAfterFilter);}}};InMemoryRowController.prototype.expandOrCollapseAll=function(expand,rowNodes){var _this=this;if(rowNodes===null){rowNodes=this.rowsAfterGroup;}if(!rowNodes){return;}rowNodes.forEach(function(node){if(node.group){node.expanded=expand;_this.expandOrCollapseAll(expand,node.children);}});};InMemoryRowController.prototype.recursivelyClearAggData=function(nodes){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.group){this.recursivelyClearAggData(node.childrenAfterFilter);node.data=null;}}};InMemoryRowController.prototype.recursivelyCreateAggData=function(nodes,groupAggFunction,level){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.group){this.recursivelyCreateAggData(node.childrenAfterFilter,groupAggFunction,level++);var data=groupAggFunction(node.childrenAfterFilter,level);node.data=data;if(node.sibling){node.sibling.data=data;}}}};InMemoryRowController.prototype.doSort=function(){var sorting;if(this.gridOptionsWrapper.isEnableServerSideSorting()){sorting=false;}else{var sortingOptions=[];this.columnController.getAllColumns().forEach(function(column){if(column.sort){var ascending=column.sort===constants.ASC;sortingOptions.push({inverter:ascending?1:-1,sortedAt:column.sortedAt,column:column});}});if(sortingOptions.length>0){sorting=true;}}var rowNodesReadyForSorting=this.rowsAfterFilter?this.rowsAfterFilter.slice(0):null;if(sorting){sortingOptions.sort(function(optionA,optionB){return optionA.sortedAt-optionB.sortedAt;});this.sortList(rowNodesReadyForSorting,sortingOptions);}else{this.recursivelyResetSort(rowNodesReadyForSorting);}this.rowsAfterSort=rowNodesReadyForSorting;};InMemoryRowController.prototype.recursivelyResetSort=function(rowNodes){if(!rowNodes){return;}for(var i=0,l=rowNodes.length;i<l;i++){var item=rowNodes[i];if(item.group&&item.children){item.childrenAfterSort=item.childrenAfterFilter;this.recursivelyResetSort(item.children);}}this.updateChildIndexes(rowNodes);};InMemoryRowController.prototype.sortList=function(nodes,sortOptions){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.group&&node.children){node.childrenAfterSort=node.childrenAfterFilter.slice(0);this.sortList(node.childrenAfterSort,sortOptions);}}var that=this;function compare(objA,objB,column,isInverted){var valueA=that.valueService.getValue(column.colDef,objA.data,objA);var valueB=that.valueService.getValue(column.colDef,objB.data,objB);if(column.colDef.comparator){return column.colDef.comparator(valueA,valueB,objA,objB,isInverted);}else{return _.defaultComparator(valueA,valueB);}}nodes.sort(function(objA,objB){for(var i=0,len=sortOptions.length;i<len;i++){var sortOption=sortOptions[i];var compared=compare(objA,objB,sortOption.column,sortOption.inverter===-1);if(compared!==0){return compared*sortOption.inverter;}}return 0;});this.updateChildIndexes(nodes);};InMemoryRowController.prototype.updateChildIndexes=function(nodes){for(var j=0;j<nodes.length;j++){var node=nodes[j];node.firstChild=j===0;node.lastChild=j===nodes.length-1;node.childIndex=j;}};InMemoryRowController.prototype.onPivotChanged=function(){this.doPivoting();this.updateModel(constants.STEP_EVERYTHING);};InMemoryRowController.prototype.doPivoting=function(){var rowsAfterGroup;var groupedCols=this.columnController.getPivotedColumns();var rowsAlreadyGrouped=this.gridOptionsWrapper.isRowsAlreadyGrouped();var doingGrouping=!rowsAlreadyGrouped&&groupedCols.length>0;if(doingGrouping){var expandByDefault=this.gridOptionsWrapper.isGroupSuppressRow()||this.gridOptionsWrapper.getGroupDefaultExpanded();rowsAfterGroup=this.groupCreator.group(this.allRows,groupedCols,expandByDefault);}else{rowsAfterGroup=this.allRows;}this.rowsAfterGroup=rowsAfterGroup;};InMemoryRowController.prototype.doFilter=function(){var doingFilter;if(this.gridOptionsWrapper.isEnableServerSideFilter()){doingFilter=false;}else{doingFilter=this.filterManager.isAnyFilterPresent();}var rowsAfterFilter;if(doingFilter){rowsAfterFilter=this.filterItems(this.rowsAfterGroup);}else{rowsAfterFilter=this.rowsAfterGroup;this.recursivelyResetFilter(this.rowsAfterGroup);}this.rowsAfterFilter=rowsAfterFilter;};InMemoryRowController.prototype.filterItems=function(rowNodes){var result=[];for(var i=0,l=rowNodes.length;i<l;i++){var node=rowNodes[i];if(node.group){node.childrenAfterFilter=this.filterItems(node.children);if(node.childrenAfterFilter.length>0){node.allChildrenCount=this.getTotalChildCount(node.childrenAfterFilter);result.push(node);}}else{if(this.filterManager.doesRowPassFilter(node)){result.push(node);}}}return result;};InMemoryRowController.prototype.recursivelyResetFilter=function(nodes){if(!nodes){return;}for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.group&&node.children){node.childrenAfterFilter=node.children;this.recursivelyResetFilter(node.children);node.allChildrenCount=this.getTotalChildCount(node.childrenAfterFilter);}}};InMemoryRowController.prototype.setAllRows=function(rows,firstId){var nodes;if(this.gridOptionsWrapper.isRowsAlreadyGrouped()){nodes=rows;this.recursivelyCheckUserProvidedNodes(nodes,null,0);}else{var nodes=[];if(rows){for(var i=0;i<rows.length;i++){var node={};node.data=rows[i];nodes.push(node);}}}var firstIdToUse=firstId?firstId:0;this.recursivelyAddIdToNodes(nodes,firstIdToUse);this.allRows=nodes;if(this.columnController.isSetupComplete()){this.doPivoting();}};InMemoryRowController.prototype.recursivelyAddIdToNodes=function(nodes,index){if(!nodes){return;}for(var i=0;i<nodes.length;i++){var node=nodes[i];node.id=index++;if(node.group&&node.children){index=this.recursivelyAddIdToNodes(node.children,index);}}return index;};InMemoryRowController.prototype.recursivelyCheckUserProvidedNodes=function(nodes,parent,level){if(!nodes){return;}for(var i=0;i<nodes.length;i++){var node=nodes[i];if(parent){node.parent=parent;}node.level=level;if(node.group&&node.children){this.recursivelyCheckUserProvidedNodes(node.children,node,level+1);}}};InMemoryRowController.prototype.getTotalChildCount=function(rowNodes){var count=0;for(var i=0,l=rowNodes.length;i<l;i++){var item=rowNodes[i];if(item.group){count+=item.allChildrenCount;}else{count++;}}return count;};InMemoryRowController.prototype.doGroupMapping=function(){var rowsAfterMap=[];this.addToMap(rowsAfterMap,this.rowsAfterSort);this.rowsAfterMap=rowsAfterMap;};InMemoryRowController.prototype.addToMap=function(mappedData,originalNodes){if(!originalNodes){return;}var groupSuppressRow=this.gridOptionsWrapper.isGroupSuppressRow();for(var i=0;i<originalNodes.length;i++){var node=originalNodes[i];if(!groupSuppressRow||(groupSuppressRow&&!node.group)){mappedData.push(node);}if(node.group&&node.expanded){this.addToMap(mappedData,node.childrenAfterSort);if(this.gridOptionsWrapper.isGroupIncludeFooter()){var footerNode=this.createFooterNode(node);mappedData.push(footerNode);}}}};InMemoryRowController.prototype.createFooterNode=function(groupNode){var footerNode={};Object.keys(groupNode).forEach(function(key){footerNode[key]=groupNode[key];});footerNode.footer=true;footerNode.sibling=groupNode;groupNode.sibling=footerNode;return footerNode;};return InMemoryRowController;})();grid.InMemoryRowController=InMemoryRowController;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var logging=false;var VirtualPageRowController=(function(){function VirtualPageRowController(){}VirtualPageRowController.prototype.init=function(rowRenderer,gridOptionsWrapper,angularGrid){this.rowRenderer=rowRenderer;this.datasourceVersion=0;this.gridOptionsWrapper=gridOptionsWrapper;this.angularGrid=angularGrid;};VirtualPageRowController.prototype.setDatasource=function(datasource){this.datasource=datasource;if(!datasource){return;}this.reset();};VirtualPageRowController.prototype.reset=function(){if(typeof this.datasource.rowCount==="number"&&this.datasource.rowCount>=0){this.virtualRowCount=this.datasource.rowCount;this.foundMaxRow=true;}else{this.virtualRowCount=0;this.foundMaxRow=false;}this.datasourceVersion++;this.pageCache={};this.pageCacheSize=0;this.pageLoadsInProgress=[];this.pageLoadsQueued=[];this.pageAccessTimes={};this.accessTime=0;if(typeof this.datasource.maxConcurrentRequests==="number"&&this.datasource.maxConcurrentRequests>0){this.maxConcurrentDatasourceRequests=this.datasource.maxConcurrentRequests;}else{this.maxConcurrentDatasourceRequests=2;}if(typeof this.datasource.maxPagesInCache==="number"&&this.datasource.maxPagesInCache>0){this.maxPagesInCache=this.datasource.maxPagesInCache;}else{this.maxPagesInCache=null;}this.pageSize=this.datasource.pageSize;this.overflowSize=this.datasource.overflowSize;this.doLoadOrQueue(0);};VirtualPageRowController.prototype.createNodesFromRows=function(pageNumber,rows){var nodes=[];if(rows){for(var i=0,j=rows.length;i<j;i++){var virtualRowIndex=(pageNumber*this.pageSize)+i;nodes.push({data:rows[i],id:virtualRowIndex});}}return nodes;};VirtualPageRowController.prototype.removeFromLoading=function(pageNumber){var index=this.pageLoadsInProgress.indexOf(pageNumber);this.pageLoadsInProgress.splice(index,1);};VirtualPageRowController.prototype.pageLoadFailed=function(pageNumber){this.removeFromLoading(pageNumber);this.checkQueueForNextLoad();};VirtualPageRowController.prototype.pageLoaded=function(pageNumber,rows,lastRow){this.putPageIntoCacheAndPurge(pageNumber,rows);this.checkMaxRowAndInformRowRenderer(pageNumber,lastRow);this.removeFromLoading(pageNumber);this.checkQueueForNextLoad();};VirtualPageRowController.prototype.putPageIntoCacheAndPurge=function(pageNumber,rows){this.pageCache[pageNumber]=this.createNodesFromRows(pageNumber,rows);this.pageCacheSize++;if(logging){console.log("adding page "+pageNumber);}var needToPurge=this.maxPagesInCache&&this.maxPagesInCache<this.pageCacheSize;if(needToPurge){var youngestPageIndex=this.findLeastRecentlyAccessedPage(Object.keys(this.pageCache));if(logging){console.log("purging page "+youngestPageIndex+" from cache "+Object.keys(this.pageCache));}delete this.pageCache[youngestPageIndex];this.pageCacheSize--;}};VirtualPageRowController.prototype.checkMaxRowAndInformRowRenderer=function(pageNumber,lastRow){if(!this.foundMaxRow){if(typeof lastRow==="number"&&lastRow>=0){this.virtualRowCount=lastRow;this.foundMaxRow=true;}else{var thisPagePlusBuffer=((pageNumber+1)*this.pageSize)+this.overflowSize;if(this.virtualRowCount<thisPagePlusBuffer){this.virtualRowCount=thisPagePlusBuffer;}}this.rowRenderer.refreshView();}else{this.rowRenderer.refreshAllVirtualRows();}};VirtualPageRowController.prototype.isPageAlreadyLoading=function(pageNumber){var result=this.pageLoadsInProgress.indexOf(pageNumber)>=0||this.pageLoadsQueued.indexOf(pageNumber)>=0;return result;};VirtualPageRowController.prototype.doLoadOrQueue=function(pageNumber){if(this.isPageAlreadyLoading(pageNumber)){return;}if(this.pageLoadsInProgress.length<this.maxConcurrentDatasourceRequests){this.loadPage(pageNumber);}else{this.addToQueueAndPurgeQueue(pageNumber);}};VirtualPageRowController.prototype.addToQueueAndPurgeQueue=function(pageNumber){if(logging){console.log("queueing "+pageNumber+" - "+this.pageLoadsQueued);}this.pageLoadsQueued.push(pageNumber);var needToPurge=this.maxPagesInCache&&this.maxPagesInCache<this.pageLoadsQueued.length;if(needToPurge){var youngestPageIndex=this.findLeastRecentlyAccessedPage(this.pageLoadsQueued);if(logging){console.log("de-queueing "+pageNumber+" - "+this.pageLoadsQueued);}var indexToRemove=this.pageLoadsQueued.indexOf(youngestPageIndex);this.pageLoadsQueued.splice(indexToRemove,1);}};VirtualPageRowController.prototype.findLeastRecentlyAccessedPage=function(pageIndexes){var youngestPageIndex=-1;var youngestPageAccessTime=Number.MAX_VALUE;var that=this;pageIndexes.forEach(function(pageIndex){var accessTimeThisPage=that.pageAccessTimes[pageIndex];if(accessTimeThisPage<youngestPageAccessTime){youngestPageAccessTime=accessTimeThisPage;youngestPageIndex=pageIndex;}});return youngestPageIndex;};VirtualPageRowController.prototype.checkQueueForNextLoad=function(){if(this.pageLoadsQueued.length>0){var pageToLoad=this.pageLoadsQueued[0];this.pageLoadsQueued.splice(0,1);if(logging){console.log("dequeueing "+pageToLoad+" - "+this.pageLoadsQueued);}this.loadPage(pageToLoad);}};VirtualPageRowController.prototype.loadPage=function(pageNumber){this.pageLoadsInProgress.push(pageNumber);var startRow=pageNumber*this.pageSize;var endRow=(pageNumber+1)*this.pageSize;var that=this;var datasourceVersionCopy=this.datasourceVersion;var sortModel;if(this.gridOptionsWrapper.isEnableServerSideSorting()){sortModel=this.angularGrid.getSortModel();}var filterModel;if(this.gridOptionsWrapper.isEnableServerSideFilter()){filterModel=this.angularGrid.getFilterModel();}var params={startRow:startRow,endRow:endRow,successCallback:successCallback,failCallback:failCallback,sortModel:sortModel,filterModel:filterModel};var getRowsParams=utils.getFunctionParameters(this.datasource.getRows);if(getRowsParams.length>1){console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter.");console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.");}this.datasource.getRows(params);function successCallback(rows,lastRowIndex){if(that.requestIsDaemon(datasourceVersionCopy)){return;}that.pageLoaded(pageNumber,rows,lastRowIndex);}function failCallback(){if(that.requestIsDaemon(datasourceVersionCopy)){return;}that.pageLoadFailed(pageNumber);}};VirtualPageRowController.prototype.requestIsDaemon=function(datasourceVersionCopy){return this.datasourceVersion!==datasourceVersionCopy;};VirtualPageRowController.prototype.getVirtualRow=function(rowIndex){if(rowIndex>this.virtualRowCount){return null;}var pageNumber=Math.floor(rowIndex/this.pageSize);var page=this.pageCache[pageNumber];this.pageAccessTimes[pageNumber]=this.accessTime++;if(!page){this.doLoadOrQueue(pageNumber);return{data:{},id:rowIndex};}else{var indexInThisPage=rowIndex%this.pageSize;return page[indexInThisPage];}};VirtualPageRowController.prototype.forEachInMemory=function(callback){var pageKeys=Object.keys(this.pageCache);for(var i=0;i<pageKeys.length;i++){var pageKey=pageKeys[i];var page=this.pageCache[pageKey];for(var j=0;j<page.length;j++){var node=page[j];callback(node);}}};VirtualPageRowController.prototype.getModel=function(){var that=this;return{getVirtualRow:function(index){return that.getVirtualRow(index);},getVirtualRowCount:function(){return that.virtualRowCount;},forEachInMemory:function(callback){that.forEachInMemory(callback);}};};return VirtualPageRowController;})();grid.VirtualPageRowController=VirtualPageRowController;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var template='<div class="ag-paging-panel">'+'<span id="pageRowSummaryPanel" class="ag-paging-row-summary-panel">'+'<span id="firstRowOnPage"></span>'+" [TO] "+'<span id="lastRowOnPage"></span>'+" [OF] "+'<span id="recordCount"></span>'+"</span>"+'<span class="ag-paging-page-summary-panel">'+'<button class="ag-paging-button" id="btFirst">[FIRST]</button>'+'<button class="ag-paging-button" id="btPrevious">[PREVIOUS]</button>'+"[PAGE] "+'<span id="current"></span>'+" [OF] "+'<span id="total"></span>'+'<button class="ag-paging-button" id="btNext">[NEXT]</button>'+'<button class="ag-paging-button" id="btLast">[LAST]</button>'+"</span>"+"</div>";var PaginationController=(function(){function PaginationController(){}PaginationController.prototype.init=function(angularGrid,gridOptionsWrapper){this.gridOptionsWrapper=gridOptionsWrapper;this.angularGrid=angularGrid;this.setupComponents();this.callVersion=0;};PaginationController.prototype.setDatasource=function(datasource){this.datasource=datasource;if(!datasource){return;}this.reset();};PaginationController.prototype.reset=function(){if(this.datasource.pageSize&&typeof this.datasource.pageSize!=="number"){console.warn("datasource.pageSize should be a number");}this.pageSize=this.datasource.pageSize;if(typeof this.datasource.rowCount==="number"&&this.datasource.rowCount>=0){this.rowCount=this.datasource.rowCount;this.foundMaxRow=true;this.calculateTotalPages();}else{this.rowCount=0;this.foundMaxRow=false;this.totalPages=null;}this.currentPage=0;this.ePageRowSummaryPanel.style.visibility="hidden";this.setTotalLabels();this.loadPage();};PaginationController.prototype.setTotalLabels=function(){if(this.foundMaxRow){this.lbTotal.innerHTML=this.totalPages.toLocaleString();this.lbRecordCount.innerHTML=this.rowCount.toLocaleString();}else{var moreText=this.gridOptionsWrapper.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=moreText;this.lbRecordCount.innerHTML=moreText;}};PaginationController.prototype.calculateTotalPages=function(){this.totalPages=Math.floor((this.rowCount-1)/this.pageSize)+1;};PaginationController.prototype.pageLoaded=function(rows,lastRowIndex){var firstId=this.currentPage*this.pageSize;this.angularGrid.setRows(rows,firstId);if(!this.foundMaxRow&&typeof lastRowIndex==="number"&&lastRowIndex>=0){this.foundMaxRow=true;this.rowCount=lastRowIndex;this.calculateTotalPages();this.setTotalLabels();if(this.currentPage>this.totalPages){this.currentPage=this.totalPages-1;this.loadPage();}}this.enableOrDisableButtons();this.updateRowLabels();};PaginationController.prototype.updateRowLabels=function(){var startRow;var endRow;if(this.isZeroPagesToDisplay()){startRow=0;endRow=0;}else{startRow=(this.pageSize*this.currentPage)+1;endRow=startRow+this.pageSize-1;if(this.foundMaxRow&&endRow>this.rowCount){endRow=this.rowCount;}}this.lbFirstRowOnPage.innerHTML=(startRow).toLocaleString();this.lbLastRowOnPage.innerHTML=(endRow).toLocaleString();this.ePageRowSummaryPanel.style.visibility=null;};PaginationController.prototype.loadPage=function(){this.enableOrDisableButtons();var startRow=this.currentPage*this.datasource.pageSize;var endRow=(this.currentPage+1)*this.datasource.pageSize;this.lbCurrent.innerHTML=(this.currentPage+1).toLocaleString();this.callVersion++;var callVersionCopy=this.callVersion;var that=this;this.angularGrid.showLoadingPanel(true);var sortModel;if(this.gridOptionsWrapper.isEnableServerSideSorting()){sortModel=this.angularGrid.getSortModel();}var filterModel;if(this.gridOptionsWrapper.isEnableServerSideFilter()){filterModel=this.angularGrid.getFilterModel();}var params={startRow:startRow,endRow:endRow,successCallback:successCallback,failCallback:failCallback,sortModel:sortModel,filterModel:filterModel};var getRowsParams=utils.getFunctionParameters(this.datasource.getRows);if(getRowsParams.length>1){console.warn("ag-grid: It looks like your paging datasource is of the old type, taking more than one parameter.");console.warn("ag-grid: From ag-grid 1.9.0, now the getRows takes one parameter. See the documentation for details.");}this.datasource.getRows(params);function successCallback(rows,lastRowIndex){if(that.isCallDaemon(callVersionCopy)){return;}that.pageLoaded(rows,lastRowIndex);}function failCallback(){if(that.isCallDaemon(callVersionCopy)){return;}that.angularGrid.setRows([]);}};PaginationController.prototype.isCallDaemon=function(versionCopy){return versionCopy!==this.callVersion;};PaginationController.prototype.onBtNext=function(){this.currentPage++;this.loadPage();};PaginationController.prototype.onBtPrevious=function(){this.currentPage--;this.loadPage();};PaginationController.prototype.onBtFirst=function(){this.currentPage=0;this.loadPage();};PaginationController.prototype.onBtLast=function(){this.currentPage=this.totalPages-1;this.loadPage();};PaginationController.prototype.isZeroPagesToDisplay=function(){return this.foundMaxRow&&this.totalPages===0;};PaginationController.prototype.enableOrDisableButtons=function(){var disablePreviousAndFirst=this.currentPage===0;this.btPrevious.disabled=disablePreviousAndFirst;this.btFirst.disabled=disablePreviousAndFirst;var zeroPagesToDisplay=this.isZeroPagesToDisplay();var onLastPage=this.foundMaxRow&&this.currentPage===(this.totalPages-1);var disableNext=onLastPage||zeroPagesToDisplay;this.btNext.disabled=disableNext;var disableLast=!this.foundMaxRow||zeroPagesToDisplay||this.currentPage===(this.totalPages-1);this.btLast.disabled=disableLast;};PaginationController.prototype.createTemplate=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();return template.replace("[PAGE]",localeTextFunc("page","Page")).replace("[TO]",localeTextFunc("to","to")).replace("[OF]",localeTextFunc("of","of")).replace("[OF]",localeTextFunc("of","of")).replace("[FIRST]",localeTextFunc("first","First")).replace("[PREVIOUS]",localeTextFunc("previous","Previous")).replace("[NEXT]",localeTextFunc("next","Next")).replace("[LAST]",localeTextFunc("last","Last"));};PaginationController.prototype.getGui=function(){return this.eGui;};PaginationController.prototype.setupComponents=function(){this.eGui=utils.loadTemplate(this.createTemplate());this.btNext=this.eGui.querySelector("#btNext");this.btPrevious=this.eGui.querySelector("#btPrevious");this.btFirst=this.eGui.querySelector("#btFirst");this.btLast=this.eGui.querySelector("#btLast");this.lbCurrent=this.eGui.querySelector("#current");this.lbTotal=this.eGui.querySelector("#total");this.lbRecordCount=this.eGui.querySelector("#recordCount");this.lbFirstRowOnPage=this.eGui.querySelector("#firstRowOnPage");this.lbLastRowOnPage=this.eGui.querySelector("#lastRowOnPage");this.ePageRowSummaryPanel=this.eGui.querySelector("#pageRowSummaryPanel");var that=this;this.btNext.addEventListener("click",function(){that.onBtNext();});this.btPrevious.addEventListener("click",function(){that.onBtPrevious();});this.btFirst.addEventListener("click",function(){that.onBtFirst();});this.btLast.addEventListener("click",function(){that.onBtLast();});};return PaginationController;})();grid.PaginationController=PaginationController;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var BorderLayout=(function(){function BorderLayout(params){this.sizeChangeListners=[];this.isLayoutPanel=true;this.fullHeight=!params.north&&!params.south;var template;if(!params.dontFill){if(this.fullHeight){template='<div style="height: 100%; overflow: auto; position: relative;">'+'<div id="west" style="height: 100%; float: left;"></div>'+'<div id="east" style="height: 100%; float: right;"></div>'+'<div id="center" style="height: 100%;"></div>'+'<div id="overlay" style="position: absolute; height: 100%; width: 100%; top: 0px; left: 0px;"></div>'+"</div>";}else{template='<div style="height: 100%; position: relative;">'+'<div id="north"></div>'+'<div id="centerRow" style="height: 100%; overflow: hidden;">'+'<div id="west" style="height: 100%; float: left;"></div>'+'<div id="east" style="height: 100%; float: right;"></div>'+'<div id="center" style="height: 100%;"></div>'+"</div>"+'<div id="south"></div>'+'<div id="overlay" style="position: absolute; height: 100%; width: 100%; top: 0px; left: 0px;"></div>'+"</div>";}this.layoutActive=true;}else{template='<div style="position: relative;">'+'<div id="north"></div>'+'<div id="centerRow">'+'<div id="west"></div>'+'<div id="east"></div>'+'<div id="center"></div>'+"</div>"+'<div id="south"></div>'+'<div id="overlay" style="position: absolute; height: 100%; width: 100%; top: 0px; left: 0px;"></div>'+"</div>";this.layoutActive=false;}this.eGui=_.loadTemplate(template);this.id="borderLayout";if(params.name){this.id+="_"+params.name;}this.eGui.setAttribute("id",this.id);this.childPanels=[];if(params){this.setupPanels(params);}this.setOverlayVisible(false);}BorderLayout.prototype.addSizeChangeListener=function(listener){this.sizeChangeListners.push(listener);};BorderLayout.prototype.fireSizeChanged=function(){this.sizeChangeListners.forEach(function(listener){listener();});};BorderLayout.prototype.setupPanels=function(params){this.eNorthWrapper=this.eGui.querySelector("#north");this.eSouthWrapper=this.eGui.querySelector("#south");this.eEastWrapper=this.eGui.querySelector("#east");this.eWestWrapper=this.eGui.querySelector("#west");this.eCenterWrapper=this.eGui.querySelector("#center");this.eOverlayWrapper=this.eGui.querySelector("#overlay");this.eCenterRow=this.eGui.querySelector("#centerRow");this.eNorthChildLayout=this.setupPanel(params.north,this.eNorthWrapper);this.eSouthChildLayout=this.setupPanel(params.south,this.eSouthWrapper);this.eEastChildLayout=this.setupPanel(params.east,this.eEastWrapper);this.eWestChildLayout=this.setupPanel(params.west,this.eWestWrapper);this.eCenterChildLayout=this.setupPanel(params.center,this.eCenterWrapper);this.setupPanel(params.overlay,this.eOverlayWrapper);};BorderLayout.prototype.setupPanel=function(content,ePanel){if(!ePanel){return;}if(content){if(content.isLayoutPanel){this.childPanels.push(content);ePanel.appendChild(content.getGui());return content;}else{ePanel.appendChild(content);return null;}}else{ePanel.parentNode.removeChild(ePanel);return null;}};BorderLayout.prototype.getGui=function(){return this.eGui;};BorderLayout.prototype.doLayout=function(){if(!_.isVisible(this.eGui)){return false;}var atLeastOneChanged=false;var childLayouts=[this.eNorthChildLayout,this.eSouthChildLayout,this.eEastChildLayout,this.eWestChildLayout];var that=this;_.forEach(childLayouts,function(childLayout){var childChangedSize=that.layoutChild(childLayout);if(childChangedSize){atLeastOneChanged=true;}});if(this.layoutActive){var ourHeightChanged=this.layoutHeight();var ourWidthChanged=this.layoutWidth();if(ourHeightChanged||ourWidthChanged){atLeastOneChanged=true;}}var centerChanged=this.layoutChild(this.eCenterChildLayout);if(centerChanged){atLeastOneChanged=true;}if(atLeastOneChanged){this.fireSizeChanged();}return atLeastOneChanged;};BorderLayout.prototype.layoutChild=function(childPanel){if(childPanel){return childPanel.doLayout();}else{return false;}};BorderLayout.prototype.layoutHeight=function(){if(this.fullHeight){return this.layoutHeightFullHeight();}else{return this.layoutHeightNormal();}};BorderLayout.prototype.layoutHeightFullHeight=function(){var centerHeight=_.offsetHeight(this.eGui);if(centerHeight<0){centerHeight=0;}if(this.centerHeightLastTime!==centerHeight){this.centerHeightLastTime=centerHeight;return true;}else{return false;}};BorderLayout.prototype.layoutHeightNormal=function(){var totalHeight=_.offsetHeight(this.eGui);var northHeight=_.offsetHeight(this.eNorthWrapper);var southHeight=_.offsetHeight(this.eSouthWrapper);var centerHeight=totalHeight-northHeight-southHeight;if(centerHeight<0){centerHeight=0;}if(this.centerHeightLastTime!==centerHeight){this.eCenterRow.style.height=centerHeight+"px";this.centerHeightLastTime=centerHeight;return true;}else{return false;}};BorderLayout.prototype.getCentreHeight=function(){return this.centerHeightLastTime;};BorderLayout.prototype.layoutWidth=function(){var totalWidth=_.offsetWidth(this.eGui);var eastWidth=_.offsetWidth(this.eEastWrapper);var westWidth=_.offsetWidth(this.eWestWrapper);var centerWidth=totalWidth-eastWidth-westWidth;if(centerWidth<0){centerWidth=0;}this.eCenterWrapper.style.width=centerWidth+"px";};BorderLayout.prototype.setEastVisible=function(visible){if(this.eEastWrapper){this.eEastWrapper.style.display=visible?"":"none";}this.doLayout();};BorderLayout.prototype.setOverlayVisible=function(visible){if(this.eOverlayWrapper){this.eOverlayWrapper.style.display=visible?"":"none";}this.doLayout();};BorderLayout.prototype.setSouthVisible=function(visible){if(this.eSouthWrapper){this.eSouthWrapper.style.display=visible?"":"none";}this.doLayout();};return BorderLayout;})();grid.BorderLayout=BorderLayout;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var gridHtml='<div>\n                <!-- header -->\n                <div class="ag-header">\n                    <div class="ag-pinned-header"></div><div class="ag-header-viewport"><div class="ag-header-container"></div></div>\n                </div>\n                <!-- floating top -->\n                <div class="ag-floating-top">\n                    <div class="ag-pinned-floating-top"></div><div class="ag-floating-top-viewport"><div class="ag-floating-top-container"></div></div>\n                </div>\n                <!-- floating bottom -->\n                <div class="ag-floating-bottom">\n                    <div class="ag-pinned-floating-bottom"></div><div class="ag-floating-bottom-viewport"><div class="ag-floating-bottom-container"></div></div>\n                </div>\n                <!-- body -->\n                <div class="ag-body">\n                    <div class="ag-pinned-cols-viewport">\n                        <div class="ag-pinned-cols-container"></div>\n                    </div>\n                    <div class="ag-body-viewport-wrapper">\n                        <div class="ag-body-viewport">\n                            <div class="ag-body-container"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>';var gridNoScrollsHtml='<div>\n                <!-- header -->\n                <div class="ag-header-container"></div>\n                <!-- floating top -->\n                <div class="ag-floating-top-container"></div>\n                <!-- body -->\n                <div class="ag-body-container"></div>\n                <!-- floating bottom -->\n                <div class="ag-floating-bottom-container"></div>\n            </div>';var loadingHtml='<div class="ag-loading-panel">'+'<div class="ag-loading-wrapper">'+'<span class="ag-loading-center">[LOADING...]</span>'+"</div>"+"</div>";var _=grid.Utils;var GridPanel=(function(){function GridPanel(gridOptionsWrapper){this.scrollLagCounter=0;this.gridOptionsWrapper=gridOptionsWrapper;this.forPrint=this.gridOptionsWrapper.isDontUseScrolls();this.setupComponents();this.scrollWidth=_.getScrollbarWidth();}GridPanel.prototype.init=function(columnModel,rowRenderer,masterSlaveService){this.columnModel=columnModel;this.rowRenderer=rowRenderer;this.masterSlaveService=masterSlaveService;this.sizeHeaderAndBody();};GridPanel.prototype.getLayout=function(){return this.layout;};GridPanel.prototype.setupComponents=function(){if(this.forPrint){this.eRoot=_.loadTemplate(gridNoScrollsHtml);_.addCssClass(this.eRoot,"ag-root ag-no-scrolls");}else{this.eRoot=_.loadTemplate(gridHtml);_.addCssClass(this.eRoot,"ag-root ag-scrolls");}this.findElements();this.layout=new grid.BorderLayout({overlay:_.loadTemplate(this.createTemplate()),center:this.eRoot,dontFill:this.forPrint,name:"eGridPanel"});this.layout.addSizeChangeListener(this.onBodyHeightChange.bind(this));this.addScrollListener();if(this.gridOptionsWrapper.isSuppressHorizontalScroll()){this.eBodyViewport.style.overflowX="hidden";}};GridPanel.prototype.getPinnedFloatingTop=function(){return this.ePinnedFloatingTop;};GridPanel.prototype.getFloatingTopContainer=function(){return this.eFloatingTopContainer;};GridPanel.prototype.getPinnedFloatingBottom=function(){return this.ePinnedFloatingBottom;};GridPanel.prototype.getFloatingBottomContainer=function(){return this.eFloatingBottomContainer;};GridPanel.prototype.createTemplate=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();return loadingHtml.replace("[LOADING...]",localeTextFunc("loadingOoo","Loading..."));};GridPanel.prototype.ensureIndexVisible=function(index){var lastRow=this.rowModel.getVirtualRowCount();if(typeof index!=="number"||index<0||index>=lastRow){console.warn("invalid row index for ensureIndexVisible: "+index);return;}var rowHeight=this.gridOptionsWrapper.getRowHeight();var rowTopPixel=rowHeight*index;var rowBottomPixel=rowTopPixel+rowHeight;var viewportTopPixel=this.eBodyViewport.scrollTop;var viewportHeight=this.eBodyViewport.offsetHeight;var scrollShowing=this.eBodyViewport.clientWidth<this.eBodyViewport.scrollWidth;if(scrollShowing){viewportHeight-=this.scrollWidth;}var viewportBottomPixel=viewportTopPixel+viewportHeight;var viewportScrolledPastRow=viewportTopPixel>rowTopPixel;var viewportScrolledBeforeRow=viewportBottomPixel<rowBottomPixel;if(viewportScrolledPastRow){this.eBodyViewport.scrollTop=rowTopPixel;}else{if(viewportScrolledBeforeRow){var newScrollPosition=rowBottomPixel-viewportHeight;this.eBodyViewport.scrollTop=newScrollPosition;}}};GridPanel.prototype.ensureColIndexVisible=function(index){if(typeof index!=="number"){console.warn("col index must be a number: "+index);return;}var columns=this.columnModel.getDisplayedColumns();if(typeof index!=="number"||index<0||index>=columns.length){console.warn("invalid col index for ensureColIndexVisible: "+index+", should be between 0 and "+(columns.length-1));return;}var column=columns[index];var pinnedColCount=this.gridOptionsWrapper.getPinnedColCount();if(index<pinnedColCount){console.warn("invalid col index for ensureColIndexVisible: "+index+", scrolling to a pinned col makes no sense");return;}var colLeftPixel=0;for(var i=pinnedColCount;i<index;i++){colLeftPixel+=columns[i].actualWidth;}var colRightPixel=colLeftPixel+column.actualWidth;var viewportLeftPixel=this.eBodyViewport.scrollLeft;var viewportWidth=this.eBodyViewport.offsetWidth;var scrollShowing=this.eBodyViewport.clientHeight<this.eBodyViewport.scrollHeight;if(scrollShowing){viewportWidth-=this.scrollWidth;}var viewportRightPixel=viewportLeftPixel+viewportWidth;var viewportScrolledPastCol=viewportLeftPixel>colLeftPixel;var viewportScrolledBeforeCol=viewportRightPixel<colRightPixel;if(viewportScrolledPastCol){this.eBodyViewport.scrollLeft=colLeftPixel;}else{if(viewportScrolledBeforeCol){var newScrollPosition=colRightPixel-viewportWidth;this.eBodyViewport.scrollLeft=newScrollPosition;}}};GridPanel.prototype.showLoading=function(loading){this.layout.setOverlayVisible(loading);};GridPanel.prototype.getWidthForSizeColsToFit=function(){var availableWidth=this.eBody.clientWidth;var scrollShowing=this.eBodyViewport.clientHeight<this.eBodyViewport.scrollHeight;if(scrollShowing){availableWidth-=this.scrollWidth;}return availableWidth;};GridPanel.prototype.setRowModel=function(rowModel){this.rowModel=rowModel;};GridPanel.prototype.getBodyContainer=function(){return this.eBodyContainer;};GridPanel.prototype.getBodyViewport=function(){return this.eBodyViewport;};GridPanel.prototype.getPinnedColsContainer=function(){return this.ePinnedColsContainer;};GridPanel.prototype.getHeaderContainer=function(){return this.eHeaderContainer;};GridPanel.prototype.getRoot=function(){return this.eRoot;};GridPanel.prototype.getPinnedHeader=function(){return this.ePinnedHeader;};GridPanel.prototype.getRowsParent=function(){return this.eParentsOfRows;};GridPanel.prototype.queryHtmlElement=function(selector){return this.eRoot.querySelector(selector);};GridPanel.prototype.findElements=function(){if(this.forPrint){this.eHeaderContainer=this.queryHtmlElement(".ag-header-container");this.eBodyContainer=this.queryHtmlElement(".ag-body-container");this.eFloatingTopContainer=this.queryHtmlElement(".ag-floating-top-container");this.eFloatingBottomContainer=this.queryHtmlElement(".ag-floating-bottom-container");this.eParentsOfRows=[this.eBodyContainer,this.eFloatingTopContainer,this.eFloatingBottomContainer];}else{this.eBody=this.queryHtmlElement(".ag-body");this.eBodyContainer=this.queryHtmlElement(".ag-body-container");this.eBodyViewport=this.queryHtmlElement(".ag-body-viewport");this.eBodyViewportWrapper=this.queryHtmlElement(".ag-body-viewport-wrapper");this.ePinnedColsContainer=this.queryHtmlElement(".ag-pinned-cols-container");this.ePinnedColsViewport=this.queryHtmlElement(".ag-pinned-cols-viewport");this.ePinnedHeader=this.queryHtmlElement(".ag-pinned-header");this.eHeader=this.queryHtmlElement(".ag-header");this.eHeaderContainer=this.queryHtmlElement(".ag-header-container");this.eFloatingTop=this.queryHtmlElement(".ag-floating-top");this.ePinnedFloatingTop=this.queryHtmlElement(".ag-pinned-floating-top");this.eFloatingTopContainer=this.queryHtmlElement(".ag-floating-top-container");this.eFloatingBottom=this.queryHtmlElement(".ag-floating-bottom");this.ePinnedFloatingBottom=this.queryHtmlElement(".ag-pinned-floating-bottom");this.eFloatingBottomContainer=this.queryHtmlElement(".ag-floating-bottom-container");this.eParentsOfRows=[this.eBody,this.eFloatingTop,this.eFloatingBottom];this.ePinnedColsViewport.addEventListener("mousewheel",this.mouseWheelListener.bind(this));this.ePinnedColsViewport.addEventListener("DOMMouseScroll",this.mouseWheelListener.bind(this));}};GridPanel.prototype.mouseWheelListener=function(event){var delta;if(event.deltaY&&event.deltaX!=0){delta=event.deltaY;}else{if(event.wheelDelta&&event.wheelDelta!=0){delta=-event.wheelDelta;}else{if(event.detail&&event.detail!=0){delta=event.detail*20;}else{return;}}}var newTopPosition=this.eBodyViewport.scrollTop+delta;this.eBodyViewport.scrollTop=newTopPosition;event.preventDefault();return false;};GridPanel.prototype.setBodyContainerWidth=function(){var mainRowWidth=this.columnModel.getBodyContainerWidth()+"px";this.eBodyContainer.style.width=mainRowWidth;if(!this.forPrint){this.eFloatingBottomContainer.style.width=mainRowWidth;this.eFloatingTopContainer.style.width=mainRowWidth;}};GridPanel.prototype.setPinnedColContainerWidth=function(){if(this.forPrint){return;}var pinnedColWidth=this.columnModel.getPinnedContainerWidth()+"px";this.ePinnedColsContainer.style.width=pinnedColWidth;this.ePinnedFloatingBottom.style.width=pinnedColWidth;this.ePinnedFloatingTop.style.width=pinnedColWidth;this.eBodyViewportWrapper.style.marginLeft=pinnedColWidth;};GridPanel.prototype.showPinnedColContainersIfNeeded=function(){if(this.forPrint){return;}var showingPinnedCols=this.columnModel.isPinning();if(showingPinnedCols){this.ePinnedHeader.style.display="inline-block";this.ePinnedColsViewport.style.display="inline";}else{this.ePinnedHeader.style.display="none";this.ePinnedColsViewport.style.display="none";}};GridPanel.prototype.onBodyHeightChange=function(){this.sizeHeaderAndBody();};GridPanel.prototype.sizeHeaderAndBody=function(){if(this.forPrint){this.sizeHeaderAndBodyForPrint();}else{this.sizeHeaderAndBodyNormal();}};GridPanel.prototype.sizeHeaderAndBodyNormal=function(){var heightOfContainer=this.layout.getCentreHeight();if(!heightOfContainer){return;}var headerHeight=this.gridOptionsWrapper.getHeaderHeight();this.eHeader.style["height"]=headerHeight+"px";var floatingTopCount=0;if(this.gridOptionsWrapper.getFloatingTopRowData()){floatingTopCount=this.gridOptionsWrapper.getFloatingTopRowData().length;}var floatingBottomCount=0;if(this.gridOptionsWrapper.getFloatingBottomRowData()){floatingBottomCount=this.gridOptionsWrapper.getFloatingBottomRowData().length;}var rowHeight=this.gridOptionsWrapper.getRowHeight();var floatingTopHeight=floatingTopCount*rowHeight;var paddingTop=headerHeight+floatingTopHeight;var floatingBottomHeight=floatingBottomCount*rowHeight;var floatingBottomTop=heightOfContainer-floatingBottomHeight;var heightOfCentreRows=heightOfContainer-headerHeight-floatingBottomHeight-floatingTopHeight;this.eBody.style.paddingTop=paddingTop+"px";this.eBody.style.paddingBottom=floatingBottomHeight+"px";this.eFloatingTop.style.top=headerHeight+"px";this.eFloatingTop.style.height=floatingTopHeight+"px";this.eFloatingBottom.style.height=floatingBottomHeight+"px";this.eFloatingBottom.style.top=floatingBottomTop+"px";this.ePinnedColsViewport.style.height=heightOfCentreRows+"px";};GridPanel.prototype.sizeHeaderAndBodyForPrint=function(){var headerHeightPixels=this.gridOptionsWrapper.getHeaderHeight()+"px";this.eHeaderContainer.style["height"]=headerHeightPixels;};GridPanel.prototype.setHorizontalScrollPosition=function(hScrollPosition){this.eBodyViewport.scrollLeft=hScrollPosition;};GridPanel.prototype.addScrollListener=function(){var _this=this;if(this.forPrint){return;}var lastLeftPosition=-1;var lastTopPosition=-1;this.eBodyViewport.addEventListener("scroll",function(){var newLeftPosition=_this.eBodyViewport.scrollLeft;var newTopPosition=_this.eBodyViewport.scrollTop;if(newLeftPosition!==lastLeftPosition){lastLeftPosition=newLeftPosition;_this.scrollHeader(newLeftPosition);}if(newTopPosition!==lastTopPosition){lastTopPosition=newTopPosition;_this.scrollPinned(newTopPosition);_this.requestDrawVirtualRows();}_this.masterSlaveService.fireHorizontalScrollEvent(newLeftPosition);});this.ePinnedColsViewport.addEventListener("scroll",function(){_this.ePinnedColsViewport.scrollTop=0;});};GridPanel.prototype.requestDrawVirtualRows=function(){var _this=this;var useScrollLag;if(this.gridOptionsWrapper.isSuppressScrollLag()){useScrollLag=false;}else{if(this.gridOptionsWrapper.getIsScrollLag()){useScrollLag=this.gridOptionsWrapper.getIsScrollLag()();}else{useScrollLag=_.isBrowserIE()||_.isBrowserSafari();}}if(useScrollLag){this.scrollLagCounter++;var scrollLagCounterCopy=this.scrollLagCounter;setTimeout(function(){if(_this.scrollLagCounter===scrollLagCounterCopy){_this.rowRenderer.drawVirtualRows();}},50);}else{this.rowRenderer.drawVirtualRows();}};GridPanel.prototype.scrollHeader=function(bodyLeftPosition){this.eHeaderContainer.style.left=-bodyLeftPosition+"px";this.eFloatingBottomContainer.style.left=-bodyLeftPosition+"px";this.eFloatingTopContainer.style.left=-bodyLeftPosition+"px";};GridPanel.prototype.scrollPinned=function(bodyTopPosition){this.ePinnedColsContainer.style.top=-bodyTopPosition+"px";};return GridPanel;})();grid.GridPanel=GridPanel;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var DragAndDropService=(function(){function DragAndDropService(){document.addEventListener("mouseup",this.stopDragging.bind(this));}DragAndDropService.getInstance=function(){if(!this.theInstance){this.theInstance=new DragAndDropService();}return this.theInstance;};DragAndDropService.prototype.stopDragging=function(){if(this.dragItem){this.setDragCssClasses(this.dragItem.eDragSource,false);this.dragItem=null;}};DragAndDropService.prototype.setDragCssClasses=function(eListItem,dragging){utils.addOrRemoveCssClass(eListItem,"ag-dragging",dragging);utils.addOrRemoveCssClass(eListItem,"ag-not-dragging",!dragging);};DragAndDropService.prototype.addDragSource=function(eDragSource,dragSourceCallback){this.setDragCssClasses(eDragSource,false);eDragSource.addEventListener("mousedown",this.onMouseDownDragSource.bind(this,eDragSource,dragSourceCallback));};DragAndDropService.prototype.onMouseDownDragSource=function(eDragSource,dragSourceCallback){if(this.dragItem){this.stopDragging();}var data;if(dragSourceCallback.getData){data=dragSourceCallback.getData();}var containerId;if(dragSourceCallback.getContainerId){containerId=dragSourceCallback.getContainerId();}this.dragItem={eDragSource:eDragSource,data:data,containerId:containerId};this.setDragCssClasses(this.dragItem.eDragSource,true);};DragAndDropService.prototype.addDropTarget=function(eDropTarget,dropTargetCallback){var mouseIn=false;var acceptDrag=false;var that=this;eDropTarget.addEventListener("mouseover",function(){if(!mouseIn){mouseIn=true;if(that.dragItem){acceptDrag=dropTargetCallback.acceptDrag(that.dragItem);}else{acceptDrag=false;}}});eDropTarget.addEventListener("mouseout",function(){if(acceptDrag){dropTargetCallback.noDrop();}mouseIn=false;acceptDrag=false;});eDropTarget.addEventListener("mouseup",function(){if(acceptDrag&&that.dragItem){dropTargetCallback.drop(that.dragItem);}});};return DragAndDropService;})();grid.DragAndDropService=DragAndDropService;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var dragAndDropService=grid.DragAndDropService.getInstance();var template='<div class="ag-list-selection">'+"<div>"+'<div ag-repeat class="ag-list-item">'+"</div>"+"</div>"+"</div>";var DropTargetLocation;(function(DropTargetLocation){DropTargetLocation[DropTargetLocation["NOT_DROP_TARGET"]=0]="NOT_DROP_TARGET";DropTargetLocation[DropTargetLocation["DROP_TARGET_ABOVE"]=1]="DROP_TARGET_ABOVE";DropTargetLocation[DropTargetLocation["DROP_TARGET_BELOW"]=2]="DROP_TARGET_BELOW";})(DropTargetLocation||(DropTargetLocation={}));var AgList=(function(){function AgList(){this.readOnly=false;this.setupComponents();this.uniqueId="CheckboxSelection-"+Math.random();this.modelChangedListeners=[];this.itemSelectedListeners=[];this.itemMovedListeners=[];this.beforeDropListeners=[];this.dragSources=[];this.setupAsDropTarget();}AgList.prototype.setReadOnly=function(readOnly){this.readOnly=readOnly;};AgList.prototype.setEmptyMessage=function(emptyMessage){this.emptyMessage=emptyMessage;this.refreshView();};AgList.prototype.getUniqueId=function(){return this.uniqueId;};AgList.prototype.addStyles=function(styles){utils.addStylesToElement(this.eGui,styles);};AgList.prototype.addCssClass=function(cssClass){utils.addCssClass(this.eGui,cssClass);};AgList.prototype.addDragSource=function(dragSource){this.dragSources.push(dragSource);};AgList.prototype.addModelChangedListener=function(listener){this.modelChangedListeners.push(listener);};AgList.prototype.addItemSelectedListener=function(listener){this.itemSelectedListeners.push(listener);};AgList.prototype.addItemMovedListener=function(listener){this.itemMovedListeners.push(listener);};AgList.prototype.addBeforeDropListener=function(listener){this.beforeDropListeners.push(listener);};AgList.prototype.fireItemMoved=function(fromIndex,toIndex){for(var i=0;i<this.itemMovedListeners.length;i++){this.itemMovedListeners[i](fromIndex,toIndex);}};AgList.prototype.fireModelChanged=function(){for(var i=0;i<this.modelChangedListeners.length;i++){this.modelChangedListeners[i](this.model);}};AgList.prototype.fireItemSelected=function(item){for(var i=0;i<this.itemSelectedListeners.length;i++){this.itemSelectedListeners[i](item);}};AgList.prototype.fireBeforeDrop=function(item){for(var i=0;i<this.beforeDropListeners.length;i++){this.beforeDropListeners[i](item);}};AgList.prototype.setupComponents=function(){this.eGui=utils.loadTemplate(template);this.eFilterValueTemplate=this.eGui.querySelector("[ag-repeat]");this.eListParent=this.eFilterValueTemplate.parentNode;utils.removeAllChildren(this.eListParent);};AgList.prototype.setModel=function(model){this.model=model;this.refreshView();};AgList.prototype.getModel=function(){return this.model;};AgList.prototype.setCellRenderer=function(cellRenderer){this.cellRenderer=cellRenderer;};AgList.prototype.refreshView=function(){utils.removeAllChildren(this.eListParent);if(this.model&&this.model.length>0){this.insertRows();}else{this.insertBlankMessage();}};AgList.prototype.insertRows=function(){for(var i=0;i<this.model.length;i++){var item=this.model[i];var eListItem=this.eFilterValueTemplate.cloneNode(true);if(this.cellRenderer){var params={value:item};utils.useRenderer(eListItem,this.cellRenderer,params);}else{eListItem.innerHTML=item;}eListItem.addEventListener("click",this.fireItemSelected.bind(this,item));this.addDragAndDropToListItem(eListItem,item);this.eListParent.appendChild(eListItem);}};AgList.prototype.insertBlankMessage=function(){if(this.emptyMessage){var eMessage=document.createElement("div");eMessage.style.color="grey";eMessage.style.padding="4px";eMessage.style.textAlign="center";eMessage.innerHTML=this.emptyMessage;this.eListParent.appendChild(eMessage);}};AgList.prototype.setupAsDropTarget=function(){dragAndDropService.addDropTarget(this.eGui,{acceptDrag:this.externalAcceptDrag.bind(this),drop:this.externalDrop.bind(this),noDrop:this.externalNoDrop.bind(this)});};AgList.prototype.externalAcceptDrag=function(dragEvent){var allowedSource=this.dragSources.indexOf(dragEvent.containerId)>=0;if(!allowedSource){return false;}var alreadyHaveCol=this.model.indexOf(dragEvent.data)>=0;if(alreadyHaveCol){return false;}this.eGui.style.backgroundColor="lightgreen";return true;};AgList.prototype.externalDrop=function(dragEvent){var newListItem=dragEvent.data;this.fireBeforeDrop(newListItem);if(!this.readOnly){this.addItemToList(newListItem);}this.eGui.style.backgroundColor="";};AgList.prototype.externalNoDrop=function(){this.eGui.style.backgroundColor="";};AgList.prototype.addItemToList=function(newItem){this.model.push(newItem);this.refreshView();this.fireModelChanged();};AgList.prototype.addDragAndDropToListItem=function(eListItem,item){var that=this;dragAndDropService.addDragSource(eListItem,{getData:function(){return item;},getContainerId:function(){return that.uniqueId;}});dragAndDropService.addDropTarget(eListItem,{acceptDrag:function(dragItem){return that.internalAcceptDrag(item,dragItem,eListItem);},drop:function(dragItem){that.internalDrop(item,dragItem.data);},noDrop:function(){that.internalNoDrop(eListItem);}});};AgList.prototype.internalAcceptDrag=function(targetColumn,dragItem,eListItem){var result=dragItem.data!==targetColumn&&dragItem.containerId===this.uniqueId;if(result){if(this.dragAfterThisItem(targetColumn,dragItem.data)){this.setDropCssClasses(eListItem,1);}else{this.setDropCssClasses(eListItem,2);}}return result;};AgList.prototype.internalDrop=function(targetColumn,draggedColumn){var oldIndex=this.model.indexOf(draggedColumn);var newIndex=this.model.indexOf(targetColumn);if(this.readOnly){this.fireItemMoved(oldIndex,newIndex);}else{this.model.splice(oldIndex,1);this.model.splice(newIndex,0,draggedColumn);this.refreshView();this.fireModelChanged();}};AgList.prototype.internalNoDrop=function(eListItem){this.setDropCssClasses(eListItem,0);};AgList.prototype.dragAfterThisItem=function(targetColumn,draggedColumn){return this.model.indexOf(targetColumn)<this.model.indexOf(draggedColumn);};AgList.prototype.setDropCssClasses=function(eListItem,state){utils.addOrRemoveCssClass(eListItem,"ag-not-drop-target",state===0);utils.addOrRemoveCssClass(eListItem,"ag-drop-target-above",state===1);utils.addOrRemoveCssClass(eListItem,"ag-drop-target-below",state===2);};AgList.prototype.getGui=function(){return this.eGui;};return AgList;})();grid.AgList=AgList;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var svgFactory=grid.SvgFactory.getInstance();var ColumnSelectionPanel=(function(){function ColumnSelectionPanel(columnController,gridOptionsWrapper){this.gridOptionsWrapper=gridOptionsWrapper;this.setupComponents();this.columnController=columnController;this.columnController.addChangeListener(this.columnsChanged.bind(this));}ColumnSelectionPanel.prototype.columnsChanged=function(){this.cColumnList.setModel(this.columnController.getAllColumns());};ColumnSelectionPanel.prototype.getDragSource=function(){return this.cColumnList.getUniqueId();};ColumnSelectionPanel.prototype.columnCellRenderer=function(params){var column=params.value;var colDisplayName=this.columnController.getDisplayNameForCol(column);var eResult=document.createElement("span");var eVisibleIcons=document.createElement("span");utils.addCssClass(eVisibleIcons,"ag-visible-icons");var eShowing=utils.createIcon("columnVisible",this.gridOptionsWrapper,column,svgFactory.createColumnShowingSvg);var eHidden=utils.createIcon("columnHidden",this.gridOptionsWrapper,column,svgFactory.createColumnHiddenSvg);eVisibleIcons.appendChild(eShowing);eVisibleIcons.appendChild(eHidden);eShowing.style.display=column.visible?"":"none";eHidden.style.display=column.visible?"none":"";eResult.appendChild(eVisibleIcons);var eValue=document.createElement("span");eValue.innerHTML=colDisplayName;eResult.appendChild(eValue);if(!column.visible){utils.addCssClass(eResult,"ag-column-not-visible");}eVisibleIcons.addEventListener("click",showEventListener);var that=this;function showEventListener(){that.columnController.setColumnVisible(column,!column.visible);}return eResult;};ColumnSelectionPanel.prototype.setupComponents=function(){this.cColumnList=new grid.AgList();this.cColumnList.setCellRenderer(this.columnCellRenderer.bind(this));this.cColumnList.addStyles({height:"100%",overflow:"auto"});this.cColumnList.addItemMovedListener(this.onItemMoved.bind(this));this.cColumnList.setReadOnly(true);var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();var columnsLocalText=localeTextFunc("columns","Columns");var eNorthPanel=document.createElement("div");eNorthPanel.innerHTML='<div style="text-align: center;">'+columnsLocalText+"</div>";this.layout=new grid.BorderLayout({center:this.cColumnList.getGui(),north:eNorthPanel});};ColumnSelectionPanel.prototype.onItemMoved=function(fromIndex,toIndex){this.columnController.moveColumn(fromIndex,toIndex);};ColumnSelectionPanel.prototype.getGui=function(){return this.eRootPanel.getGui();};return ColumnSelectionPanel;})();grid.ColumnSelectionPanel=ColumnSelectionPanel;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var _=grid.Utils;var svgFactory=grid.SvgFactory.getInstance();var GroupSelectionPanel=(function(){function GroupSelectionPanel(columnController,inMemoryRowController,gridOptionsWrapper){this.gridOptionsWrapper=gridOptionsWrapper;this.setupComponents();this.columnController=columnController;this.inMemoryRowController=inMemoryRowController;this.columnController.addChangeListener(this.columnsChanged.bind(this));}GroupSelectionPanel.prototype.columnsChanged=function(){this.cColumnList.setModel(this.columnController.getPivotedColumns());};GroupSelectionPanel.prototype.addDragSource=function(dragSource){this.cColumnList.addDragSource(dragSource);};GroupSelectionPanel.prototype.columnCellRenderer=function(params){var column=params.value;var colDisplayName=this.columnController.getDisplayNameForCol(column);var eResult=document.createElement("span");var eRemove=_.createIcon("columnRemoveFromGroup",this.gridOptionsWrapper,column,svgFactory.createArrowUpSvg);_.addCssClass(eRemove,"ag-visible-icons");eResult.appendChild(eRemove);var that=this;eRemove.addEventListener("click",function(){that.columnController.removePivotColumn(column);});var eValue=document.createElement("span");eValue.innerHTML=colDisplayName;eResult.appendChild(eValue);return eResult;};GroupSelectionPanel.prototype.setupComponents=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();var columnsLocalText=localeTextFunc("pivotedColumns","Pivoted Columns");var pivotedColumnsEmptyMessage=localeTextFunc("pivotedColumnsEmptyMessage","Drag columns from above to pivot");this.cColumnList=new grid.AgList();this.cColumnList.setCellRenderer(this.columnCellRenderer.bind(this));this.cColumnList.addBeforeDropListener(this.onBeforeDrop.bind(this));this.cColumnList.addItemMovedListener(this.onItemMoved.bind(this));this.cColumnList.setEmptyMessage(pivotedColumnsEmptyMessage);this.cColumnList.addStyles({height:"100%",overflow:"auto"});this.cColumnList.setReadOnly(true);var eNorthPanel=document.createElement("div");eNorthPanel.style.paddingTop="10px";eNorthPanel.innerHTML='<div style="text-align: center;">'+columnsLocalText+"</div>";this.layout=new grid.BorderLayout({center:this.cColumnList.getGui(),north:eNorthPanel});};GroupSelectionPanel.prototype.onBeforeDrop=function(newItem){this.columnController.addPivotColumn(newItem);};GroupSelectionPanel.prototype.onItemMoved=function(fromIndex,toIndex){this.columnController.movePivotColumn(fromIndex,toIndex);};return GroupSelectionPanel;})();grid.GroupSelectionPanel=GroupSelectionPanel;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var svgFactory=grid.SvgFactory.getInstance();var AgDropdownList=(function(){function AgDropdownList(popupService){this.popupService=popupService;this.setupComponents();this.itemSelectedListeners=[];}AgDropdownList.prototype.setWidth=function(width){this.eValue.style.width=width+"px";this.agList.addStyles({width:width+"px"});};AgDropdownList.prototype.addItemSelectedListener=function(listener){this.itemSelectedListeners.push(listener);};AgDropdownList.prototype.fireItemSelected=function(item){for(var i=0;i<this.itemSelectedListeners.length;i++){this.itemSelectedListeners[i](item);}};AgDropdownList.prototype.setupComponents=function(){this.eGui=document.createElement("span");this.eValue=document.createElement("span");this.eGui.appendChild(this.eValue);this.agList=new grid.AgList();this.eValue.addEventListener("click",this.onClick.bind(this));this.agList.addItemSelectedListener(this.itemSelected.bind(this));this.agList.addCssClass("ag-popup-list");utils.addStylesToElement(this.eValue,{border:"1px solid darkgrey",display:"inline-block",paddingLeft:2});utils.addStylesToElement(this.eGui,{position:"relative"});this.agList.addStyles({display:"inline-block",position:"absolute",top:0,left:0,backgroudColor:"white"});};AgDropdownList.prototype.itemSelected=function(item){this.setSelected(item);if(this.hidePopupCallback){this.hidePopupCallback();}this.fireItemSelected(item);};AgDropdownList.prototype.onClick=function(){var agListGui=this.agList.getGui();this.popupService.positionPopup(this.eGui,agListGui,-1);this.hidePopupCallback=this.popupService.addAsModalPopup(agListGui,true);};AgDropdownList.prototype.getGui=function(){return this.eGui;};AgDropdownList.prototype.setSelected=function(item){this.selectedItem=item;this.refreshView();};AgDropdownList.prototype.setCellRenderer=function(cellRenderer){this.agList.setCellRenderer(cellRenderer);this.cellRenderer=cellRenderer;};AgDropdownList.prototype.refreshView=function(){utils.removeAllChildren(this.eValue);if(this.selectedItem){if(this.cellRenderer){var params={value:this.selectedItem};utils.useRenderer(this.eValue,this.cellRenderer,params);}else{this.eValue.appendChild(document.createTextNode(this.selectedItem));}}var eDownIcon=svgFactory.createSmallArrowDownSvg();this.eValue.appendChild(eDownIcon);};AgDropdownList.prototype.setModel=function(model){this.agList.setModel(model);};return AgDropdownList;})();grid.AgDropdownList=AgDropdownList;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var svgFactory=grid.SvgFactory.getInstance();var constants=grid.Constants;var utils=grid.Utils;var ValuesSelectionPanel=(function(){function ValuesSelectionPanel(columnController,gridOptionsWrapper,popupService){this.popupService=popupService;this.gridOptionsWrapper=gridOptionsWrapper;this.setupComponents();this.columnController=columnController;this.columnController.addChangeListener(this.columnsChanged.bind(this));}ValuesSelectionPanel.prototype.getLayout=function(){return this.layout;};ValuesSelectionPanel.prototype.columnsChanged=function(){this.cColumnList.setModel(this.columnController.getValueColumns());};ValuesSelectionPanel.prototype.addDragSource=function(dragSource){this.cColumnList.addDragSource(dragSource);};ValuesSelectionPanel.prototype.cellRenderer=function(params){var column=params.value;var colDisplayName=this.columnController.getDisplayNameForCol(column);var eResult=document.createElement("span");var eRemove=utils.createIcon("columnRemoveFromGroup",this.gridOptionsWrapper,column,svgFactory.createArrowUpSvg);utils.addCssClass(eRemove,"ag-visible-icons");eResult.appendChild(eRemove);var that=this;eRemove.addEventListener("click",function(){that.columnController.removeValueColumn(column);});var agValueType=new grid.AgDropdownList(this.popupService);agValueType.setModel([constants.SUM,constants.MIN,constants.MAX]);agValueType.setSelected(column.aggFunc);agValueType.setWidth(45);agValueType.addItemSelectedListener(function(item){that.columnController.setColumnAggFunction(column,item);});eResult.appendChild(agValueType.getGui());var eValue=document.createElement("span");eValue.innerHTML=colDisplayName;eValue.style.paddingLeft="2px";eResult.appendChild(eValue);return eResult;};ValuesSelectionPanel.prototype.setupComponents=function(){var localeTextFunc=this.gridOptionsWrapper.getLocaleTextFunc();var columnsLocalText=localeTextFunc("valueColumns","Value Columns");var emptyMessage=localeTextFunc("valueColumnsEmptyMessage","Drag columns from above to create values");this.cColumnList=new grid.AgList();this.cColumnList.setCellRenderer(this.cellRenderer.bind(this));this.cColumnList.setEmptyMessage(emptyMessage);this.cColumnList.addStyles({height:"100%",overflow:"auto"});this.cColumnList.addBeforeDropListener(this.beforeDropListener.bind(this));this.cColumnList.setReadOnly(true);var eNorthPanel=document.createElement("div");eNorthPanel.style.paddingTop="10px";eNorthPanel.innerHTML='<div style="text-align: center;">'+columnsLocalText+"</div>";this.layout=new grid.BorderLayout({center:this.cColumnList.getGui(),north:eNorthPanel});};ValuesSelectionPanel.prototype.beforeDropListener=function(newItem){this.columnController.addValueColumn(newItem);};return ValuesSelectionPanel;})();grid.ValuesSelectionPanel=ValuesSelectionPanel;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var VerticalStack=(function(){function VerticalStack(){this.isLayoutPanel=true;this.childPanels=[];this.eGui=document.createElement("div");this.eGui.style.height="100%";}VerticalStack.prototype.addPanel=function(panel,height){var component;if(panel.isLayoutPanel){this.childPanels.push(panel);component=panel.getGui();}else{component=panel;}if(height){component.style.height=height;}this.eGui.appendChild(component);};VerticalStack.prototype.getGui=function(){return this.eGui;};VerticalStack.prototype.doLayout=function(){for(var i=0;i<this.childPanels.length;i++){this.childPanels[i].doLayout();}};return VerticalStack;})();grid.VerticalStack=VerticalStack;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var utils=grid.Utils;var ToolPanel=(function(){function ToolPanel(){this.layout=new grid.VerticalStack();}ToolPanel.prototype.init=function(columnController,inMemoryRowController,gridOptionsWrapper,popupService){var suppressPivotAndValues=gridOptionsWrapper.isToolPanelSuppressPivot();var suppressValues=gridOptionsWrapper.isToolPanelSuppressValues();var showPivot=!suppressPivotAndValues;var showValues=!suppressPivotAndValues&&!suppressValues;var columnSelectionPanel=new grid.ColumnSelectionPanel(columnController,gridOptionsWrapper);var heightColumnSelection=suppressPivotAndValues?"100%":"50%";this.layout.addPanel(columnSelectionPanel.layout,heightColumnSelection);var dragSource=columnSelectionPanel.getDragSource();if(showValues){var valuesSelectionPanel=new grid.ValuesSelectionPanel(columnController,gridOptionsWrapper,popupService);this.layout.addPanel(valuesSelectionPanel.getLayout(),"25%");valuesSelectionPanel.addDragSource(dragSource);}if(showPivot){var groupSelectionPanel=new grid.GroupSelectionPanel(columnController,inMemoryRowController,gridOptionsWrapper);var heightPivotSelection=showValues?"25%":"50%";this.layout.addPanel(groupSelectionPanel.layout,heightPivotSelection);groupSelectionPanel.addDragSource(dragSource);}var eGui=this.layout.getGui();utils.addCssClass(eGui,"ag-tool-panel-container");};return ToolPanel;})();grid.ToolPanel=ToolPanel;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(_grid){var GridApi=(function(){function GridApi(grid,rowRenderer,headerRenderer,filterManager,columnController,inMemoryRowController,selectionController,gridOptionsWrapper,gridPanel,valueService,masterSlaveService){this.grid=grid;this.rowRenderer=rowRenderer;this.headerRenderer=headerRenderer;this.filterManager=filterManager;this.columnController=columnController;this.inMemoryRowController=inMemoryRowController;this.selectionController=selectionController;this.gridOptionsWrapper=gridOptionsWrapper;this.gridPanel=gridPanel;this.valueService=valueService;this.masterSlaveService=masterSlaveService;}GridApi.prototype.__getMasterSlaveService=function(){return this.masterSlaveService;};GridApi.prototype.setDatasource=function(datasource){this.grid.setDatasource(datasource);};GridApi.prototype.onNewDatasource=function(){this.grid.setDatasource();};GridApi.prototype.setRows=function(rows){this.grid.setRows(rows);};GridApi.prototype.onNewRows=function(){this.grid.setRows();};GridApi.prototype.setFloatingTopRowData=function(rows){this.gridOptionsWrapper.setFloatingTopRowData(rows);this.gridPanel.onBodyHeightChange();this.refreshView();};GridApi.prototype.setFloatingBottomRowData=function(rows){this.gridOptionsWrapper.setFloatingBottomRowData(rows);this.gridPanel.onBodyHeightChange();this.refreshView();};GridApi.prototype.onNewCols=function(){this.grid.onNewCols();};GridApi.prototype.unselectAll=function(){console.error("unselectAll deprecated, call deselectAll instead");this.deselectAll();};GridApi.prototype.refreshView=function(){this.rowRenderer.refreshView();};GridApi.prototype.softRefreshView=function(){this.rowRenderer.softRefreshView();};GridApi.prototype.refreshGroupRows=function(){this.rowRenderer.refreshGroupRows();};GridApi.prototype.refreshHeader=function(){this.headerRenderer.refreshHeader();this.headerRenderer.updateFilterIcons();};GridApi.prototype.getModel=function(){return this.grid.rowModel;};GridApi.prototype.onGroupExpandedOrCollapsed=function(refreshFromIndex){this.grid.updateModelAndRefresh(_grid.Constants.STEP_MAP,refreshFromIndex);};GridApi.prototype.expandAll=function(){this.inMemoryRowController.expandOrCollapseAll(true,null);this.grid.updateModelAndRefresh(_grid.Constants.STEP_MAP);};GridApi.prototype.collapseAll=function(){this.inMemoryRowController.expandOrCollapseAll(false,null);this.grid.updateModelAndRefresh(_grid.Constants.STEP_MAP);};GridApi.prototype.addVirtualRowListener=function(rowIndex,callback){this.grid.addVirtualRowListener(rowIndex,callback);};GridApi.prototype.rowDataChanged=function(rows){this.rowRenderer.rowDataChanged(rows);};GridApi.prototype.setQuickFilter=function(newFilter){this.grid.onQuickFilterChanged(newFilter);};GridApi.prototype.selectIndex=function(index,tryMulti,suppressEvents){this.selectionController.selectIndex(index,tryMulti,suppressEvents);};GridApi.prototype.deselectIndex=function(index){this.selectionController.deselectIndex(index);};GridApi.prototype.selectNode=function(node,tryMulti,suppressEvents){this.selectionController.selectNode(node,tryMulti,suppressEvents);};GridApi.prototype.deselectNode=function(node){this.selectionController.deselectNode(node);};GridApi.prototype.selectAll=function(){this.selectionController.selectAll();this.rowRenderer.refreshView();};GridApi.prototype.deselectAll=function(){this.selectionController.deselectAll();this.rowRenderer.refreshView();};GridApi.prototype.recomputeAggregates=function(){this.inMemoryRowController.doAggregate();this.rowRenderer.refreshGroupRows();};GridApi.prototype.sizeColumnsToFit=function(){if(this.gridOptionsWrapper.isDontUseScrolls()){console.warn("ag-grid: sizeColumnsToFit does not work when dontUseScrolls=true");return;}var availableWidth=this.gridPanel.getWidthForSizeColsToFit();this.columnController.sizeColumnsToFit(availableWidth);};GridApi.prototype.showLoading=function(show){this.grid.showLoadingPanel(show);};GridApi.prototype.isNodeSelected=function(node){return this.selectionController.isNodeSelected(node);};GridApi.prototype.getSelectedNodes=function(){return this.selectionController.getSelectedNodes();};GridApi.prototype.getBestCostNodeSelection=function(){return this.selectionController.getBestCostNodeSelection();};GridApi.prototype.ensureColIndexVisible=function(index){this.gridPanel.ensureColIndexVisible(index);};GridApi.prototype.ensureIndexVisible=function(index){this.gridPanel.ensureIndexVisible(index);};GridApi.prototype.ensureNodeVisible=function(comparator){this.grid.ensureNodeVisible(comparator);};GridApi.prototype.forEachInMemory=function(callback){this.grid.rowModel.forEachInMemory(callback);};GridApi.prototype.getFilterApiForColDef=function(colDef){console.warn("ag-grid API method getFilterApiForColDef deprecated, use getFilterApi instead");return this.getFilterApi(colDef);};GridApi.prototype.getFilterApi=function(key){var column=this.columnController.getColumn(key);return this.filterManager.getFilterApi(column);};GridApi.prototype.getColumnDef=function(key){var column=this.columnController.getColumn(key);if(column){return column.colDef;}else{return null;}};GridApi.prototype.onFilterChanged=function(){this.grid.onFilterChanged();};GridApi.prototype.setSortModel=function(sortModel){this.grid.setSortModel(sortModel);};GridApi.prototype.getSortModel=function(){return this.grid.getSortModel();};GridApi.prototype.setFilterModel=function(model){this.filterManager.setFilterModel(model);};GridApi.prototype.getFilterModel=function(){return this.grid.getFilterModel();};GridApi.prototype.getFocusedCell=function(){return this.rowRenderer.getFocusedCell();};GridApi.prototype.setFocusedCell=function(rowIndex,colIndex){this.grid.setFocusedCell(rowIndex,colIndex);};GridApi.prototype.setHeaderHeight=function(headerHeight){this.gridOptionsWrapper.setHeaderHeight(headerHeight);this.gridPanel.onBodyHeightChange();};GridApi.prototype.setGroupHeaders=function(groupHeaders){this.gridOptionsWrapper.setGroupHeaders(groupHeaders);this.columnController.onColumnsChanged();this.gridPanel.onBodyHeightChange();};GridApi.prototype.showToolPanel=function(show){this.grid.showToolPanel(show);};GridApi.prototype.isToolPanelShowing=function(){return this.grid.isToolPanelShowing();};GridApi.prototype.hideColumn=function(colId,hide){console.warn("ag-Grid: hideColumn deprecated - use hideColumn on columnApi instead eg api.columnApi.hideColumn()");this.columnController.hideColumns([colId],hide);};GridApi.prototype.hideColumns=function(colIds,hide){console.warn("ag-Grid: hideColumns deprecated - use hideColumns on columnApi instead eg api.columnApi.hideColumns()");this.columnController.hideColumns(colIds,hide);};GridApi.prototype.getColumnState=function(){console.warn("ag-Grid: getColumnState deprecated - use getColumnState on columnApi instead eg api.columnApi.getState()");return this.columnController.getState();};GridApi.prototype.setColumnState=function(state){console.warn("ag-Grid: setColumnState deprecated - use setColumnState on columnApi instead eg api.columnApi.setState()");this.columnController.setState(state);};GridApi.prototype.doLayout=function(){this.grid.doLayout();};GridApi.prototype.getValue=function(colDef,data,node){return this.valueService.getValue(colDef,data,node);};return GridApi;})();_grid.GridApi=GridApi;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var ValueService=(function(){function ValueService(){}ValueService.prototype.init=function(gridOptionsWrapper,expressionService,columnController){this.gridOptionsWrapper=gridOptionsWrapper;this.expressionService=expressionService;this.columnController=columnController;};ValueService.prototype.getValue=function(colDef,data,node){var cellExpressions=this.gridOptionsWrapper.isEnableCellExpressions();var field=colDef.field;var result;if(colDef.valueGetter){result=this.executeValueGetter(colDef.valueGetter,data,colDef,node);}else{if(field&&data){result=data[field];}else{result=undefined;}}if(cellExpressions&&(typeof result==="string")&&result.indexOf("=")===0){var cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,colDef,node);}return result;};ValueService.prototype.executeValueGetter=function(valueGetter,data,colDef,node){var context=this.gridOptionsWrapper.getContext();var api=this.gridOptionsWrapper.getApi();var params={data:data,node:node,colDef:colDef,api:api,context:context,getValue:this.getValueCallback.bind(this,data,node)};if(typeof valueGetter==="function"){return valueGetter(params);}else{if(typeof valueGetter==="string"){return this.expressionService.evaluate(valueGetter,params);}}};ValueService.prototype.getValueCallback=function(data,node,field){var otherColumn=this.columnController.getColumn(field);if(otherColumn){return this.getValue(otherColumn.colDef,data,node);}else{return null;}};return ValueService;})();grid.ValueService=ValueService;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));var awk;(function(awk){var grid;(function(grid){var Grid=(function(){function Grid(eGridDiv,gridOptions,$scope,$compile,quickFilterOnScope){this.virtualRowCallbacks={};this.gridOptions=gridOptions;this.gridOptionsWrapper=new grid.GridOptionsWrapper(this.gridOptions);this.setupComponents($scope,$compile,eGridDiv);this.gridOptions.api=new grid.GridApi(this,this.rowRenderer,this.headerRenderer,this.filterManager,this.columnController,this.inMemoryRowController,this.selectionController,this.gridOptionsWrapper,this.gridPanel,this.valueService,this.masterSlaveService);this.gridOptions.columnApi=this.columnController.getColumnApi();var that=this;if($scope){$scope.$watch(quickFilterOnScope,function(newFilter){that.onQuickFilterChanged(newFilter);});}var forPrint=this.gridOptionsWrapper.isDontUseScrolls();if(!forPrint){window.addEventListener("resize",this.doLayout.bind(this));}this.inMemoryRowController.setAllRows(this.gridOptionsWrapper.getRowData());this.setupColumns();this.updateModelAndRefresh(grid.Constants.STEP_EVERYTHING);var showLoading=!this.gridOptionsWrapper.getRowData()&&!this.gridOptionsWrapper.isVirtualPaging();this.showLoadingPanel(showLoading);if(this.gridOptionsWrapper.getDatasource()){this.setDatasource();}this.doLayout();this.finished=false;this.periodicallyDoLayout();if(typeof this.gridOptionsWrapper.getReady()=="function"){this.gridOptionsWrapper.getReady()(gridOptions.api);}}Grid.prototype.periodicallyDoLayout=function(){if(!this.finished){var that=this;setTimeout(function(){that.doLayout();that.periodicallyDoLayout();},500);}};Grid.prototype.setupComponents=function($scope,$compile,eUserProvidedDiv){var _this=this;var gridOptionsWrapper=this.gridOptionsWrapper;var forPrint=gridOptionsWrapper.isDontUseScrolls();var selectionController=new grid.SelectionController();var filterManager=new grid.FilterManager();var selectionRendererFactory=new grid.SelectionRendererFactory();var columnController=new grid.ColumnController();var rowRenderer=new grid.RowRenderer();var headerRenderer=new grid.HeaderRenderer();var inMemoryRowController=new grid.InMemoryRowController();var virtualPageRowController=new grid.VirtualPageRowController();var expressionService=new grid.ExpressionService();var templateService=new grid.TemplateService();var gridPanel=new grid.GridPanel(gridOptionsWrapper);var popupService=new grid.PopupService();var valueService=new grid.ValueService();var groupCreator=new grid.GroupCreator();var masterSlaveService=new grid.MasterSlaveService();var loggerFactory=new grid.LoggerFactory(gridOptionsWrapper.isDebug());templateService.init($scope);expressionService.init(loggerFactory);selectionController.init(this,gridPanel,gridOptionsWrapper,$scope,rowRenderer);filterManager.init(this,gridOptionsWrapper,$compile,$scope,columnController,popupService,valueService);selectionRendererFactory.init(this,selectionController);columnController.init(this,selectionRendererFactory,gridOptionsWrapper,expressionService,valueService,masterSlaveService);rowRenderer.init(columnController,gridOptionsWrapper,gridPanel,this,selectionRendererFactory,$compile,$scope,selectionController,expressionService,templateService,valueService);headerRenderer.init(gridOptionsWrapper,columnController,gridPanel,this,filterManager,$scope,$compile);inMemoryRowController.init(gridOptionsWrapper,columnController,this,filterManager,$scope,groupCreator,valueService);virtualPageRowController.init(rowRenderer,gridOptionsWrapper,this);gridPanel.init(columnController,rowRenderer,masterSlaveService);valueService.init(gridOptionsWrapper,expressionService,columnController);groupCreator.init(valueService);masterSlaveService.init(gridOptionsWrapper,columnController,gridPanel,loggerFactory);var toolPanelLayout=null;var toolPanel=null;if(!forPrint){toolPanel=new grid.ToolPanel();toolPanelLayout=toolPanel.layout;toolPanel.init(columnController,inMemoryRowController,gridOptionsWrapper,popupService);}var rowModel=inMemoryRowController.getModel();selectionController.setRowModel(rowModel);filterManager.setRowModel(rowModel);rowRenderer.setRowModel(rowModel);gridPanel.setRowModel(rowModel);var paginationController=null;var paginationGui=null;if(!forPrint){paginationController=new grid.PaginationController();paginationController.init(this,gridOptionsWrapper);paginationGui=paginationController.getGui();}this.rowModel=rowModel;this.selectionController=selectionController;this.columnController=columnController;this.inMemoryRowController=inMemoryRowController;this.virtualPageRowController=virtualPageRowController;this.rowRenderer=rowRenderer;this.headerRenderer=headerRenderer;this.paginationController=paginationController;this.filterManager=filterManager;this.toolPanel=toolPanel;this.gridPanel=gridPanel;this.valueService=valueService;this.masterSlaveService=masterSlaveService;this.eRootPanel=new grid.BorderLayout({center:gridPanel.getLayout(),east:toolPanelLayout,south:paginationGui,dontFill:forPrint,name:"eRootPanel"});popupService.init(this.eRootPanel.getGui());this.eRootPanel.setSouthVisible(false);this.showToolPanel(gridOptionsWrapper.isShowToolPanel());eUserProvidedDiv.appendChild(this.eRootPanel.getGui());columnController.addChangeListener(function(event){if(event.isPivotChanged()){_this.inMemoryRowController.onPivotChanged();}if(event.isValueChanged()){_this.inMemoryRowController.doAggregate();}if(event.isIndividualColumnResized()){_this.onIndividualColumnResized(event.getColumn());}else{_this.refreshHeaderAndBody();}_this.gridPanel.showPinnedColContainersIfNeeded();});};Grid.prototype.onIndividualColumnResized=function(column){this.headerRenderer.onIndividualColumnResized(column);this.rowRenderer.onIndividualColumnResized(column);if(column.pinned){this.updatePinnedColContainerWidthAfterColResize();}else{this.updateBodyContainerWidthAfterColResize();}};Grid.prototype.showToolPanel=function(show){if(!this.toolPanel){this.toolPanelShowing=false;return;}this.toolPanelShowing=show;this.eRootPanel.setEastVisible(show);};Grid.prototype.isToolPanelShowing=function(){return this.toolPanelShowing;};Grid.prototype.setDatasource=function(datasource){if(datasource){this.gridOptions.datasource=datasource;}var datasourceToUse=this.gridOptionsWrapper.getDatasource();this.doingVirtualPaging=this.gridOptionsWrapper.isVirtualPaging()&&datasourceToUse;this.doingPagination=datasourceToUse&&!this.doingVirtualPaging;var showPagingPanel;if(this.doingVirtualPaging){this.paginationController.setDatasource(null);this.virtualPageRowController.setDatasource(datasourceToUse);this.rowModel=this.virtualPageRowController.getModel();showPagingPanel=false;}else{if(this.doingPagination){this.paginationController.setDatasource(datasourceToUse);this.virtualPageRowController.setDatasource(null);this.rowModel=this.inMemoryRowController.getModel();showPagingPanel=true;}else{this.paginationController.setDatasource(null);this.virtualPageRowController.setDatasource(null);this.rowModel=this.inMemoryRowController.getModel();showPagingPanel=false;}}this.selectionController.setRowModel(this.rowModel);this.filterManager.setRowModel(this.rowModel);this.rowRenderer.setRowModel(this.rowModel);this.gridPanel.setRowModel(this.rowModel);this.eRootPanel.setSouthVisible(showPagingPanel);this.rowRenderer.refreshView();this.doLayout();};Grid.prototype.refreshHeaderAndBody=function(){this.headerRenderer.refreshHeader();this.headerRenderer.updateFilterIcons();this.headerRenderer.updateSortIcons();this.gridPanel.setBodyContainerWidth();this.gridPanel.setPinnedColContainerWidth();this.rowRenderer.refreshView();};Grid.prototype.setFinished=function(){window.removeEventListener("resize",this.doLayout);this.finished=true;};Grid.prototype.onQuickFilterChanged=function(newFilter){var actuallyChanged=this.filterManager.setQuickFilter(newFilter);if(actuallyChanged){this.onFilterChanged();}};Grid.prototype.onFilterModified=function(){if(typeof this.gridOptionsWrapper.getFilterModified()==="function"){this.gridOptionsWrapper.getFilterModified()();}};Grid.prototype.onFilterChanged=function(){if(typeof this.gridOptionsWrapper.getBeforeFilterChanged()==="function"){this.gridOptionsWrapper.getBeforeFilterChanged()();}this.filterManager.onFilterChanged();this.headerRenderer.updateFilterIcons();if(this.gridOptionsWrapper.isEnableServerSideFilter()){this.setDatasource();}else{this.updateModelAndRefresh(grid.Constants.STEP_FILTER);}if(typeof this.gridOptionsWrapper.getAfterFilterChanged()==="function"){this.gridOptionsWrapper.getAfterFilterChanged()();}};Grid.prototype.onRowClicked=function(event,rowIndex,node){if(this.gridOptions.rowClicked){var params={node:node,data:node.data,event:event,rowIndex:rowIndex};this.gridOptions.rowClicked(params);}if(node.group){return;}if(node.floating){return;}var gridOptionsWrapper=this.gridOptionsWrapper;var selectionController=this.selectionController;if(!gridOptionsWrapper.isRowSelection()){return;}if(gridOptionsWrapper.isSuppressRowClickSelection()){return;}var ctrlKeyPressed=event.ctrlKey||event.metaKey;var doDeselect=ctrlKeyPressed&&selectionController.isNodeSelected(node)&&gridOptionsWrapper.isRowDeselection();if(doDeselect){selectionController.deselectNode(node);}else{var tryMulti=ctrlKeyPressed;selectionController.selectNode(node,tryMulti);}};Grid.prototype.showLoadingPanel=function(show){this.gridPanel.showLoading(show);};Grid.prototype.setupColumns=function(){this.columnController.onColumnsChanged();this.gridPanel.showPinnedColContainersIfNeeded();};Grid.prototype.updateModelAndRefresh=function(step,refreshFromIndex){this.inMemoryRowController.updateModel(step);this.rowRenderer.refreshView(refreshFromIndex);};Grid.prototype.setRows=function(rows,firstId){if(rows){this.gridOptions.rowData=rows;}this.inMemoryRowController.setAllRows(this.gridOptionsWrapper.getRowData(),firstId);this.selectionController.deselectAll();this.filterManager.onNewRowsLoaded();this.updateModelAndRefresh(grid.Constants.STEP_EVERYTHING);this.headerRenderer.updateFilterIcons();this.showLoadingPanel(false);};Grid.prototype.ensureNodeVisible=function(comparator){if(this.doingVirtualPaging){throw"Cannot use ensureNodeVisible when doing virtual paging, as we cannot check rows that are not in memory";}var rowCount=this.rowModel.getVirtualRowCount();var comparatorIsAFunction=typeof comparator==="function";var indexToSelect=-1;for(var i=0;i<rowCount;i++){var node=this.rowModel.getVirtualRow(i);if(comparatorIsAFunction){if(comparator(node)){indexToSelect=i;break;}}else{if(comparator===node||comparator===node.data){indexToSelect=i;break;}}}if(indexToSelect>=0){this.gridPanel.ensureIndexVisible(indexToSelect);}};Grid.prototype.getFilterModel=function(){return this.filterManager.getFilterModel();};Grid.prototype.setFocusedCell=function(rowIndex,colIndex){this.gridPanel.ensureIndexVisible(rowIndex);this.gridPanel.ensureColIndexVisible(colIndex);var that=this;setTimeout(function(){that.rowRenderer.setFocusedCell(rowIndex,colIndex);},10);};Grid.prototype.getSortModel=function(){var allColumns=this.columnController.getAllColumns();var columnsWithSorting=[];var i;for(i=0;i<allColumns.length;i++){if(allColumns[i].sort){columnsWithSorting.push(allColumns[i]);}}columnsWithSorting.sort(function(a,b){return a.sortedAt-b.sortedAt;});var result=[];for(i=0;i<columnsWithSorting.length;i++){var resultEntry={colId:columnsWithSorting[i].colId,sort:columnsWithSorting[i].sort};result.push(resultEntry);}return result;};Grid.prototype.setSortModel=function(sortModel){if(!this.gridOptionsWrapper.isEnableSorting()){console.warn("ag-grid: You are setting the sort model on a grid that does not have sorting enabled");return;}var sortModelProvided=sortModel!==null&&sortModel!==undefined&&sortModel.length>0;var allColumns=this.columnController.getAllColumns();for(var i=0;i<allColumns.length;i++){var column=allColumns[i];var sortForCol=null;var sortedAt=-1;if(sortModelProvided&&!column.colDef.suppressSorting){for(var j=0;j<sortModel.length;j++){var sortModelEntry=sortModel[j];if(typeof sortModelEntry.colId==="string"&&typeof column.colId==="string"&&sortModelEntry.colId===column.colId){sortForCol=sortModelEntry.sort;sortedAt=j;}}}if(sortForCol){column.sort=sortForCol;column.sortedAt=sortedAt;}else{column.sort=null;column.sortedAt=null;}}this.onSortingChanged();};Grid.prototype.onSortingChanged=function(){if(typeof this.gridOptionsWrapper.getBeforeSortChanged()==="function"){this.gridOptionsWrapper.getBeforeSortChanged()();}this.headerRenderer.updateSortIcons();if(this.gridOptionsWrapper.isEnableServerSideSorting()){this.setDatasource();}else{this.updateModelAndRefresh(grid.Constants.STEP_SORT);}if(typeof this.gridOptionsWrapper.getAfterSortChanged()==="function"){this.gridOptionsWrapper.getAfterSortChanged()();}};Grid.prototype.addVirtualRowListener=function(rowIndex,callback){if(!this.virtualRowCallbacks[rowIndex]){this.virtualRowCallbacks[rowIndex]=[];}this.virtualRowCallbacks[rowIndex].push(callback);};Grid.prototype.onVirtualRowSelected=function(rowIndex,selected){if(this.virtualRowCallbacks[rowIndex]){this.virtualRowCallbacks[rowIndex].forEach(function(callback){if(typeof callback.rowRemoved==="function"){callback.rowSelected(selected);}});}this.rowRenderer.onRowSelected(rowIndex,selected);};Grid.prototype.onVirtualRowRemoved=function(rowIndex){if(this.virtualRowCallbacks[rowIndex]){this.virtualRowCallbacks[rowIndex].forEach(function(callback){if(typeof callback.rowRemoved==="function"){callback.rowRemoved();}});}delete this.virtualRowCallbacks[rowIndex];};Grid.prototype.onNewCols=function(){this.setupColumns();this.updateModelAndRefresh(grid.Constants.STEP_EVERYTHING);this.doLayout();};Grid.prototype.updateBodyContainerWidthAfterColResize=function(){this.rowRenderer.setMainRowWidths();this.gridPanel.setBodyContainerWidth();};Grid.prototype.updatePinnedColContainerWidthAfterColResize=function(){this.gridPanel.setPinnedColContainerWidth();};Grid.prototype.doLayout=function(){var sizeChanged=this.eRootPanel.doLayout();if(sizeChanged){this.rowRenderer.drawVirtualRows();}};return Grid;})();grid.Grid=Grid;})(grid=awk.grid||(awk.grid={}));})(awk||(awk={}));(function(){var root=this;var angular=window.angular;if(typeof angular!=="undefined"){var angularModule=angular.module("angularGrid",[]);angularModule.directive("angularGrid",function(){return{restrict:"A",controller:["$element","$scope","$compile",AngularDirectiveController],scope:{angularGrid:"="}};});angularModule.directive("agGrid",function(){return{restrict:"A",controller:["$element","$scope","$compile","$attrs",AngularDirectiveController],scope:true};});}if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){exports=module.exports=angularGridGlobalFunction;}exports.angularGrid=angularGridGlobalFunction;}if(document.registerElement){registerWebComponent();}root.angularGrid=angularGridGlobalFunction;function AngularDirectiveController($element,$scope,$compile,$attrs){var gridOptions;var quickFilterOnScope;if($attrs){var keyOfGridInScope=$attrs.agGrid;quickFilterOnScope=keyOfGridInScope+".quickFilterText";gridOptions=$scope.$eval(keyOfGridInScope);if(!gridOptions){console.warn("WARNING - grid options for Angular Grid not found. Please ensure the attribute ag-grid points to a valid object on the scope");return;}}else{console.warn("WARNING - Directive angular-grid is deprecated, you should use the ag-grid directive instead.");gridOptions=$scope.angularGrid;quickFilterOnScope="angularGrid.quickFilterText";if(!gridOptions){console.warn("WARNING - grid options for Angular Grid not found. Please ensure the attribute angular-grid points to a valid object on the scope");return;}}var eGridDiv=$element[0];var grid=new awk.grid.Grid(eGridDiv,gridOptions,$scope,$compile,quickFilterOnScope);$scope.$on("$destroy",function(){grid.setFinished();});}function registerWebComponent(){var AgileGridProto=Object.create(HTMLElement.prototype);AgileGridProto.setGridOptions=function(options){angularGridGlobalFunction(this,options);};document.registerElement("agile-grid",{prototype:AgileGridProto});}function angularGridGlobalFunction(element,gridOptions){var eGridDiv;if(typeof element==="string"){eGridDiv=document.querySelector(element);if(!eGridDiv){console.warn("WARNING - was not able to find element "+element+" in the DOM, Angular Grid initialisation aborted.");return;}}else{eGridDiv=element;}new awk.grid.Grid(eGridDiv,gridOptions,null,null,null);}}).call(window);/*
 * ASP.NET SignalR JavaScript Library v2.2.0
 * http://signalr.net/
 *
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *
 */
(function($,window,undefined){var resources={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof($)!=="function"){throw new Error(resources.nojQuery);}var signalR,_connection,_pageLoaded=(window.document.readyState==="complete"),_pageWindow=$(window),_negotiateAbortText="__Negotiate Aborted__",events={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},ajaxDefaults={processData:true,timeout:null,async:true,global:false,cache:false},log=function(msg,logging){if(logging===false){return;}var m;if(typeof(window.console)==="undefined"){return;}m="["+new Date().toTimeString()+"] SignalR: "+msg;if(window.console.debug){window.console.debug(m);}else{if(window.console.log){window.console.log(m);}}},changeState=function(connection,expectedState,newState){if(expectedState===connection.state){connection.state=newState;$(connection).triggerHandler(events.onStateChanged,[{oldState:expectedState,newState:newState}]);return true;}return false;},isDisconnecting=function(connection){return connection.state===signalR.connectionState.disconnected;},supportsKeepAlive=function(connection){return connection._.keepAliveData.activated&&connection.transport.supportsKeepAlive(connection);},configureStopReconnectingTimeout=function(connection){var stopReconnectingTimeout,onReconnectTimeout;if(!connection._.configuredStopReconnectingTimeout){onReconnectTimeout=function(connection){var message=signalR._.format(signalR.resources.reconnectTimeout,connection.disconnectTimeout);connection.log(message);$(connection).triggerHandler(events.onError,[signalR._.error(message,"TimeoutException")]);connection.stop(false,false);};connection.reconnecting(function(){var connection=this;if(connection.state===signalR.connectionState.reconnecting){stopReconnectingTimeout=window.setTimeout(function(){onReconnectTimeout(connection);},connection.disconnectTimeout);}});connection.stateChanged(function(data){if(data.oldState===signalR.connectionState.reconnecting){window.clearTimeout(stopReconnectingTimeout);}});connection._.configuredStopReconnectingTimeout=true;}};signalR=function(url,qs,logging){return new signalR.fn.init(url,qs,logging);};signalR._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:(function(){var version,matches;if(window.navigator.appName==="Microsoft Internet Explorer"){matches=/MSIE ([0-9]+\.[0-9]+)/.exec(window.navigator.userAgent);if(matches){version=window.parseFloat(matches[1]);}}return version;})(),error:function(message,source,context){var e=new Error(message);e.source=source;if(typeof context!=="undefined"){e.context=context;}return e;},transportError:function(message,transport,source,context){var e=this.error(message,source,context);e.transport=transport?transport.name:undefined;return e;},format:function(){var s=arguments[0];for(var i=0;i<arguments.length-1;i++){s=s.replace("{"+i+"}",arguments[i+1]);}return s;},firefoxMajorVersion:function(userAgent){var matches=userAgent.match(/Firefox\/(\d+)/);if(!matches||!matches.length||matches.length<2){return 0;}return parseInt(matches[1],10);},configurePingInterval:function(connection){var config=connection._.config,onFail=function(error){$(connection).triggerHandler(events.onError,[error]);};if(config&&!connection._.pingIntervalId&&config.pingInterval){connection._.pingIntervalId=window.setInterval(function(){signalR.transports._logic.pingServer(connection).fail(onFail);},config.pingInterval);}}};signalR.events=events;signalR.resources=resources;signalR.ajaxDefaults=ajaxDefaults;signalR.changeState=changeState;signalR.isDisconnecting=isDisconnecting;signalR.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};signalR.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.");}};_pageWindow.load(function(){_pageLoaded=true;});function validateTransport(requestedTransport,connection){if($.isArray(requestedTransport)){for(var i=requestedTransport.length-1;i>=0;i--){var transport=requestedTransport[i];if($.type(transport)!=="string"||!signalR.transports[transport]){connection.log("Invalid transport: "+transport+", removing it from the transports list.");requestedTransport.splice(i,1);}}if(requestedTransport.length===0){connection.log("No transports remain within the specified transport array.");requestedTransport=null;}}else{if(!signalR.transports[requestedTransport]&&requestedTransport!=="auto"){connection.log("Invalid transport: "+requestedTransport.toString()+".");requestedTransport=null;}else{if(requestedTransport==="auto"&&signalR._.ieVersion<=8){return["longPolling"];}}}return requestedTransport;}function getDefaultPort(protocol){if(protocol==="http:"){return 80;}else{if(protocol==="https:"){return 443;}}}function addDefaultPort(protocol,url){if(url.match(/:\d+$/)){return url;}else{return url+":"+getDefaultPort(protocol);}}function ConnectingMessageBuffer(connection,drainCallback){var that=this,buffer=[];that.tryBuffer=function(message){if(connection.state===$.signalR.connectionState.connecting){buffer.push(message);return true;}return false;};that.drain=function(){if(connection.state===$.signalR.connectionState.connected){while(buffer.length>0){drainCallback(buffer.shift());}}};that.clear=function(){buffer=[];};}signalR.fn=signalR.prototype={init:function(url,qs,logging){var $connection=$(this);this.url=url;this.qs=qs;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new ConnectingMessageBuffer(this,function(message){$connection.triggerHandler(events.onReceived,[message]);}),lastMessageAt:new Date().getTime(),lastActiveAt:new Date().getTime(),beatInterval:5000,beatHandle:null,totalTransportConnectTimeout:0};if(typeof(logging)==="boolean"){this.logging=logging;}},_parseResponse:function(response){var that=this;if(!response){return response;}else{if(typeof response==="string"){return that.json.parse(response);}else{return response;}}},_originalJson:window.JSON,json:window.JSON,isCrossDomain:function(url,against){var link;url=$.trim(url);against=against||window.location;if(url.indexOf("http")!==0){return false;}link=window.document.createElement("a");link.href=url;return link.protocol+addDefaultPort(link.protocol,link.host)!==against.protocol+addDefaultPort(against.protocol,against.host);},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:false,state:signalR.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2000,transportConnectTimeout:0,disconnectTimeout:30000,reconnectWindow:30000,keepAliveWarnAt:2/3,start:function(options,callback){var connection=this,config={pingInterval:300000,waitForPageLoad:true,transport:"auto",jsonp:false},initialize,deferred=connection._deferral||$.Deferred(),parser=window.document.createElement("a");connection.lastError=null;connection._deferral=deferred;if(!connection.json){throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");}if($.type(options)==="function"){callback=options;}else{if($.type(options)==="object"){$.extend(config,options);if($.type(config.callback)==="function"){callback=config.callback;}}}config.transport=validateTransport(config.transport,connection);if(!config.transport){throw new Error("SignalR: Invalid transport(s) specified, aborting start.");}connection._.config=config;if(!_pageLoaded&&config.waitForPageLoad===true){connection._.deferredStartHandler=function(){connection.start(options,callback);};_pageWindow.bind("load",connection._.deferredStartHandler);return deferred.promise();}if(connection.state===signalR.connectionState.connecting){return deferred.promise();}else{if(changeState(connection,signalR.connectionState.disconnected,signalR.connectionState.connecting)===false){deferred.resolve(connection);return deferred.promise();}}configureStopReconnectingTimeout(connection);parser.href=connection.url;if(!parser.protocol||parser.protocol===":"){connection.protocol=window.document.location.protocol;connection.host=parser.host||window.document.location.host;}else{connection.protocol=parser.protocol;connection.host=parser.host;}connection.baseUrl=connection.protocol+"//"+connection.host;connection.wsProtocol=connection.protocol==="https:"?"wss://":"ws://";if(config.transport==="auto"&&config.jsonp===true){config.transport="longPolling";}if(connection.url.indexOf("//")===0){connection.url=window.location.protocol+connection.url;connection.log("Protocol relative URL detected, normalizing it to '"+connection.url+"'.");}if(this.isCrossDomain(connection.url)){connection.log("Auto detected cross domain url.");if(config.transport==="auto"){config.transport=["webSockets","serverSentEvents","longPolling"];}if(typeof(config.withCredentials)==="undefined"){config.withCredentials=true;}if(!config.jsonp){config.jsonp=!$.support.cors;if(config.jsonp){connection.log("Using jsonp because this browser doesn't support CORS.");}}connection.contentType=signalR._.defaultContentType;}connection.withCredentials=config.withCredentials;connection.ajaxDataType=config.jsonp?"jsonp":"text";$(connection).bind(events.onStart,function(e,data){if($.type(callback)==="function"){callback.call(connection);}deferred.resolve(connection);});connection._.initHandler=signalR.transports._logic.initHandler(connection);initialize=function(transports,index){var noTransportError=signalR._.error(resources.noTransportOnInit);index=index||0;if(index>=transports.length){if(index===0){connection.log("No transports supported by the server were selected.");}else{if(index===1){connection.log("No fallback transports were selected.");}else{connection.log("Fallback transports exhausted.");}}$(connection).triggerHandler(events.onError,[noTransportError]);deferred.reject(noTransportError);connection.stop();return;}if(connection.state===signalR.connectionState.disconnected){return;}var transportName=transports[index],transport=signalR.transports[transportName],onFallback=function(){initialize(transports,index+1);};connection.transport=transport;try{connection._.initHandler.start(transport,function(){var isFirefox11OrGreater=signalR._.firefoxMajorVersion(window.navigator.userAgent)>=11,asyncAbort=!!connection.withCredentials&&isFirefox11OrGreater;connection.log("The start request succeeded. Transitioning to the connected state.");if(supportsKeepAlive(connection)){signalR.transports._logic.monitorKeepAlive(connection);}signalR.transports._logic.startHeartbeat(connection);signalR._.configurePingInterval(connection);if(!changeState(connection,signalR.connectionState.connecting,signalR.connectionState.connected)){connection.log("WARNING! The connection was not in the connecting state.");}connection._.connectingMessageBuffer.drain();$(connection).triggerHandler(events.onStart);_pageWindow.bind("unload",function(){connection.log("Window unloading, stopping the connection.");connection.stop(asyncAbort);});if(isFirefox11OrGreater){_pageWindow.bind("beforeunload",function(){window.setTimeout(function(){connection.stop(asyncAbort);},0);});}},onFallback);}catch(error){connection.log(transport.name+" transport threw '"+error.message+"' when attempting to start.");onFallback();}};var url=connection.url+"/negotiate",onFailed=function(error,connection){var err=signalR._.error(resources.errorOnNegotiate,error,connection._.negotiateRequest);$(connection).triggerHandler(events.onError,err);deferred.reject(err);connection.stop();};$(connection).triggerHandler(events.onStarting);url=signalR.transports._logic.prepareQueryString(connection,url);connection.log("Negotiating with '"+url+"'.");connection._.negotiateRequest=signalR.transports._logic.ajax(connection,{url:url,error:function(error,statusText){if(statusText!==_negotiateAbortText){onFailed(error,connection);}else{deferred.reject(signalR._.error(resources.stoppedWhileNegotiating,null,connection._.negotiateRequest));}},success:function(result){var res,keepAliveData,protocolError,transports=[],supportedTransports=[];try{res=connection._parseResponse(result);}catch(error){onFailed(signalR._.error(resources.errorParsingNegotiateResponse,error),connection);return;}keepAliveData=connection._.keepAliveData;connection.appRelativeUrl=res.Url;connection.id=res.ConnectionId;connection.token=res.ConnectionToken;connection.webSocketServerUrl=res.WebSocketServerUrl;connection._.pollTimeout=res.ConnectionTimeout*1000+10000;connection.disconnectTimeout=res.DisconnectTimeout*1000;connection._.totalTransportConnectTimeout=connection.transportConnectTimeout+res.TransportConnectTimeout*1000;if(res.KeepAliveTimeout){keepAliveData.activated=true;keepAliveData.timeout=res.KeepAliveTimeout*1000;keepAliveData.timeoutWarning=keepAliveData.timeout*connection.keepAliveWarnAt;connection._.beatInterval=(keepAliveData.timeout-keepAliveData.timeoutWarning)/3;}else{keepAliveData.activated=false;}connection.reconnectWindow=connection.disconnectTimeout+(keepAliveData.timeout||0);if(!res.ProtocolVersion||res.ProtocolVersion!==connection.clientProtocol){protocolError=signalR._.error(signalR._.format(resources.protocolIncompatible,connection.clientProtocol,res.ProtocolVersion));$(connection).triggerHandler(events.onError,[protocolError]);deferred.reject(protocolError);return;}$.each(signalR.transports,function(key){if((key.indexOf("_")===0)||(key==="webSockets"&&!res.TryWebSockets)){return true;}supportedTransports.push(key);});if($.isArray(config.transport)){$.each(config.transport,function(_,transport){if($.inArray(transport,supportedTransports)>=0){transports.push(transport);}});}else{if(config.transport==="auto"){transports=supportedTransports;}else{if($.inArray(config.transport,supportedTransports)>=0){transports.push(config.transport);}}}initialize(transports);}});return deferred.promise();},starting:function(callback){var connection=this;$(connection).bind(events.onStarting,function(e,data){callback.call(connection);});return connection;},send:function(data){var connection=this;if(connection.state===signalR.connectionState.disconnected){throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");}if(connection.state===signalR.connectionState.connecting){throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");}connection.transport.send(connection,data);return connection;},received:function(callback){var connection=this;$(connection).bind(events.onReceived,function(e,data){callback.call(connection,data);});return connection;},stateChanged:function(callback){var connection=this;$(connection).bind(events.onStateChanged,function(e,data){callback.call(connection,data);});return connection;},error:function(callback){var connection=this;$(connection).bind(events.onError,function(e,errorData,sendData){connection.lastError=errorData;callback.call(connection,errorData,sendData);});return connection;},disconnected:function(callback){var connection=this;$(connection).bind(events.onDisconnect,function(e,data){callback.call(connection);});return connection;},connectionSlow:function(callback){var connection=this;$(connection).bind(events.onConnectionSlow,function(e,data){callback.call(connection);});return connection;},reconnecting:function(callback){var connection=this;$(connection).bind(events.onReconnecting,function(e,data){callback.call(connection);});return connection;},reconnected:function(callback){var connection=this;$(connection).bind(events.onReconnect,function(e,data){callback.call(connection);});return connection;},stop:function(async,notifyServer){var connection=this,deferral=connection._deferral;if(connection._.deferredStartHandler){_pageWindow.unbind("load",connection._.deferredStartHandler);}delete connection._.config;delete connection._.deferredStartHandler;if(!_pageLoaded&&(!connection._.config||connection._.config.waitForPageLoad===true)){connection.log("Stopping connection prior to negotiate.");if(deferral){deferral.reject(signalR._.error(resources.stoppedWhileLoading));}return;}if(connection.state===signalR.connectionState.disconnected){return;}connection.log("Stopping connection.");changeState(connection,connection.state,signalR.connectionState.disconnected);window.clearTimeout(connection._.beatHandle);window.clearInterval(connection._.pingIntervalId);if(connection.transport){connection.transport.stop(connection);if(notifyServer!==false){connection.transport.abort(connection,async);}if(supportsKeepAlive(connection)){signalR.transports._logic.stopMonitoringKeepAlive(connection);}connection.transport=null;}if(connection._.negotiateRequest){connection._.negotiateRequest.abort(_negotiateAbortText);delete connection._.negotiateRequest;}if(connection._.initHandler){connection._.initHandler.stop();}$(connection).triggerHandler(events.onDisconnect);delete connection._deferral;delete connection.messageId;delete connection.groupsToken;delete connection.id;delete connection._.pingIntervalId;delete connection._.lastMessageAt;delete connection._.lastActiveAt;connection._.connectingMessageBuffer.clear();return connection;},log:function(msg){log(msg,this.logging);}};signalR.fn.init.prototype=signalR.fn;signalR.noConflict=function(){if($.connection===signalR){$.connection=_connection;}return signalR;};if($.connection){_connection=$.connection;}$.connection=$.signalR=signalR;}(window.jQuery,window));(function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,startAbortText="__Start Aborted__",transportLogic;signalR.transports={};function beat(connection){if(connection._.keepAliveData.monitoring){checkIfAlive(connection);}if(transportLogic.markActive(connection)){connection._.beatHandle=window.setTimeout(function(){beat(connection);},connection._.beatInterval);}}function checkIfAlive(connection){var keepAliveData=connection._.keepAliveData,timeElapsed;if(connection.state===signalR.connectionState.connected){timeElapsed=new Date().getTime()-connection._.lastMessageAt;if(timeElapsed>=keepAliveData.timeout){connection.log("Keep alive timed out.  Notifying transport that connection has been lost.");connection.transport.lostConnection(connection);}else{if(timeElapsed>=keepAliveData.timeoutWarning){if(!keepAliveData.userNotified){connection.log("Keep alive has been missed, connection may be dead/slow.");$(connection).triggerHandler(events.onConnectionSlow);keepAliveData.userNotified=true;}}else{keepAliveData.userNotified=false;}}}}function getAjaxUrl(connection,path){var url=connection.url+path;if(connection.transport){url+="?transport="+connection.transport.name;}return transportLogic.prepareQueryString(connection,url);}function InitHandler(connection){this.connection=connection;this.startRequested=false;this.startCompleted=false;this.connectionStopped=false;}InitHandler.prototype={start:function(transport,onSuccess,onFallback){var that=this,connection=that.connection,failCalled=false;if(that.startRequested||that.connectionStopped){connection.log("WARNING! "+transport.name+" transport cannot be started. Initialization ongoing or completed.");return;}connection.log(transport.name+" transport starting.");that.transportTimeoutHandle=window.setTimeout(function(){if(!failCalled){failCalled=true;connection.log(transport.name+" transport timed out when trying to connect.");that.transportFailed(transport,undefined,onFallback);}},connection._.totalTransportConnectTimeout);transport.start(connection,function(){if(!failCalled){that.initReceived(transport,onSuccess);}},function(error){if(!failCalled){failCalled=true;that.transportFailed(transport,error,onFallback);}return !that.startCompleted||that.connectionStopped;});},stop:function(){this.connectionStopped=true;window.clearTimeout(this.transportTimeoutHandle);signalR.transports._logic.tryAbortStartRequest(this.connection);},initReceived:function(transport,onSuccess){var that=this,connection=that.connection;if(that.startRequested){connection.log("WARNING! The client received multiple init messages.");return;}if(that.connectionStopped){return;}that.startRequested=true;window.clearTimeout(that.transportTimeoutHandle);connection.log(transport.name+" transport connected. Initiating start request.");signalR.transports._logic.ajaxStart(connection,function(){that.startCompleted=true;onSuccess();});},transportFailed:function(transport,error,onFallback){var connection=this.connection,deferred=connection._deferral,wrappedError;if(this.connectionStopped){return;}window.clearTimeout(this.transportTimeoutHandle);if(!this.startRequested){transport.stop(connection);connection.log(transport.name+" transport failed to connect. Attempting to fall back.");onFallback();}else{if(!this.startCompleted){wrappedError=signalR._.error(signalR.resources.errorDuringStartRequest,error);connection.log(transport.name+" transport failed during the start request. Stopping the connection.");$(connection).triggerHandler(events.onError,[wrappedError]);if(deferred){deferred.reject(wrappedError);}connection.stop();}else{}}}};transportLogic=signalR.transports._logic={ajax:function(connection,options){return $.ajax($.extend(true,{},$.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:connection.withCredentials},contentType:connection.contentType,dataType:connection.ajaxDataType},options));},pingServer:function(connection){var url,xhr,deferral=$.Deferred();if(connection.transport){url=connection.url+"/ping";url=transportLogic.addQs(url,connection.qs);xhr=transportLogic.ajax(connection,{url:url,success:function(result){var data;try{data=connection._parseResponse(result);}catch(error){deferral.reject(signalR._.transportError(signalR.resources.pingServerFailedParse,connection.transport,error,xhr));connection.stop();return;}if(data.Response==="pong"){deferral.resolve();}else{deferral.reject(signalR._.transportError(signalR._.format(signalR.resources.pingServerFailedInvalidResponse,result),connection.transport,null,xhr));}},error:function(error){if(error.status===401||error.status===403){deferral.reject(signalR._.transportError(signalR._.format(signalR.resources.pingServerFailedStatusCode,error.status),connection.transport,error,xhr));connection.stop();}else{deferral.reject(signalR._.transportError(signalR.resources.pingServerFailed,connection.transport,error,xhr));}}});}else{deferral.reject(signalR._.transportError(signalR.resources.noConnectionTransport,connection.transport));}return deferral.promise();},prepareQueryString:function(connection,url){var preparedUrl;preparedUrl=transportLogic.addQs(url,"clientProtocol="+connection.clientProtocol);preparedUrl=transportLogic.addQs(preparedUrl,connection.qs);if(connection.token){preparedUrl+="&connectionToken="+window.encodeURIComponent(connection.token);}if(connection.data){preparedUrl+="&connectionData="+window.encodeURIComponent(connection.data);}return preparedUrl;},addQs:function(url,qs){var appender=url.indexOf("?")!==-1?"&":"?",firstChar;if(!qs){return url;}if(typeof(qs)==="object"){return url+appender+$.param(qs);}if(typeof(qs)==="string"){firstChar=qs.charAt(0);if(firstChar==="?"||firstChar==="&"){appender="";}return url+appender+qs;}throw new Error("Query string property must be either a string or object.");},getUrl:function(connection,transport,reconnecting,poll,ajaxPost){var baseUrl=transport==="webSockets"?"":connection.baseUrl,url=baseUrl+connection.appRelativeUrl,qs="transport="+transport;if(!ajaxPost&&connection.groupsToken){qs+="&groupsToken="+window.encodeURIComponent(connection.groupsToken);}if(!reconnecting){url+="/connect";}else{if(poll){url+="/poll";}else{url+="/reconnect";}if(!ajaxPost&&connection.messageId){qs+="&messageId="+window.encodeURIComponent(connection.messageId);}}url+="?"+qs;url=transportLogic.prepareQueryString(connection,url);if(!ajaxPost){url+="&tid="+Math.floor(Math.random()*11);}return url;},maximizePersistentResponse:function(minPersistentResponse){return{MessageId:minPersistentResponse.C,Messages:minPersistentResponse.M,Initialized:typeof(minPersistentResponse.S)!=="undefined"?true:false,ShouldReconnect:typeof(minPersistentResponse.T)!=="undefined"?true:false,LongPollDelay:minPersistentResponse.L,GroupsToken:minPersistentResponse.G};},updateGroups:function(connection,groupsToken){if(groupsToken){connection.groupsToken=groupsToken;}},stringifySend:function(connection,message){if(typeof(message)==="string"||typeof(message)==="undefined"||message===null){return message;}return connection.json.stringify(message);},ajaxSend:function(connection,data){var payload=transportLogic.stringifySend(connection,data),url=getAjaxUrl(connection,"/send"),xhr,onFail=function(error,connection){$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.sendFailed,connection.transport,error,xhr),data]);};xhr=transportLogic.ajax(connection,{url:url,type:connection.ajaxDataType==="jsonp"?"GET":"POST",contentType:signalR._.defaultContentType,data:{data:payload},success:function(result){var res;if(result){try{res=connection._parseResponse(result);}catch(error){onFail(error,connection);connection.stop();return;}transportLogic.triggerReceived(connection,res);}},error:function(error,textStatus){if(textStatus==="abort"||textStatus==="parsererror"){return;}onFail(error,connection);}});return xhr;},ajaxAbort:function(connection,async){if(typeof(connection.transport)==="undefined"){return;}async=typeof async==="undefined"?true:async;var url=getAjaxUrl(connection,"/abort");transportLogic.ajax(connection,{url:url,async:async,timeout:1000,type:"POST"});connection.log("Fired ajax abort async = "+async+".");},ajaxStart:function(connection,onSuccess){var rejectDeferred=function(error){var deferred=connection._deferral;if(deferred){deferred.reject(error);}},triggerStartError=function(error){connection.log("The start request failed. Stopping the connection.");$(connection).triggerHandler(events.onError,[error]);rejectDeferred(error);connection.stop();};connection._.startRequest=transportLogic.ajax(connection,{url:getAjaxUrl(connection,"/start"),success:function(result,statusText,xhr){var data;try{data=connection._parseResponse(result);}catch(error){triggerStartError(signalR._.error(signalR._.format(signalR.resources.errorParsingStartResponse,result),error,xhr));return;}if(data.Response==="started"){onSuccess();}else{triggerStartError(signalR._.error(signalR._.format(signalR.resources.invalidStartResponse,result),null,xhr));}},error:function(xhr,statusText,error){if(statusText!==startAbortText){triggerStartError(signalR._.error(signalR.resources.errorDuringStartRequest,error,xhr));}else{connection.log("The start request aborted because connection.stop() was called.");rejectDeferred(signalR._.error(signalR.resources.stoppedDuringStartRequest,null,xhr));}}});},tryAbortStartRequest:function(connection){if(connection._.startRequest){connection._.startRequest.abort(startAbortText);delete connection._.startRequest;}},tryInitialize:function(persistentResponse,onInitialized){if(persistentResponse.Initialized){onInitialized();}},triggerReceived:function(connection,data){if(!connection._.connectingMessageBuffer.tryBuffer(data)){$(connection).triggerHandler(events.onReceived,[data]);}},processMessages:function(connection,minData,onInitialized){var data;transportLogic.markLastMessage(connection);if(minData){data=transportLogic.maximizePersistentResponse(minData);transportLogic.updateGroups(connection,data.GroupsToken);if(data.MessageId){connection.messageId=data.MessageId;}if(data.Messages){$.each(data.Messages,function(index,message){transportLogic.triggerReceived(connection,message);});transportLogic.tryInitialize(data,onInitialized);}}},monitorKeepAlive:function(connection){var keepAliveData=connection._.keepAliveData;if(!keepAliveData.monitoring){keepAliveData.monitoring=true;transportLogic.markLastMessage(connection);connection._.keepAliveData.reconnectKeepAliveUpdate=function(){transportLogic.markLastMessage(connection);};$(connection).bind(events.onReconnect,connection._.keepAliveData.reconnectKeepAliveUpdate);connection.log("Now monitoring keep alive with a warning timeout of "+keepAliveData.timeoutWarning+", keep alive timeout of "+keepAliveData.timeout+" and disconnecting timeout of "+connection.disconnectTimeout);}else{connection.log("Tried to monitor keep alive but it's already being monitored.");}},stopMonitoringKeepAlive:function(connection){var keepAliveData=connection._.keepAliveData;if(keepAliveData.monitoring){keepAliveData.monitoring=false;$(connection).unbind(events.onReconnect,connection._.keepAliveData.reconnectKeepAliveUpdate);connection._.keepAliveData={};connection.log("Stopping the monitoring of the keep alive.");}},startHeartbeat:function(connection){connection._.lastActiveAt=new Date().getTime();beat(connection);},markLastMessage:function(connection){connection._.lastMessageAt=new Date().getTime();},markActive:function(connection){if(transportLogic.verifyLastActive(connection)){connection._.lastActiveAt=new Date().getTime();return true;}return false;},isConnectedOrReconnecting:function(connection){return connection.state===signalR.connectionState.connected||connection.state===signalR.connectionState.reconnecting;},ensureReconnectingState:function(connection){if(changeState(connection,signalR.connectionState.connected,signalR.connectionState.reconnecting)===true){$(connection).triggerHandler(events.onReconnecting);}return connection.state===signalR.connectionState.reconnecting;},clearReconnectTimeout:function(connection){if(connection&&connection._.reconnectTimeout){window.clearTimeout(connection._.reconnectTimeout);delete connection._.reconnectTimeout;}},verifyLastActive:function(connection){if(new Date().getTime()-connection._.lastActiveAt>=connection.reconnectWindow){var message=signalR._.format(signalR.resources.reconnectWindowTimeout,new Date(connection._.lastActiveAt),connection.reconnectWindow);connection.log(message);$(connection).triggerHandler(events.onError,[signalR._.error(message,"TimeoutException")]);connection.stop(false,false);return false;}return true;},reconnect:function(connection,transportName){var transport=signalR.transports[transportName];if(transportLogic.isConnectedOrReconnecting(connection)&&!connection._.reconnectTimeout){if(!transportLogic.verifyLastActive(connection)){return;}connection._.reconnectTimeout=window.setTimeout(function(){if(!transportLogic.verifyLastActive(connection)){return;}transport.stop(connection);if(transportLogic.ensureReconnectingState(connection)){connection.log(transportName+" reconnecting.");transport.start(connection);}},connection.reconnectDelay);}},handleParseFailure:function(connection,result,error,onFailed,context){var wrappedError=signalR._.transportError(signalR._.format(signalR.resources.parseFailed,result),connection.transport,error,context);if(onFailed&&onFailed(wrappedError)){connection.log("Failed to parse server response while attempting to connect.");}else{$(connection).triggerHandler(events.onError,[wrappedError]);connection.stop();}},initHandler:function(connection){return new InitHandler(connection);},foreverFrame:{count:0,connections:{}}};}(window.jQuery,window));(function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic;signalR.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return true;},send:function(connection,data){var payload=transportLogic.stringifySend(connection,data);try{connection.socket.send(payload);}catch(ex){$(connection).triggerHandler(events.onError,[signalR._.transportError(signalR.resources.webSocketsInvalidState,connection.transport,ex,connection.socket),data]);}},start:function(connection,onSuccess,onFailed){var url,opened=false,that=this,reconnecting=!onSuccess,$connection=$(connection);if(!window.WebSocket){onFailed();return;}if(!connection.socket){if(connection.webSocketServerUrl){url=connection.webSocketServerUrl;}else{url=connection.wsProtocol+connection.host;}url+=transportLogic.getUrl(connection,this.name,reconnecting);connection.log("Connecting to websocket endpoint '"+url+"'.");connection.socket=new window.WebSocket(url);connection.socket.onopen=function(){opened=true;connection.log("Websocket opened.");transportLogic.clearReconnectTimeout(connection);if(changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected)===true){$connection.triggerHandler(events.onReconnect);}};connection.socket.onclose=function(event){var error;if(this===connection.socket){if(opened&&typeof event.wasClean!=="undefined"&&event.wasClean===false){error=signalR._.transportError(signalR.resources.webSocketClosed,connection.transport,event);connection.log("Unclean disconnect from websocket: "+(event.reason||"[no reason given]."));}else{connection.log("Websocket closed.");}if(!onFailed||!onFailed(error)){if(error){$(connection).triggerHandler(events.onError,[error]);}that.reconnect(connection);}}};connection.socket.onmessage=function(event){var data;try{data=connection._parseResponse(event.data);}catch(error){transportLogic.handleParseFailure(connection,event.data,error,onFailed,event);return;}if(data){if($.isEmptyObject(data)||data.M){transportLogic.processMessages(connection,data,onSuccess);}else{transportLogic.triggerReceived(connection,data);}}};}},reconnect:function(connection){transportLogic.reconnect(connection,this.name);},lostConnection:function(connection){this.reconnect(connection);},stop:function(connection){transportLogic.clearReconnectTimeout(connection);if(connection.socket){connection.log("Closing the Websocket.");connection.socket.close();connection.socket=null;}},abort:function(connection,async){transportLogic.ajaxAbort(connection,async);}};}(window.jQuery,window));(function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic,clearReconnectAttemptTimeout=function(connection){window.clearTimeout(connection._.reconnectAttemptTimeoutHandle);delete connection._.reconnectAttemptTimeoutHandle;};signalR.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return true;},timeOut:3000,start:function(connection,onSuccess,onFailed){var that=this,opened=false,$connection=$(connection),reconnecting=!onSuccess,url;if(connection.eventSource){connection.log("The connection already has an event source. Stopping it.");connection.stop();}if(!window.EventSource){if(onFailed){connection.log("This browser doesn't support SSE.");onFailed();}return;}url=transportLogic.getUrl(connection,this.name,reconnecting);try{connection.log("Attempting to connect to SSE endpoint '"+url+"'.");connection.eventSource=new window.EventSource(url,{withCredentials:connection.withCredentials});}catch(e){connection.log("EventSource failed trying to connect with error "+e.Message+".");if(onFailed){onFailed();}else{$connection.triggerHandler(events.onError,[signalR._.transportError(signalR.resources.eventSourceFailedToConnect,connection.transport,e)]);if(reconnecting){that.reconnect(connection);}}return;}if(reconnecting){connection._.reconnectAttemptTimeoutHandle=window.setTimeout(function(){if(opened===false){if(connection.eventSource.readyState!==window.EventSource.OPEN){that.reconnect(connection);}}},that.timeOut);}connection.eventSource.addEventListener("open",function(e){connection.log("EventSource connected.");clearReconnectAttemptTimeout(connection);transportLogic.clearReconnectTimeout(connection);if(opened===false){opened=true;if(changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected)===true){$connection.triggerHandler(events.onReconnect);}}},false);connection.eventSource.addEventListener("message",function(e){var res;if(e.data==="initialized"){return;}try{res=connection._parseResponse(e.data);}catch(error){transportLogic.handleParseFailure(connection,e.data,error,onFailed,e);return;}transportLogic.processMessages(connection,res,onSuccess);},false);connection.eventSource.addEventListener("error",function(e){var error=signalR._.transportError(signalR.resources.eventSourceError,connection.transport,e);if(this!==connection.eventSource){return;}if(onFailed&&onFailed(error)){return;}connection.log("EventSource readyState: "+connection.eventSource.readyState+".");if(e.eventPhase===window.EventSource.CLOSED){connection.log("EventSource reconnecting due to the server connection ending.");that.reconnect(connection);}else{connection.log("EventSource error.");$connection.triggerHandler(events.onError,[error]);}},false);},reconnect:function(connection){transportLogic.reconnect(connection,this.name);},lostConnection:function(connection){this.reconnect(connection);},send:function(connection,data){transportLogic.ajaxSend(connection,data);},stop:function(connection){clearReconnectAttemptTimeout(connection);transportLogic.clearReconnectTimeout(connection);if(connection&&connection.eventSource){connection.log("EventSource calling close().");connection.eventSource.close();connection.eventSource=null;delete connection.eventSource;}},abort:function(connection,async){transportLogic.ajaxAbort(connection,async);}};}(window.jQuery,window));(function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,transportLogic=signalR.transports._logic,createFrame=function(){var frame=window.document.createElement("iframe");frame.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;");return frame;},loadPreventer=(function(){var loadingFixIntervalId=null,loadingFixInterval=1000,attachedTo=0;return{prevent:function(){if(signalR._.ieVersion<=8){if(attachedTo===0){loadingFixIntervalId=window.setInterval(function(){var tempFrame=createFrame();window.document.body.appendChild(tempFrame);window.document.body.removeChild(tempFrame);tempFrame=null;},loadingFixInterval);}attachedTo++;}},cancel:function(){if(attachedTo===1){window.clearInterval(loadingFixIntervalId);}if(attachedTo>0){attachedTo--;}}};})();signalR.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return true;},iframeClearThreshold:50,start:function(connection,onSuccess,onFailed){var that=this,frameId=(transportLogic.foreverFrame.count+=1),url,frame=createFrame(),frameLoadHandler=function(){connection.log("Forever frame iframe finished loading and is no longer receiving messages.");if(!onFailed||!onFailed()){that.reconnect(connection);}};if(window.EventSource){if(onFailed){connection.log("Forever Frame is not supported by SignalR on browsers with SSE support.");onFailed();}return;}frame.setAttribute("data-signalr-connection-id",connection.id);loadPreventer.prevent();url=transportLogic.getUrl(connection,this.name);url+="&frameId="+frameId;window.document.documentElement.appendChild(frame);connection.log("Binding to iframe's load event.");if(frame.addEventListener){frame.addEventListener("load",frameLoadHandler,false);}else{if(frame.attachEvent){frame.attachEvent("onload",frameLoadHandler);}}frame.src=url;transportLogic.foreverFrame.connections[frameId]=connection;connection.frame=frame;connection.frameId=frameId;if(onSuccess){connection.onSuccess=function(){connection.log("Iframe transport started.");onSuccess();};}},reconnect:function(connection){var that=this;if(transportLogic.isConnectedOrReconnecting(connection)&&transportLogic.verifyLastActive(connection)){window.setTimeout(function(){if(!transportLogic.verifyLastActive(connection)){return;}if(connection.frame&&transportLogic.ensureReconnectingState(connection)){var frame=connection.frame,src=transportLogic.getUrl(connection,that.name,true)+"&frameId="+connection.frameId;connection.log("Updating iframe src to '"+src+"'.");frame.src=src;}},connection.reconnectDelay);}},lostConnection:function(connection){this.reconnect(connection);},send:function(connection,data){transportLogic.ajaxSend(connection,data);},receive:function(connection,data){var cw,body,response;if(connection.json!==connection._originalJson){data=connection._originalJson.stringify(data);}response=connection._parseResponse(data);transportLogic.processMessages(connection,response,connection.onSuccess);if(connection.state===$.signalR.connectionState.connected){connection.frameMessageCount=(connection.frameMessageCount||0)+1;if(connection.frameMessageCount>signalR.transports.foreverFrame.iframeClearThreshold){connection.frameMessageCount=0;cw=connection.frame.contentWindow||connection.frame.contentDocument;if(cw&&cw.document&&cw.document.body){body=cw.document.body;while(body.firstChild){body.removeChild(body.firstChild);}}}}},stop:function(connection){var cw=null;loadPreventer.cancel();if(connection.frame){if(connection.frame.stop){connection.frame.stop();}else{try{cw=connection.frame.contentWindow||connection.frame.contentDocument;if(cw.document&&cw.document.execCommand){cw.document.execCommand("Stop");}}catch(e){connection.log("Error occured when stopping foreverFrame transport. Message = "+e.message+".");}}if(connection.frame.parentNode===window.document.body){window.document.body.removeChild(connection.frame);}delete transportLogic.foreverFrame.connections[connection.frameId];connection.frame=null;connection.frameId=null;delete connection.frame;delete connection.frameId;delete connection.onSuccess;delete connection.frameMessageCount;connection.log("Stopping forever frame.");}},abort:function(connection,async){transportLogic.ajaxAbort(connection,async);},getConnection:function(id){return transportLogic.foreverFrame.connections[id];},started:function(connection){if(changeState(connection,signalR.connectionState.reconnecting,signalR.connectionState.connected)===true){$(connection).triggerHandler(events.onReconnect);}}};}(window.jQuery,window));(function($,window,undefined){var signalR=$.signalR,events=$.signalR.events,changeState=$.signalR.changeState,isDisconnecting=$.signalR.isDisconnecting,transportLogic=signalR.transports._logic;signalR.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return false;},reconnectDelay:3000,start:function(connection,onSuccess,onFailed){var that=this,fireConnect=function(){fireConnect=$.noop;connection.log("LongPolling connected.");onSuccess();},tryFailConnect=function(error){if(onFailed(error)){connection.log("LongPolling failed to connect.");return true;}return false;},privateData=connection._,reconnectErrors=0,fireReconnected=function(instance){window.clearTimeout(privateData.reconnectTimeoutId);privateData.reconnectTimeoutId=null;if(changeState(instance,signalR.connectionState.reconnecting,signalR.connectionState.connected)===true){instance.log("Raising the reconnect event");$(instance).triggerHandler(events.onReconnect);}},maxFireReconnectedTimeout=3600000;if(connection.pollXhr){connection.log("Polling xhr requests already exists, aborting.");connection.stop();}connection.messageId=null;privateData.reconnectTimeoutId=null;privateData.pollTimeoutId=window.setTimeout(function(){(function poll(instance,raiseReconnect){var messageId=instance.messageId,connect=(messageId===null),reconnecting=!connect,polling=!raiseReconnect,url=transportLogic.getUrl(instance,that.name,reconnecting,polling,true),postData={};if(instance.messageId){postData.messageId=instance.messageId;}if(instance.groupsToken){postData.groupsToken=instance.groupsToken;}if(isDisconnecting(instance)===true){return;}connection.log("Opening long polling request to '"+url+"'.");instance.pollXhr=transportLogic.ajax(connection,{xhrFields:{onprogress:function(){transportLogic.markLastMessage(connection);}},url:url,type:"POST",contentType:signalR._.defaultContentType,data:postData,timeout:connection._.pollTimeout,success:function(result){var minData,delay=0,data,shouldReconnect;connection.log("Long poll complete.");reconnectErrors=0;try{minData=connection._parseResponse(result);}catch(error){transportLogic.handleParseFailure(instance,result,error,tryFailConnect,instance.pollXhr);return;}if(privateData.reconnectTimeoutId!==null){fireReconnected(instance);}if(minData){data=transportLogic.maximizePersistentResponse(minData);}transportLogic.processMessages(instance,minData,fireConnect);if(data&&$.type(data.LongPollDelay)==="number"){delay=data.LongPollDelay;}if(isDisconnecting(instance)===true){return;}shouldReconnect=data&&data.ShouldReconnect;if(shouldReconnect){if(!transportLogic.ensureReconnectingState(instance)){return;}}if(delay>0){privateData.pollTimeoutId=window.setTimeout(function(){poll(instance,shouldReconnect);},delay);}else{poll(instance,shouldReconnect);}},error:function(data,textStatus){var error=signalR._.transportError(signalR.resources.longPollFailed,connection.transport,data,instance.pollXhr);window.clearTimeout(privateData.reconnectTimeoutId);privateData.reconnectTimeoutId=null;if(textStatus==="abort"){connection.log("Aborted xhr request.");return;}if(!tryFailConnect(error)){reconnectErrors++;if(connection.state!==signalR.connectionState.reconnecting){connection.log("An error occurred using longPolling. Status = "+textStatus+".  Response = "+data.responseText+".");$(instance).triggerHandler(events.onError,[error]);}if((connection.state===signalR.connectionState.connected||connection.state===signalR.connectionState.reconnecting)&&!transportLogic.verifyLastActive(connection)){return;}if(!transportLogic.ensureReconnectingState(instance)){return;}privateData.pollTimeoutId=window.setTimeout(function(){poll(instance,true);},that.reconnectDelay);}}});if(reconnecting&&raiseReconnect===true){privateData.reconnectTimeoutId=window.setTimeout(function(){fireReconnected(instance);},Math.min(1000*(Math.pow(2,reconnectErrors)-1),maxFireReconnectedTimeout));}}(connection));},250);},lostConnection:function(connection){if(connection.pollXhr){connection.pollXhr.abort("lostConnection");}},send:function(connection,data){transportLogic.ajaxSend(connection,data);},stop:function(connection){window.clearTimeout(connection._.pollTimeoutId);window.clearTimeout(connection._.reconnectTimeoutId);delete connection._.pollTimeoutId;delete connection._.reconnectTimeoutId;if(connection.pollXhr){connection.pollXhr.abort();connection.pollXhr=null;delete connection.pollXhr;}},abort:function(connection,async){transportLogic.ajaxAbort(connection,async);}};}(window.jQuery,window));(function($,window,undefined){var eventNamespace=".hubProxy",signalR=$.signalR;function makeEventName(event){return event+eventNamespace;}function map(arr,fun,thisp){var i,length=arr.length,result=[];for(i=0;i<length;i+=1){if(arr.hasOwnProperty(i)){result[i]=fun.call(thisp,arr[i],i,arr);}}return result;}function getArgValue(a){return $.isFunction(a)?null:($.type(a)==="undefined"?null:a);}function hasMembers(obj){for(var key in obj){if(obj.hasOwnProperty(key)){return true;}}return false;}function clearInvocationCallbacks(connection,error){var callbacks=connection._.invocationCallbacks,callback;if(hasMembers(callbacks)){connection.log("Clearing hub invocation callbacks with error: "+error+".");}connection._.invocationCallbackId=0;delete connection._.invocationCallbacks;connection._.invocationCallbacks={};for(var callbackId in callbacks){callback=callbacks[callbackId];callback.method.call(callback.scope,{E:error});}}function hubProxy(hubConnection,hubName){return new hubProxy.fn.init(hubConnection,hubName);}hubProxy.fn=hubProxy.prototype={init:function(connection,hubName){this.state={};this.connection=connection;this.hubName=hubName;this._={callbackMap:{}};},constructor:hubProxy,hasSubscriptions:function(){return hasMembers(this._.callbackMap);},on:function(eventName,callback){var that=this,callbackMap=that._.callbackMap;eventName=eventName.toLowerCase();if(!callbackMap[eventName]){callbackMap[eventName]={};}callbackMap[eventName][callback]=function(e,data){callback.apply(that,data);};$(that).bind(makeEventName(eventName),callbackMap[eventName][callback]);return that;},off:function(eventName,callback){var that=this,callbackMap=that._.callbackMap,callbackSpace;eventName=eventName.toLowerCase();callbackSpace=callbackMap[eventName];if(callbackSpace){if(callbackSpace[callback]){$(that).unbind(makeEventName(eventName),callbackSpace[callback]);delete callbackSpace[callback];if(!hasMembers(callbackSpace)){delete callbackMap[eventName];}}else{if(!callback){$(that).unbind(makeEventName(eventName));delete callbackMap[eventName];}}}return that;},invoke:function(methodName){var that=this,connection=that.connection,args=$.makeArray(arguments).slice(1),argValues=map(args,getArgValue),data={H:that.hubName,M:methodName,A:argValues,I:connection._.invocationCallbackId},d=$.Deferred(),callback=function(minResult){var result=that._maximizeHubResponse(minResult),source,error;$.extend(that.state,result.State);if(result.Progress){if(d.notifyWith){d.notifyWith(that,[result.Progress.Data]);}else{if(!connection._.progressjQueryVersionLogged){connection.log("A hub method invocation progress update was received but the version of jQuery in use ("+$.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications.");connection._.progressjQueryVersionLogged=true;}}}else{if(result.Error){if(result.StackTrace){connection.log(result.Error+"\n"+result.StackTrace+".");}source=result.IsHubException?"HubException":"Exception";error=signalR._.error(result.Error,source);error.data=result.ErrorData;connection.log(that.hubName+"."+methodName+" failed to execute. Error: "+error.message);d.rejectWith(that,[error]);}else{connection.log("Invoked "+that.hubName+"."+methodName);d.resolveWith(that,[result.Result]);}}};connection._.invocationCallbacks[connection._.invocationCallbackId.toString()]={scope:that,method:callback};connection._.invocationCallbackId+=1;if(!$.isEmptyObject(that.state)){data.S=that.state;}connection.log("Invoking "+that.hubName+"."+methodName);connection.send(data);return d.promise();},_maximizeHubResponse:function(minHubResponse){return{State:minHubResponse.S,Result:minHubResponse.R,Progress:minHubResponse.P?{Id:minHubResponse.P.I,Data:minHubResponse.P.D}:null,Id:minHubResponse.I,IsHubException:minHubResponse.H,Error:minHubResponse.E,StackTrace:minHubResponse.T,ErrorData:minHubResponse.D};}};hubProxy.fn.init.prototype=hubProxy.fn;function hubConnection(url,options){var settings={qs:null,logging:false,useDefaultPath:true};$.extend(settings,options);if(!url||settings.useDefaultPath){url=(url||"")+"/signalr";}return new hubConnection.fn.init(url,settings);}hubConnection.fn=hubConnection.prototype=$.connection();hubConnection.fn.init=function(url,options){var settings={qs:null,logging:false,useDefaultPath:true},connection=this;$.extend(settings,options);$.signalR.fn.init.call(connection,url,settings.qs,settings.logging);connection.proxies={};connection._.invocationCallbackId=0;connection._.invocationCallbacks={};connection.received(function(minData){var data,proxy,dataCallbackId,callback,hubName,eventName;if(!minData){return;}if(typeof(minData.P)!=="undefined"){dataCallbackId=minData.P.I.toString();callback=connection._.invocationCallbacks[dataCallbackId];if(callback){callback.method.call(callback.scope,minData);}}else{if(typeof(minData.I)!=="undefined"){dataCallbackId=minData.I.toString();callback=connection._.invocationCallbacks[dataCallbackId];if(callback){connection._.invocationCallbacks[dataCallbackId]=null;delete connection._.invocationCallbacks[dataCallbackId];callback.method.call(callback.scope,minData);}}else{data=this._maximizeClientHubInvocation(minData);connection.log("Triggering client hub event '"+data.Method+"' on hub '"+data.Hub+"'.");hubName=data.Hub.toLowerCase();eventName=data.Method.toLowerCase();proxy=this.proxies[hubName];$.extend(proxy.state,data.State);$(proxy).triggerHandler(makeEventName(eventName),[data.Args]);}}});connection.error(function(errData,origData){var callbackId,callback;if(!origData){return;}callbackId=origData.I;callback=connection._.invocationCallbacks[callbackId];if(callback){connection._.invocationCallbacks[callbackId]=null;delete connection._.invocationCallbacks[callbackId];callback.method.call(callback.scope,{E:errData});}});connection.reconnecting(function(){if(connection.transport&&connection.transport.name==="webSockets"){clearInvocationCallbacks(connection,"Connection started reconnecting before invocation result was received.");}});connection.disconnected(function(){clearInvocationCallbacks(connection,"Connection was disconnected before invocation result was received.");});};hubConnection.fn._maximizeClientHubInvocation=function(minClientHubInvocation){return{Hub:minClientHubInvocation.H,Method:minClientHubInvocation.M,Args:minClientHubInvocation.A,State:minClientHubInvocation.S};};hubConnection.fn._registerSubscribedHubs=function(){var connection=this;if(!connection._subscribedToHubs){connection._subscribedToHubs=true;connection.starting(function(){var subscribedHubs=[];$.each(connection.proxies,function(key){if(this.hasSubscriptions()){subscribedHubs.push({name:key});connection.log("Client subscribed to hub '"+key+"'.");}});if(subscribedHubs.length===0){connection.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");}connection.data=connection.json.stringify(subscribedHubs);});}};hubConnection.fn.createHubProxy=function(hubName){hubName=hubName.toLowerCase();var proxy=this.proxies[hubName];if(!proxy){proxy=hubProxy(this,hubName);this.proxies[hubName]=proxy;}this._registerSubscribedHubs();return proxy;};hubConnection.fn.init.prototype=hubConnection.fn;$.hubConnection=hubConnection;}(window.jQuery,window));(function($,undefined){$.signalR.version="2.2.0";}(window.jQuery));/*
 * ASP.NET SignalR JavaScript Library v2.2.0
 * http://signalr.net/
 *
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *
 */
(function(n,t,i){function w(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--){f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));}t.length===0&&(i.log("No transports remain within the specified transport array."),t=null);}else{if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8){return["longPolling"];}}else{i.log("Invalid transport: "+t.toString()+"."),t=null;}}return t;}function b(n){return n==="http:"?80:n==="https:"?443:void 0;}function a(n,t){return t.match(/:\d+$/)?t:t+":"+b(n);}function k(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1;};u.drain=function(){if(t.state===n.signalR.connectionState.connected){while(r.length>0){i(r.shift());}}};u.clear=function(){r=[];};}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof n!="function"){throw new Error(f.nojQuery);}var r,h,s=t.document.readyState==="complete",e=n(t),c="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},v=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r));}},o=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1;},y=function(n){return n.state===r.connectionState.disconnected;},l=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n);},p=function(i){var f,e;i._.configuredStopReconnectingTimeout||(e=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i);n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]);t.stop(!1,!1);},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(f=t.setTimeout(function(){e(n);},n.disconnectTimeout));}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(f);}),i._.configuredStopReconnectingTimeout=!0);};r=function(n,t,i){return new r.fn.init(n,t,i);};r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i;}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r;},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f;},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++){t=t.replace("{"+n+"}",arguments[n+1]);}return t;},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return !t||!t.length||t.length<2?0:parseInt(t[1],10);},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t]);};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e);},f.pingInterval));}};r.events=u;r.resources=f;r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1};r.changeState=o;r.isDisconnecting=y;r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.");}};e.load(function(){s=!0;});r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t;this.qs=i;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new k(this,function(n){f.triggerHandler(u.onReceived,[n]);}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5000,beatHandle:null,totalTransportConnectTimeout:0};typeof r=="boolean"&&(this.logging=r);},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n;},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+a(u.protocol,u.host)!==r.protocol+a(r.protocol,r.host));},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2000,transportConnectTimeout:0,disconnectTimeout:30000,reconnectWindow:30000,keepAliveWarnAt:2/3,start:function(i,h){var a=this,v={pingInterval:300000,waitForPageLoad:!0,transport:"auto",jsonp:!1},d,y=a._deferral||n.Deferred(),b=t.document.createElement("a"),k,g;if(a.lastError=null,a._deferral=y,!a.json){throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");}if(n.type(i)==="function"?h=i:n.type(i)==="object"&&(n.extend(v,i),n.type(v.callback)==="function"&&(h=v.callback)),v.transport=w(v.transport,a),!v.transport){throw new Error("SignalR: Invalid transport(s) specified, aborting start.");}return(a._.config=v,!s&&v.waitForPageLoad===!0)?(a._.deferredStartHandler=function(){a.start(i,h);},e.bind("load",a._.deferredStartHandler),y.promise()):a.state===r.connectionState.connecting?y.promise():o(a,r.connectionState.disconnected,r.connectionState.connecting)===!1?(y.resolve(a),y.promise()):(p(a),b.href=a.url,b.protocol&&b.protocol!==":"?(a.protocol=b.protocol,a.host=b.host):(a.protocol=t.document.location.protocol,a.host=b.host||t.document.location.host),a.baseUrl=a.protocol+"//"+a.host,a.wsProtocol=a.protocol==="https:"?"wss://":"ws://",v.transport==="auto"&&v.jsonp===!0&&(v.transport="longPolling"),a.url.indexOf("//")===0&&(a.url=t.location.protocol+a.url,a.log("Protocol relative URL detected, normalizing it to '"+a.url+"'.")),this.isCrossDomain(a.url)&&(a.log("Auto detected cross domain url."),v.transport==="auto"&&(v.transport=["webSockets","serverSentEvents","longPolling"]),typeof v.withCredentials=="undefined"&&(v.withCredentials=!0),v.jsonp||(v.jsonp=!n.support.cors,v.jsonp&&a.log("Using jsonp because this browser doesn't support CORS.")),a.contentType=r._.defaultContentType),a.withCredentials=v.withCredentials,a.ajaxDataType=v.jsonp?"jsonp":"text",n(a).bind(u.onStart,function(){n.type(h)==="function"&&h.call(a);y.resolve(a);}),a._.initHandler=r.transports._logic.initHandler(a),d=function(i,s){var c=r._.error(f.noTransportOnInit);if(s=s||0,s>=i.length){s===0?a.log("No transports supported by the server were selected."):s===1?a.log("No fallback transports were selected."):a.log("Fallback transports exhausted.");n(a).triggerHandler(u.onError,[c]);y.reject(c);a.stop();return;}if(a.state!==r.connectionState.disconnected){var p=i[s],h=r.transports[p],v=function(){d(i,s+1);};a.transport=h;try{a._.initHandler.start(h,function(){var i=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,f=!!a.withCredentials&&i;a.log("The start request succeeded. Transitioning to the connected state.");l(a)&&r.transports._logic.monitorKeepAlive(a);r.transports._logic.startHeartbeat(a);r._.configurePingInterval(a);o(a,r.connectionState.connecting,r.connectionState.connected)||a.log("WARNING! The connection was not in the connecting state.");a._.connectingMessageBuffer.drain();n(a).triggerHandler(u.onStart);e.bind("unload",function(){a.log("Window unloading, stopping the connection.");a.stop(f);});i&&e.bind("beforeunload",function(){t.setTimeout(function(){a.stop(f);},0);});},v);}catch(w){a.log(h.name+" transport threw '"+w.message+"' when attempting to start.");v();}}},k=a.url+"/negotiate",g=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e);y.reject(e);i.stop();},n(a).triggerHandler(u.onStarting),k=r.transports._logic.prepareQueryString(a,k),a.log("Negotiating with '"+k+"'."),a._.negotiateRequest=r.transports._logic.ajax(a,{url:k,error:function(n,t){t!==c?g(n,a):y.reject(r._.error(f.stoppedWhileNegotiating,null,a._.negotiateRequest));},success:function(t){var i,e,h,o=[],s=[];try{i=a._parseResponse(t);}catch(c){g(r._.error(f.errorParsingNegotiateResponse,c),a);return;}if(e=a._.keepAliveData,a.appRelativeUrl=i.Url,a.id=i.ConnectionId,a.token=i.ConnectionToken,a.webSocketServerUrl=i.WebSocketServerUrl,a._.pollTimeout=i.ConnectionTimeout*1000+10000,a.disconnectTimeout=i.DisconnectTimeout*1000,a._.totalTransportConnectTimeout=a.transportConnectTimeout+i.TransportConnectTimeout*1000,i.KeepAliveTimeout?(e.activated=!0,e.timeout=i.KeepAliveTimeout*1000,e.timeoutWarning=e.timeout*a.keepAliveWarnAt,a._.beatInterval=(e.timeout-e.timeoutWarning)/3):e.activated=!1,a.reconnectWindow=a.disconnectTimeout+(e.timeout||0),!i.ProtocolVersion||i.ProtocolVersion!==a.clientProtocol){h=r._.error(r._.format(f.protocolIncompatible,a.clientProtocol,i.ProtocolVersion));n(a).triggerHandler(u.onError,[h]);y.reject(h);return;}n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!i.TryWebSockets){return !0;}s.push(n);});n.isArray(v.transport)?n.each(v.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i);}):v.transport==="auto"?o=s:n.inArray(v.transport,s)>=0&&o.push(v.transport);d(o);}}),y.promise());},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i);}),i;},send:function(n){var t=this;if(t.state===r.connectionState.disconnected){throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");}if(t.state===r.connectionState.connecting){throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");}return t.transport.send(t,n),t;},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r);}),i;},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r);}),i;},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r;t.call(i,r,u);}),i;},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i);}),i;},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i);}),i;},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i);}),i;},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i);}),i;},stop:function(i,h){var a=this,v=a._deferral;if(a._.deferredStartHandler&&e.unbind("load",a._.deferredStartHandler),delete a._.config,delete a._.deferredStartHandler,!s&&(!a._.config||a._.config.waitForPageLoad===!0)){a.log("Stopping connection prior to negotiate.");v&&v.reject(r._.error(f.stoppedWhileLoading));return;}if(a.state!==r.connectionState.disconnected){return a.log("Stopping connection."),o(a,a.state,r.connectionState.disconnected),t.clearTimeout(a._.beatHandle),t.clearInterval(a._.pingIntervalId),a.transport&&(a.transport.stop(a),h!==!1&&a.transport.abort(a,i),l(a)&&r.transports._logic.stopMonitoringKeepAlive(a),a.transport=null),a._.negotiateRequest&&(a._.negotiateRequest.abort(c),delete a._.negotiateRequest),a._.initHandler&&a._.initHandler.stop(),n(a).triggerHandler(u.onDisconnect),delete a._deferral,delete a.messageId,delete a.groupsToken,delete a.id,delete a._.pingIntervalId,delete a._.lastMessageAt,delete a._.lastActiveAt,a._.connectingMessageBuffer.clear(),a;}},log:function(n){v(n,this.logging);}};r.fn.init.prototype=r.fn;r.noConflict=function(){return n.connection===r&&(n.connection=h),r;};n.connection&&(h=n.connection);n.connection=n.signalR=r;})(window.jQuery,window),function(n,t,i){function s(n){n._.keepAliveData.monitoring&&l(n);u.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){s(n);},n._.beatInterval));}function l(t){var i=t._.keepAliveData,u;t.state===r.connectionState.connected&&(u=(new Date).getTime()-t._.lastMessageAt,u>=i.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):u>=i.timeoutWarning?i.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(f.onConnectionSlow),i.userNotified=!0):i.userNotified=!1);}function e(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),u.prepareQueryString(n,i);}function h(n){this.connection=n;this.startRequested=!1;this.startCompleted=!1;this.connectionStopped=!1;}var r=n.signalR,f=n.signalR.events,c=n.signalR.changeState,o="__Start Aborted__",u;r.transports={};h.prototype={start:function(n,r,u){var f=this,e=f.connection,o=!1;if(f.startRequested||f.connectionStopped){e.log("WARNING! "+n.name+" transport cannot be started. Initialization ongoing or completed.");return;}e.log(n.name+" transport starting.");f.transportTimeoutHandle=t.setTimeout(function(){o||(o=!0,e.log(n.name+" transport timed out when trying to connect."),f.transportFailed(n,i,u));},e._.totalTransportConnectTimeout);n.start(e,function(){o||f.initReceived(n,r);},function(t){return o||(o=!0,f.transportFailed(n,t,u)),!f.startCompleted||f.connectionStopped;});},stop:function(){this.connectionStopped=!0;t.clearTimeout(this.transportTimeoutHandle);r.transports._logic.tryAbortStartRequest(this.connection);},initReceived:function(n,i){var u=this,f=u.connection;if(u.startRequested){f.log("WARNING! The client received multiple init messages.");return;}u.connectionStopped||(u.startRequested=!0,t.clearTimeout(u.transportTimeoutHandle),f.log(n.name+" transport connected. Initiating start request."),r.transports._logic.ajaxStart(f,function(){u.startCompleted=!0;i();}));},transportFailed:function(i,u,e){var o=this.connection,h=o._deferral,s;this.connectionStopped||(t.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(s=r._.error(r.resources.errorDuringStartRequest,u),o.log(i.name+" transport failed during the start request. Stopping the connection."),n(o).triggerHandler(f.onError,[s]),h&&h.reject(s),o.stop()):(i.stop(o),o.log(i.name+" transport failed to connect. Attempting to fall back."),e()));}};u=r.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i));},pingServer:function(t){var e,f,i=n.Deferred();return t.transport?(e=t.url+"/ping",e=u.addQs(e,t.qs),f=u.ajax(t,{url:e,success:function(n){var u;try{u=t._parseResponse(n);}catch(e){i.reject(r._.transportError(r.resources.pingServerFailedParse,t.transport,e,f));t.stop();return;}u.Response==="pong"?i.resolve():i.reject(r._.transportError(r._.format(r.resources.pingServerFailedInvalidResponse,n),t.transport,null,f));},error:function(n){n.status===401||n.status===403?(i.reject(r._.transportError(r._.format(r.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):i.reject(r._.transportError(r.resources.pingServerFailed,t.transport,n,f));}})):i.reject(r._.transportError(r.resources.noConnectionTransport,t.transport)),i.promise();},prepareQueryString:function(n,i){var r;return r=u.addQs(i,"clientProtocol="+n.clientProtocol),r=u.addQs(r,n.qs),n.token&&(r+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(r+="&connectionData="+t.encodeURIComponent(n.data)),r;},addQs:function(t,i){var r=t.indexOf("?")!==-1?"&":"?",u;if(!i){return t;}if(typeof i=="object"){return t+r+n.param(i);}if(typeof i=="string"){return u=i.charAt(0),(u==="?"||u==="&")&&(r=""),t+r+i;}throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,r,f,e){var h=i==="webSockets"?"":n.baseUrl,o=h+n.appRelativeUrl,s="transport="+i;return !e&&n.groupsToken&&(s+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),r?(o+=f?"/poll":"/reconnect",!e&&n.messageId&&(s+="&messageId="+t.encodeURIComponent(n.messageId))):o+="/connect",o+="?"+s,o=u.prepareQueryString(n,o),e||(o+="&tid="+Math.floor(Math.random()*11)),o;},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G};},updateGroups:function(n,t){t&&(n.groupsToken=t);},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t);},ajaxSend:function(t,i){var h=u.stringifySend(t,i),c=e(t,"/send"),o,s=function(t,u){n(u).triggerHandler(f.onError,[r._.transportError(r.resources.sendFailed,u.transport,t,o),i]);};return o=u.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:r._.defaultContentType,data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n);}catch(r){s(r,t);t.stop();return;}u.triggerReceived(t,i);}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t);}});},ajaxAbort:function(n,t){if(typeof n.transport!="undefined"){t=typeof t=="undefined"?!0:t;var i=e(n,"/abort");u.ajax(n,{url:i,async:t,timeout:1000,type:"POST"});n.log("Fired ajax abort async = "+t+".");}},ajaxStart:function(t,i){var h=function(n){var i=t._deferral;i&&i.reject(n);},s=function(i){t.log("The start request failed. Stopping the connection.");n(t).triggerHandler(f.onError,[i]);h(i);t.stop();};t._.startRequest=u.ajax(t,{url:e(t,"/start"),success:function(n,u,f){var e;try{e=t._parseResponse(n);}catch(o){s(r._.error(r._.format(r.resources.errorParsingStartResponse,n),o,f));return;}e.Response==="started"?i():s(r._.error(r._.format(r.resources.invalidStartResponse,n),null,f));},error:function(n,i,u){i!==o?s(r._.error(r.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),h(r._.error(r.resources.stoppedDuringStartRequest,null,n)));}});},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(o),delete n._.startRequest);},tryInitialize:function(n,t){n.Initialized&&t();},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(f.onReceived,[i]);},processMessages:function(t,i,r){var f;u.markLastMessage(t);i&&(f=u.maximizePersistentResponse(i),u.updateGroups(t,f.GroupsToken),f.MessageId&&(t.messageId=f.MessageId),f.Messages&&(n.each(f.Messages,function(n,i){u.triggerReceived(t,i);}),u.tryInitialize(f,r)));},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,u.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(t);},n(t).bind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+", keep alive timeout of "+i.timeout+" and disconnecting timeout of "+t.disconnectTimeout));},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."));},startHeartbeat:function(n){n._.lastActiveAt=(new Date).getTime();s(n);},markLastMessage:function(n){n._.lastMessageAt=(new Date).getTime();},markActive:function(n){return u.verifyLastActive(n)?(n._.lastActiveAt=(new Date).getTime(),!0):!1;},isConnectedOrReconnecting:function(n){return n.state===r.connectionState.connected||n.state===r.connectionState.reconnecting;},ensureReconnectingState:function(t){return c(t,r.connectionState.connected,r.connectionState.reconnecting)===!0&&n(t).triggerHandler(f.onReconnecting),t.state===r.connectionState.reconnecting;},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout);},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var i=r._.format(r.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(i),n(t).triggerHandler(f.onError,[r._.error(i,"TimeoutException")]),t.stop(!1,!1),!1;}return !0;},reconnect:function(n,i){var f=r.transports[i];if(u.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!u.verifyLastActive(n)){return;}n._.reconnectTimeout=t.setTimeout(function(){u.verifyLastActive(n)&&(f.stop(n),u.ensureReconnectingState(n)&&(n.log(i+" reconnecting."),f.start(n)));},n.reconnectDelay);}},handleParseFailure:function(t,i,u,e,o){var s=r._.transportError(r._.format(r.resources.parseFailed,i),t.transport,u,o);e&&e(s)?t.log("Failed to parse server response while attempting to connect."):(n(t).triggerHandler(f.onError,[s]),t.stop());},initHandler:function(n){return new h(n);},foreverFrame:{count:0,connections:{}}};}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return !0;},send:function(t,f){var e=i.stringifySend(t,f);try{t.socket.send(e);}catch(o){n(t).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,o,t.socket),f]);}},start:function(e,o,s){var h,c=!1,l=this,a=!o,v=n(e);if(!t.WebSocket){s();return;}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,a),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){c=!0;e.log("Websocket opened.");i.clearReconnectTimeout(e);f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect);},e.socket.onclose=function(t){var i;this===e.socket&&(c&&typeof t.wasClean!="undefined"&&t.wasClean===!1?(i=r._.transportError(r.resources.webSocketClosed,e.transport,t),e.log("Unclean disconnect from websocket: "+(t.reason||"[no reason given]."))):e.log("Websocket closed."),s&&s(i)||(i&&n(e).triggerHandler(u.onError,[i]),l.reconnect(e)));},e.socket.onmessage=function(t){var r;try{r=e._parseResponse(t.data);}catch(u){i.handleParseFailure(e,t.data,u,s,t);return;}r&&(n.isEmptyObject(r)||r.M?i.processMessages(e,r,o):i.triggerReceived(e,r));});},reconnect:function(n){i.reconnect(n,this.name);},lostConnection:function(n){this.reconnect(n);},stop:function(n){i.clearReconnectTimeout(n);n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null);},abort:function(n,t){i.ajaxAbort(n,t);}};}(window.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,e=n.signalR.changeState,r=i.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle);delete n._.reconnectAttemptTimeoutHandle;};i.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return !0;},timeOut:3000,start:function(o,s,h){var c=this,l=!1,a=n(o),v=!s,y;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return;}y=r.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+y+"'.");o.eventSource=new t.EventSource(y,{withCredentials:o.withCredentials});}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+".");h?h():(a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceFailedToConnect,o.transport,p)]),v&&c.reconnect(o));return;}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){l===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&c.reconnect(o);},c.timeOut));o.eventSource.addEventListener("open",function(){o.log("EventSource connected.");f(o);r.clearReconnectTimeout(o);l===!1&&(l=!0,e(o,i.connectionState.reconnecting,i.connectionState.connected)===!0&&a.triggerHandler(u.onReconnect));},!1);o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data);}catch(i){r.handleParseFailure(o,n.data,i,h,n);return;}r.processMessages(o,t,s);}},!1);o.eventSource.addEventListener("error",function(n){var r=i._.transportError(i.resources.eventSourceError,o.transport,n);this===o.eventSource&&(h&&h(r)||(o.log("EventSource readyState: "+o.eventSource.readyState+"."),n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),c.reconnect(o)):(o.log("EventSource error."),a.triggerHandler(u.onError,[r]))));},!1);},reconnect:function(n){r.reconnect(n,this.name);},lostConnection:function(n){this.reconnect(n);},send:function(n,t){r.ajaxSend(n,t);},stop:function(n){f(n);r.clearReconnectTimeout(n);n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource);},abort:function(n,t){r.ajaxAbort(n,t);}};}(window.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n;},f=function(){var i=null,f=1000,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n);t.document.body.removeChild(n);n=null;},f)),n++);},cancel:function(){n===1&&t.clearInterval(i);n>0&&n--;}};}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return !0;},iframeClearThreshold:50,start:function(n,r,e){var l=this,s=i.foreverFrame.count+=1,h,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages.");e&&e()||l.reconnect(n);};if(t.EventSource){e&&(n.log("Forever Frame is not supported by SignalR on browsers with SSE support."),e());return;}o.setAttribute("data-signalr-connection-id",n.id);f.prevent();h=i.getUrl(n,this.name);h+="&frameId="+s;t.document.documentElement.appendChild(o);n.log("Binding to iframe's load event.");o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c);o.src=h;i.foreverFrame.connections[s]=n;n.frame=o;n.frameId=s;r&&(n.onSuccess=function(){n.log("Iframe transport started.");r();});},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'.");u.src=t;}},n.reconnectDelay);},lostConnection:function(n){this.reconnect(n);},send:function(n,t){i.ajaxSend(n,t);},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body))){for(e=f.document.body;e.firstChild;){e.removeChild(e.firstChild);}}},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop){n.frame.stop();}else{try{r=n.frame.contentWindow||n.frame.contentDocument;r.document&&r.document.execCommand&&r.document.execCommand("Stop");}catch(u){n.log("Error occured when stopping foreverFrame transport. Message = "+u.message+".");}}n.frame.parentNode===t.document.body&&t.document.body.removeChild(n.frame);delete i.foreverFrame.connections[n.frameId];n.frame=null;n.frameId=null;delete n.frame;delete n.frameId;delete n.onSuccess;delete n.frameMessageCount;n.log("Stopping forever frame.");}},abort:function(n,t){i.ajaxAbort(n,t);},getConnection:function(n){return i.foreverFrame.connections[n];},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect);}};}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,f=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return !1;},reconnectDelay:3000,start:function(o,s,h){var a=this,v=function(){v=n.noop;o.log("LongPolling connected.");s();},y=function(n){return h(n)?(o.log("LongPolling failed to connect."),!0):!1;},c=o._,l=0,p=function(i){t.clearTimeout(c.reconnectTimeoutId);c.reconnectTimeoutId=null;e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(u.onReconnect));},w=3600000;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop());o.messageId=null;c.reconnectTimeoutId=null;c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var g=s.messageId,nt=g===null,k=!nt,tt=!h,d=i.getUrl(s,a.name,k,tt,!0),b={};(s.messageId&&(b.messageId=s.messageId),s.groupsToken&&(b.groupsToken=s.groupsToken),f(s)!==!0)&&(o.log("Opening long polling request to '"+d+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o);}},url:d,type:"POST",contentType:r._.defaultContentType,data:b,timeout:o._.pollTimeout,success:function(r){var h,w=0,u,a;o.log("Long poll complete.");l=0;try{h=o._parseResponse(r);}catch(b){i.handleParseFailure(s,r,b,y,s.pollXhr);return;}(c.reconnectTimeoutId!==null&&p(s),h&&(u=i.maximizePersistentResponse(h)),i.processMessages(s,h,v),u&&n.type(u.LongPollDelay)==="number"&&(w=u.LongPollDelay),f(s)!==!0)&&(a=u&&u.ShouldReconnect,!a||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,a);},w):e(s,a));},error:function(f,h){var v=r._.transportError(r.resources.longPollFailed,o.transport,f,s.pollXhr);if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return;}if(!y(v)){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+f.responseText+"."),n(s).triggerHandler(u.onError,[v])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o)){return;}if(!i.ensureReconnectingState(s)){return;}c.pollTimeoutId=t.setTimeout(function(){e(s,!0);},a.reconnectDelay);}}}),k&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){p(s);},Math.min(1000*(Math.pow(2,l)-1),w))));})(o);},250);},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection");},send:function(n,t){i.ajaxSend(n,t);},stop:function(n){t.clearTimeout(n._.pollTimeoutId);t.clearTimeout(n._.reconnectTimeoutId);delete n._.pollTimeoutId;delete n._.reconnectTimeoutId;n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr);},abort:function(n,t){i.ajaxAbort(n,t);}};}(window.jQuery,window),function(n){function r(n){return n+e;}function s(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1){n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));}return u;}function h(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t;}function u(n){for(var t in n){if(n.hasOwnProperty(t)){return !0;}}return !1;}function f(n,t){var i=n._.invocationCallbacks,r,f;u(i)&&n.log("Clearing hub invocation callbacks with error: "+t+".");n._.invocationCallbackId=0;delete n._.invocationCallbacks;n._.invocationCallbacks={};for(f in i){r=i[f],r.method.call(r.scope,{E:t});}}function i(n,t){return new i.fn.init(n,t);}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u);}var e=".hubProxy",o=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={};this.connection=n;this.hubName=t;this._={callbackMap:{}};},constructor:i,hasSubscriptions:function(){return u(this._.callbackMap);},on:function(t,i){var u=this,f=u._.callbackMap;return t=t.toLowerCase(),f[t]||(f[t]={}),f[t][i]=function(n,t){i.apply(u,t);},n(u).bind(r(t),f[t][i]),u;},off:function(t,i){var e=this,o=e._.callbackMap,f;return t=t.toLowerCase(),f=o[t],f&&(f[i]?(n(e).unbind(r(t),f[i]),delete f[i],u(f)||delete o[t]):i||(n(e).unbind(r(t)),delete o[t])),e;},invoke:function(t){var i=this,r=i.connection,e=n.makeArray(arguments).slice(1),c=s(e,h),f={H:i.hubName,M:t,A:c,I:r._.invocationCallbackId},u=n.Deferred(),l=function(f){var e=i._maximizeHubResponse(f),h,s;n.extend(i.state,e.State);e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),h=e.IsHubException?"HubException":"Exception",s=o._.error(e.Error,h),s.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+s.message),u.rejectWith(i,[s])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]));};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:l},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise();},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D};}};i.fn.init.prototype=i.fn;t.fn=t.prototype=n.connection();t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i);n.signalR.fn.init.call(u,t,e.qs,e.logging);u.proxies={};u._.invocationCallbackId=0;u._.invocationCallbacks={};u.received(function(t){var f,o,e,i,s,h;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),s=f.Hub.toLowerCase(),h=f.Method.toLowerCase(),o=this.proxies[s],n.extend(o.state,f.State),n(o).triggerHandler(r(h),[f.Args])));});u.error(function(n,t){var i,r;t&&(i=t.I,r=u._.invocationCallbacks[i],r&&(u._.invocationCallbacks[i]=null,delete u._.invocationCallbacks[i],r.method.call(r.scope,{E:n})));});u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.");});u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.");});};t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S};};t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."));});i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");t.data=t.json.stringify(i);}));};t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t;};t.fn.init.prototype=t.fn;n.hubConnection=t;}(window.jQuery,window),function(n){n.signalR.version="2.2.0";}(window.jQuery);angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a){if(void 0!==f.style[b]){return a[b];}}}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d);});};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d);}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled");},h.promise;},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e;}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0);}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e;}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g));}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"});}function h(){if(k){k=!1,i(),c.css({height:0});}else{c.css({height:c[0].scrollHeight+"px"});c[0].offsetWidth;c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i);}}function i(){c.removeClass("collapsing"),c.addClass("collapse");}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f();});}};}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1);});},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a);});},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1);};}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"};}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a;};},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a);}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen);};}};}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}));}};}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude];},function(a){a&&(b.html(""),b.append(a));});}};}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close" in b,this.close=a.close;}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}};}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close();},parseInt(d.dismissOnTimeout,10));}};}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"");});};}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click";}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)));},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render();});});}};}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0);}function f(){return g(c.btnCheckboxFalse,!1);}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c;}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()));},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render();});});}};}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b));}function f(){h&&(c.cancel(h),h=null);}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause();}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element){c.$element.addClass(f);c.$element[0].offsetWidth;angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1});}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c);},function(){h(b,c);});}(c,j.currentSlide);}else{h(c,j.currentSlide);}j.currentSlide=c,l=i,e();}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null;}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g());},a.$on("$destroy",function(){m=!0;}),j.indexOfSlide=function(a){return k.indexOf(a);},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next");},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev");},a.isActive=function(a){return j.currentSlide===a;},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e());},a.pause=function(){a.noPause||(i=!1,f());},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1;},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?j.select(b>=k.length?k[b-1]:k[b]):l>b&&l--;};}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}};}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a);}),a.$watch("active",function(b){b&&d.select(a);});}};}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++){d[g]="",a[g]="$";}a=a.join(""),c.push({index:f,apply:b.apply});}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")};}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0;}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a;}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2000;}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a;}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b);}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b);}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1;}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1;}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a;}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a;}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e){return b;}e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l]);}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j;}};}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c];}function d(a){return"static"===(c(a,"position")||"static");}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);){e=e.offsetParent;}return e||c;};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left};},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)};},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2;},left:function(){return e.left;},right:function(){return e.left+e.width;}},m={center:function(){return e.top+e.height/2-g/2;},top:function(){return e.top;},bottom:function(){return e.top+e.height;}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()};}return h;}};}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c];}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView();}):i[d]=h[d]?new Date(h[d]):null;}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(10000*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1;},this.init=function(a){j=a,j.$render=function(){i.render();};},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b);}this.refreshView();},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a));}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)};},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode});},this.split=function(a,b){for(var c=[];a.length>0;){c.push(a.splice(0,b));}return c;},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render();}else{i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1];}},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView();},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b]);},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus();},0,!1);};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey){if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate)){return;}a.select(i.activeDate),k();}else{!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k());}}};}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f);}};}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29;}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;){c[e++]=new Date(d),d.setDate(d.getDate()+1);}return c;}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/86400000)/7)+1;}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++){l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});}b.labels=new Array(7);for(var n=0;7>n;n++){b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};}if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;){}}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate());},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a){b-=1;}else{if("up"===a){b-=7;}else{if("right"===a){b+=1;}else{if("down"===a){b+=7;}else{if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b);}else{"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));}}}}}e.activeDate.setDate(b);},e.refreshView();}};}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++){c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});}b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3);},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth());},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a){b-=1;}else{if("up"===a){b-=3;}else{if("right"===a){b+=1;}else{if("down"===a){b+=3;}else{if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c);}else{"home"===a?b=0:"end"===a&&(b=11);}}}}}e.activeDate.setMonth(b);},e.refreshView();}};}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1;}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++){b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});}a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5);},d.compare=function(a,b){return a.getFullYear()-b.getFullYear();},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b);},d.refreshView();}};}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase();});}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a)){return k.$setValidity("date",!0),a;}if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b);}return void k.$setValidity("date",!1);}return k.$setValidity("date",!0),null;}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"];},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render();});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a);}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b;}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a);});}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus());},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue;});}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue);};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1;});},t=function(a){h.keydown(a);};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0);},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s);}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0));}h.dateSelection(a);},h.close=function(){h.isOpen=!1,i[0].focus();};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s);});}};}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation();});}};}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e;},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d));};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1;});}},d=function(a){27===a.which&&(b.focusToggleElement(),c());};}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a;}));},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen;},this.isOpen=function(){return i.isOpen;},i.getToggleElement=function(){return h.toggleElement;},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus();},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b});}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1;}),a.$on("$destroy",function(){i.$destroy();});}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b);}};}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle();});};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a);}),a.$on("$destroy",function(){b.unbind("click",e);});}}};}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c});},get:function(b){for(var c=0;c<a.length;c++){if(b==a[c].key){return a[c];}}},keys:function(){for(var b=[],c=0;c<a.length;c++){b.push(a[c].key);}return b;},top:function(){return a[a.length-1];},remove:function(b){for(var c=-1,d=0;d<a.length;d++){if(b==a[d].key){c=d;break;}}return a.splice(c,1)[0];},removeTop:function(){return a.splice(a.length-1,1)[0];},length:function(){return a.length;}};}};}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0;});}};}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html";},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus();}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"));};}};}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a);});}};}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++){n.get(b[c]).value.backdrop&&(a=c);}return a;}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i();});}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null;}),k=void 0,l=void 0;}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f());}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply();});}else{b(g);}}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a);}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press");})));}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k);}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m);},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a));},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a));},o.dismissAll=function(a){for(var b=this.getTop();b;){this.dismiss(b.key,a),b=this.getTop();}},o.getTop=function(){return n.top();},o;}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data;});}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)));}),c;}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a);},dismiss:function(a){h.dismiss(k,a);}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl){throw new Error("One of template or templateUrl options is required.");}var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++];}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size});},function(a){e.reject(a);}),l.then(function(){f.resolve(!0);},function(){f.reject(!1);}),k;},k;}]};return a;}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render();},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages();}):this.itemsPerPage=g.itemsPerPage;},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1);},this.render=function(){a.page=parseInt(e.$viewValue,10)||1;},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render());},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"];},a.noPrevious=function(){return 1===a.page;},a.noNext=function(){return a.page===a.totalPages;},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages();}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render();});}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c};}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i);}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j);}if(b>e){var m=g(e+1,"...",!1);c.push(m);}}return c;}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render();});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages));};}}};}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a));}};}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase();});}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a);},this.setTriggers=function(a){angular.extend(c,a);},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d};}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var a=f(r);return function(b,c,d){function f(){D.isOpen?l():j();}function j(){(!C||b.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a();})):o()());}function l(){b.$apply(function(){p();});}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),A?h.find("body").append(w):c.after(w),E(),D.isOpen=!0,D.$digest(),E):angular.noop;}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r();}function q(){w&&r(),x=D.$new(),w=a(x,angular.noop);}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null);}function s(){t(),u();}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement;}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b;}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?c.bind(B.show,f):(c.bind(B.show,j),c.bind(B.hide,l));}var w,x,y,z,A=angular.isDefined(n.appendToBody)?n.appendToBody:!1,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=b.$new(!0),E=function(){var a=i.positionElements(c,w,D.placement,A);a.top+="px",a.left+="px",w.css(a);};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p();}),d.$observe(k+"Title",function(a){D.title=a;});var F=function(){c.unbind(B.show,j),c.unbind(B.hide,l);};v();var G=b.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=b.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&b.$on("$locationChangeSuccess",function(){D.isOpen&&p();}),b.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null;});};}};};}];}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"};}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter");}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"};}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter");}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"};}).directive("popover",["$tooltip",function(a){return a("popover","popover","click");}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2);}),b.$on("$destroy",function(){c=null,d.removeBar(b);});},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1);};}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"};}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b);}};}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]));}};}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f);},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++){a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);}return a;},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render());},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b});},a.reset=function(){a.value=d.$viewValue,a.onLeave();},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)));},this.render=function(){a.value=d.$viewValue;};}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f);}};}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect());}),a.active=!0,a.onSelect();},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a);},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f]);}c.splice(e,1);};var d;a.$on("$destroy",function(){d=!0;});}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1;}};}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b);}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a;}),b.select=function(){b.disabled||(b.active=!0);},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b);}),b.$transcludeFn=d;};}};}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a));});}};}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase());}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b);});});}};}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0;}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0;}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a;}function j(a){k(),o.$setViewValue(new Date(n)),l(a);}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1;}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1];}function m(a){var b=new Date(n.getTime()+60000*a);n.setHours(b.getHours(),b.getMinutes()),j();}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g);};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10);});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10);}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j());}else{l();}}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0;};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault();}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault();});},this.setupInputEvents=function(b,c){if(a.readonlyInput){return a.updateHours=angular.noop,void (a.updateMinutes=angular.noop);}var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c);};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0);},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours);});}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0);},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes);});});},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l());},a.incrementHours=function(){m(60*q);},a.decrementHours=function(){m(60*-q);},a.incrementMinutes=function(){m(r);},a.decrementMinutes=function(){m(-r);},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1));};}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"));}};}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d){throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');}return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])};}};}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy();});var y="typeahead-"+x.$id+"-"+Math.floor(10000*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1);},B=function(a){return y+"-option-"+a;};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a));});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m){if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++){b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});}x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0);}else{A();}}d&&q(i,!1);},function(){A(),q(i,!1);});};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a);},o);},F=function(){D&&d.cancel(D);};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a);}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a);}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus();},0,!1);},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx);}):27===a.which&&(a.stopPropagation(),A(),x.$digest()));}),j.bind("blur",function(){m=!1;});var G=function(a){j[0]!==a.target&&(A(),x.$digest());};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove();});var H=a(z)(x);t?e.find("body").append(H):j.after(H);}};}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0;},a.isActive=function(b){return a.active==b;},a.selectActive=function(b){a.active=b;},a.selectMatch=function(b){a.select({activeIdx:b});};}};}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e));});}};}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b;};}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n');}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>');}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n');}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n');}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n");}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>');}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n');}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n');}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n');}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>');}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>');}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>');}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n');}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n');}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n');}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>');}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>');}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>');}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>');}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n');}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n');}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n');}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>');}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n');}]);(function(I,d,B){function D(f,q){q=q||{};d.forEach(q,function(d,h){delete q[h];});for(var h in f){!f.hasOwnProperty(h)||"$"===h.charAt(0)&&"$"===h.charAt(1)||(q[h]=f[h]);}return q;}var w=d.$$minErr("$resource"),C=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;d.module("ngResource",["ng"]).provider("$resource",function(){var f=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};this.$get=["$http","$q",function(q,h){function t(d,g){this.template=d;this.defaults=s({},f.defaults,g);this.urlParams={};}function v(x,g,l,m){function c(b,k){var c={};k=s({},g,k);r(k,function(a,k){u(a)&&(a=a());var d;if(a&&a.charAt&&"@"==a.charAt(0)){d=b;var e=a.substr(1);if(null==e||""===e||"hasOwnProperty"===e||!C.test("."+e)){throw w("badmember",e);}for(var e=e.split("."),n=0,g=e.length;n<g&&d!==B;n++){var h=e[n];d=null!==d?d[h]:B;}}else{d=a;}c[k]=d;});return c;}function F(b){return b.resource;}function e(b){D(b||{},this);}var G=new t(x,m);l=s({},f.defaults.actions,l);e.prototype.toJSON=function(){var b=s({},this);delete b.$promise;delete b.$resolved;return b;};r(l,function(b,k){var g=/^(POST|PUT|PATCH)$/i.test(b.method);e[k]=function(a,y,m,x){var n={},f,l,z;switch(arguments.length){case 4:z=x,l=m;case 3:case 2:if(u(y)){if(u(a)){l=a;z=y;break;}l=y;z=m;}else{n=a;f=y;l=m;break;}case 1:u(a)?l=a:g?f=a:n=a;break;case 0:break;default:throw w("badargs",arguments.length);}var t=this instanceof e,p=t?f:b.isArray?[]:new e(f),A={},v=b.interceptor&&b.interceptor.response||F,C=b.interceptor&&b.interceptor.responseError||B;r(b,function(b,a){"params"!=a&&"isArray"!=a&&"interceptor"!=a&&(A[a]=H(b));});g&&(A.data=f);G.setUrlParams(A,s({},c(f,b.params||{}),n),b.url);n=q(A).then(function(a){var c=a.data,g=p.$promise;if(c){if(d.isArray(c)!==!!b.isArray){throw w("badcfg",k,b.isArray?"array":"object",d.isArray(c)?"array":"object");}b.isArray?(p.length=0,r(c,function(a){"object"===typeof a?p.push(new e(a)):p.push(a);})):(D(c,p),p.$promise=g);}p.$resolved=!0;a.resource=p;return a;},function(a){p.$resolved=!0;(z||E)(a);return h.reject(a);});n=n.then(function(a){var b=v(a);(l||E)(b,a.headers);return b;},C);return t?n:(p.$promise=n,p.$resolved=!1,p);};e.prototype["$"+k]=function(a,b,c){u(a)&&(c=b,b=a,a={});a=e[k].call(this,a,this,b,c);return a.$promise||a;};});e.bind=function(b){return v(x,s({},g,b),l);};return e;}var E=d.noop,r=d.forEach,s=d.extend,H=d.copy,u=d.isFunction;t.prototype={setUrlParams:function(f,g,l){var m=this,c=l||m.template,h,e,q=m.urlParams={};r(c.split(/\W/),function(b){if("hasOwnProperty"===b){throw w("badname");}!/^\d+$/.test(b)&&b&&(new RegExp("(^|[^\\\\]):"+b+"(\\W|$)")).test(c)&&(q[b]=!0);});c=c.replace(/\\:/g,":");g=g||{};r(m.urlParams,function(b,k){h=g.hasOwnProperty(k)?g[k]:m.defaults[k];d.isDefined(h)&&null!==h?(e=encodeURIComponent(h).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"%20").replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+"),c=c.replace(new RegExp(":"+k+"(\\W|$)","g"),function(b,a){return e+a;})):c=c.replace(new RegExp("(/?):"+k+"(\\W|$)","g"),function(b,a,c){return"/"==c.charAt(0)?c:a+c;});});m.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");f.url=c.replace(/\/\\\./,"/.");r(g,function(b,c){m.urlParams[c]||(f.params=f.params||{},f.params[c]=b);});}};return v;}];});})(window,window.angular);(function(M,f,S){f.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(T,B,k){k=k.ngAnimateChildren;f.isString(k)&&0===k.length?B.data("$$ngAnimateChildren",!0):T.$watch(k,function(f){B.data("$$ngAnimateChildren",!!f);});};}).factory("$$animateReflow",["$$rAF","$document",function(f,B){return function(k){return f(function(){k();});};}]).config(["$provide","$animateProvider",function(T,B){function k(f){for(var g=0;g<f.length;g++){var k=f[g];if(1==k.nodeType){return k;}}}function N(f,g){return k(f)==k(g);}var s=f.noop,g=f.forEach,ba=B.$$selectors,$=f.isArray,ca=f.isString,da=f.isObject,t={running:!0};T.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(O,M,I,U,x,C,P,S,V){function A(a,c){var b=a.data("$$ngAnimateState")||{};c&&(b.running=!0,b.structural=!0,a.data("$$ngAnimateState",b));return b.disabled||b.running&&b.structural;}function z(a){var c,b=M.defer();b.promise.$$cancelFn=function(){c&&c();};P.$$postDigest(function(){c=a(function(){b.resolve();});});return b.promise;}function J(a){if(da(a)){return a.tempClasses&&ca(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a;}}function W(a,c,b){b=b||{};var e={};g(b,function(a,d){g(d.split(" "),function(d){e[d]=a;});});var m=Object.create(null);g((a.attr("class")||"").split(/\s+/),function(a){m[a]=!0;});var f=[],k=[];g(c&&c.classes||[],function(a,d){var b=m[d],c=e[d]||{};!1===a?(b||"addClass"==c.event)&&k.push(d):!0===a&&(b&&"removeClass"!=c.event||f.push(d));});return 0<f.length+k.length&&[f.join(" "),k.join(" ")];}function Q(a){if(a){var c=[],b={};a=a.substr(1).split(".");(U.transitions||U.animations)&&c.push(I.get(ba[""]));for(var e=0;e<a.length;e++){var f=a[e],k=ba[f];k&&!b[f]&&(c.push(I.get(k)),b[f]=!0);}return c;}}function R(a,c,b,e){function m(a,d){var b=a[d],c=a["before"+d.charAt(0).toUpperCase()+d.substr(1)];if(b||c){return"leave"==d&&(c=b,b=null),l.push({event:d,fn:b}),H.push({event:d,fn:c}),!0;}}function k(c,h,G){var w=[];g(c,function(a){a.fn&&w.push(a);});var f=0;g(w,function(c,n){var u=function(){a:{if(h){(h[n]||s)();if(++f<w.length){break a;}h=null;}G();}};switch(c.event){case"setClass":h.push(c.fn(a,F,d,u,e));break;case"animate":h.push(c.fn(a,b,e.from,e.to,u));break;case"addClass":h.push(c.fn(a,F||b,u,e));break;case"removeClass":h.push(c.fn(a,d||b,u,e));break;default:h.push(c.fn(a,u,e));}});h&&0===h.length&&G();}var p=a[0];if(p){e&&(e.to=e.to||{},e.from=e.from||{});var F,d;$(b)&&(F=b[0],d=b[1],F?d?b=F+" "+d:(b=F,c="addClass"):(b=d,c="removeClass"));var h="setClass"==c,G=h||"addClass"==c||"removeClass"==c||"animate"==c,w=a.attr("class")+" "+b;if(X(w)){var u=s,n=[],H=[],q=s,r=[],l=[],w=(" "+w).replace(/\s+/g,".");g(Q(w),function(a){!m(a,c)&&h&&(m(a,"addClass"),m(a,"removeClass"));});return{node:p,event:c,className:b,isClassBased:G,isSetClassOperation:h,applyStyles:function(){e&&a.css(f.extend(e.from||{},e.to||{}));},before:function(a){u=a;k(H,n,function(){u=s;a();});},after:function(a){q=a;k(l,r,function(){q=s;a();});},cancel:function(){n&&(g(n,function(a){(a||s)(!0);}),u(!0));r&&(g(r,function(a){(a||s)(!0);}),q(!0));}};}}}function y(a,c,b,e,m,k,p,F){function d(d){var h="$animate:"+d;H&&H[h]&&0<H[h].length&&C(function(){b.triggerHandler(h,{event:a,className:c});});}function h(){d("before");}function G(){d("after");}function w(){w.hasBeenRun||(w.hasBeenRun=!0,k());}function u(){if(!u.hasBeenRun){n&&n.applyStyles();u.hasBeenRun=!0;p&&p.tempClasses&&g(p.tempClasses,function(a){b.removeClass(a);});var h=b.data("$$ngAnimateState");h&&(n&&n.isClassBased?l(b,c):(C(function(){var d=b.data("$$ngAnimateState")||{};v==d.index&&l(b,c,a);}),b.data("$$ngAnimateState",h)));d("close");F();}}var n=R(b,a,c,p);if(!n){return w(),h(),G(),u(),s;}a=n.event;c=n.className;var H=f.element._data(n.node),H=H&&H.events;e||(e=m?m.parent():b.parent());if(Y(b,e)){return w(),h(),G(),u(),s;}e=b.data("$$ngAnimateState")||{};var q=e.active||{},r=e.totalActive||0,t=e.last;m=!1;if(0<r){r=[];if(n.isClassBased){"setClass"==t.event?(r.push(t),l(b,c)):q[c]&&(aa=q[c],aa.event==a?m=!0:(r.push(aa),l(b,c)));}else{if("leave"==a&&q["ng-leave"]){m=!0;}else{for(var aa in q){r.push(q[aa]);}e={};l(b,!0);}}0<r.length&&g(r,function(a){a.cancel();});}!n.isClassBased||n.isSetClassOperation||"animate"==a||m||(m="addClass"==a==b.hasClass(c));if(m){return w(),h(),G(),d("close"),F(),s;}q=e.active||{};r=e.totalActive||0;if("leave"==a){b.one("$destroy",function(a){a=f.element(this);var d=a.data("$$ngAnimateState");d&&(d=d.active["ng-leave"])&&(d.cancel(),l(a,"ng-leave"));});}b.addClass("ng-animate");p&&p.tempClasses&&g(p.tempClasses,function(a){b.addClass(a);});var v=Z++;r++;q[c]=n;b.data("$$ngAnimateState",{last:n,active:q,index:v,totalActive:r});h();n.before(function(d){var h=b.data("$$ngAnimateState");d=d||!h||!h.active[c]||n.isClassBased&&h.active[c].event!=a;w();!0===d?u():(G(),n.after(u));});return n.cancel;}function K(a){if(a=k(a)){a=f.isFunction(a.getElementsByClassName)?a.getElementsByClassName("ng-animate"):a.querySelectorAll(".ng-animate"),g(a,function(a){a=f.element(a);(a=a.data("$$ngAnimateState"))&&a.active&&g(a.active,function(a){a.cancel();});});}}function l(a,c){if(N(a,x)){t.disabled||(t.running=!1,t.structural=!1);}else{if(c){var b=a.data("$$ngAnimateState")||{},e=!0===c;!e&&b.active&&b.active[c]&&(b.totalActive--,delete b.active[c]);if(e||!b.totalActive){a.removeClass("ng-animate"),a.removeData("$$ngAnimateState");}}}}function Y(a,c){if(t.disabled){return !0;}if(N(a,x)){return t.running;}var b,e,k;do{if(0===c.length){break;}var g=N(c,x),p=g?t:c.data("$$ngAnimateState")||{};if(p.disabled){return !0;}g&&(k=!0);!1!==b&&(g=c.data("$$ngAnimateChildren"),f.isDefined(g)&&(b=g));e=e||p.running||p.last&&!p.last.isClassBased;}while(c=c.parent());return !k||!b&&e;}x.data("$$ngAnimateState",t);var L=P.$watch(function(){return V.totalPendingRequests;},function(a,c){0===a&&(L(),P.$$postDigest(function(){P.$$postDigest(function(){t.running=!1;});}));}),Z=0,E=B.classNameFilter(),X=E?function(a){return E.test(a);}:function(){return !0;};return{animate:function(a,c,b,e,g){e=e||"ng-inline-animate";g=J(g)||{};g.from=b?c:null;g.to=b?b:c;return z(function(b){return y("animate",e,f.element(k(a)),null,null,s,g,b);});},enter:function(a,c,b,e){e=J(e);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);A(a,!0);O.enter(a,c,b);return z(function(g){return y("enter","ng-enter",f.element(k(a)),c,b,s,e,g);});},leave:function(a,c){c=J(c);a=f.element(a);K(a);A(a,!0);return z(function(b){return y("leave","ng-leave",f.element(k(a)),null,null,function(){O.leave(a);},c,b);});},move:function(a,c,b,e){e=J(e);a=f.element(a);c=c&&f.element(c);b=b&&f.element(b);K(a);A(a,!0);O.move(a,c,b);return z(function(g){return y("move","ng-move",f.element(k(a)),c,b,s,e,g);});},addClass:function(a,c,b){return this.setClass(a,c,[],b);},removeClass:function(a,c,b){return this.setClass(a,[],c,b);},setClass:function(a,c,b,e){e=J(e);a=f.element(a);a=f.element(k(a));if(A(a)){return O.$$setClassImmediately(a,c,b,e);}var m,l=a.data("$$animateClasses"),p=!!l;l||(l={classes:{}});m=l.classes;c=$(c)?c:c.split(" ");g(c,function(a){a&&a.length&&(m[a]=!0);});b=$(b)?b:b.split(" ");g(b,function(a){a&&a.length&&(m[a]=!1);});if(p){return e&&l.options&&(l.options=f.extend(l.options||{},e)),l.promise;}a.data("$$animateClasses",l={classes:m,options:e});return l.promise=z(function(b){var d=a.parent(),h=k(a),c=h.parentNode;if(!c||c.$$NG_REMOVED||h.$$NG_REMOVED){b();}else{h=a.data("$$animateClasses");a.removeData("$$animateClasses");var c=a.data("$$ngAnimateState")||{},e=W(a,h,c.active);return e?y("setClass",e,a,d,null,function(){e[0]&&O.$$addClassImmediately(a,e[0]);e[1]&&O.$$removeClassImmediately(a,e[1]);},h.options,b):b();}});},cancel:function(a){a.$$cancelFn();},enabled:function(a,c){switch(arguments.length){case 2:if(a){l(c);}else{var b=c.data("$$ngAnimateState")||{};b.disabled=!0;c.data("$$ngAnimateState",b);}break;case 1:t.disabled=!a;break;default:a=!t.disabled;}return !!a;}};}]);B.register("",["$window","$sniffer","$timeout","$$animateReflow",function(t,B,I,U){function x(){e||(e=U(function(){b=[];e=null;a={};}));}function C(c,d){e&&e();b.push(d);e=U(function(){g(b,function(a){a();});b=[];e=null;a={};});}function P(a,d){var h=k(a);a=f.element(h);p.push(a);h=Date.now()+d;h<=N||(I.cancel(m),N=h,m=I(function(){T(p);p=[];},d,!1));}function T(a){g(a,function(a){(a=a.data("$$ngAnimateCSS3Data"))&&g(a.closeAnimationFns,function(a){a();});});}function V(b,d){var h=d?a[d]:null;if(!h){var c=0,e=0,f=0,k=0;g(b,function(a){if(1==a.nodeType){a=t.getComputedStyle(a)||{};c=Math.max(A(a[L+"Duration"]),c);e=Math.max(A(a[L+"Delay"]),e);k=Math.max(A(a[E+"Delay"]),k);var d=A(a[E+"Duration"]);0<d&&(d*=parseInt(a[E+"IterationCount"],10)||1);f=Math.max(d,f);}});h={total:0,transitionDelay:e,transitionDuration:c,animationDelay:k,animationDuration:f};d&&(a[d]=h);}return h;}function A(a){var d=0;a=ca(a)?a.split(/\s*,\s*/):[];g(a,function(a){d=Math.max(parseFloat(a)||0,d);});return d;}function z(b,d,h,e){b=0<=["ng-enter","ng-leave","ng-move"].indexOf(h);var f,g=d.parent(),n=g.data("$$ngAnimateKey");n||(g.data("$$ngAnimateKey",++c),n=c);f=n+"-"+k(d).getAttribute("class");var g=f+" "+h,n=a[g]?++a[g].total:0,l={};if(0<n){var q=h+"-stagger",l=f+" "+q;(f=!a[l])&&d.addClass(q);l=V(d,l);f&&d.removeClass(q);}d.addClass(h);var q=d.data("$$ngAnimateCSS3Data")||{},r=V(d,g);f=r.transitionDuration;r=r.animationDuration;if(b&&0===f&&0===r){return d.removeClass(h),!1;}h=e||b&&0<f;b=0<r&&0<l.animationDelay&&0===l.animationDuration;d.data("$$ngAnimateCSS3Data",{stagger:l,cacheKey:g,running:q.running||0,itemIndex:n,blockTransition:h,closeAnimationFns:q.closeAnimationFns||[]});g=k(d);h&&(W(g,!0),e&&d.css(e));b&&(g.style[E+"PlayState"]="paused");return !0;}function J(a,d,b,c,e){function f(){d.off(C,l);d.removeClass(q);d.removeClass(r);z&&I.cancel(z);K(d,b);var a=k(d),c;for(c in p){a.style.removeProperty(p[c]);}}function l(a){a.stopPropagation();var d=a.originalEvent||a;a=d.$manualTimeStamp||d.timeStamp||Date.now();d=parseFloat(d.elapsedTime.toFixed(3));Math.max(a-B,0)>=A&&d>=x&&c();}var m=k(d);a=d.data("$$ngAnimateCSS3Data");if(-1!=m.getAttribute("class").indexOf(b)&&a){var q="",r="";g(b.split(" "),function(a,d){var b=(0<d?" ":"")+a;q+=b+"-active";r+=b+"-pending";});var p=[],t=a.itemIndex,v=a.stagger,s=0;if(0<t){s=0;0<v.transitionDelay&&0===v.transitionDuration&&(s=v.transitionDelay*t);var y=0;0<v.animationDelay&&0===v.animationDuration&&(y=v.animationDelay*t,p.push(Y+"animation-play-state"));s=Math.round(100*Math.max(s,y))/100;}s||(d.addClass(q),a.blockTransition&&W(m,!1));var D=V(d,a.cacheKey+" "+q),x=Math.max(D.transitionDuration,D.animationDuration);if(0===x){d.removeClass(q),K(d,b),c();}else{!s&&e&&(D.transitionDuration||(d.css("transition",D.animationDuration+"s linear all"),p.push("transition")),d.css(e));var t=Math.max(D.transitionDelay,D.animationDelay),A=1000*t;0<p.length&&(v=m.getAttribute("style")||"",";"!==v.charAt(v.length-1)&&(v+=";"),m.setAttribute("style",v+" "));var B=Date.now(),C=X+" "+Z,t=1000*(s+1.5*(t+x)),z;0<s&&(d.addClass(r),z=I(function(){z=null;0<D.transitionDuration&&W(m,!1);0<D.animationDuration&&(m.style[E+"PlayState"]="");d.addClass(q);d.removeClass(r);e&&(0===D.transitionDuration&&d.css("transition",D.animationDuration+"s linear all"),d.css(e),p.push("transition"));},1000*s,!1));d.on(C,l);a.closeAnimationFns.push(function(){f();c();});a.running++;P(d,t);return f;}}else{c();}}function W(a,d){a.style[L+"Property"]=d?"none":"";}function Q(a,d,b,c){if(z(a,d,b,c)){return function(a){a&&K(d,b);};}}function R(a,d,b,c,e){if(d.data("$$ngAnimateCSS3Data")){return J(a,d,b,c,e);}K(d,b);c();}function y(a,d,b,c,e){var f=Q(a,d,b,e.from);if(f){var g=f;C(d,function(){g=R(a,d,b,c,e.to);});return function(a){(g||s)(a);};}x();c();}function K(a,d){a.removeClass(d);var b=a.data("$$ngAnimateCSS3Data");b&&(b.running&&b.running--,b.running&&0!==b.running||a.removeData("$$ngAnimateCSS3Data"));}function l(a,d){var b="";a=$(a)?a:a.split(/\s+/);g(a,function(a,c){a&&0<a.length&&(b+=(0<c?" ":"")+a+d);});return b;}var Y="",L,Z,E,X;M.ontransitionend===S&&M.onwebkittransitionend!==S?(Y="-webkit-",L="WebkitTransition",Z="webkitTransitionEnd transitionend"):(L="transition",Z="transitionend");M.onanimationend===S&&M.onwebkitanimationend!==S?(Y="-webkit-",E="WebkitAnimation",X="webkitAnimationEnd animationend"):(E="animation",X="animationend");var a={},c=0,b=[],e,m=null,N=0,p=[];return{animate:function(a,d,b,c,e,f){f=f||{};f.from=b;f.to=c;return y("animate",a,d,e,f);},enter:function(a,b,c){c=c||{};return y("enter",a,"ng-enter",b,c);},leave:function(a,b,c){c=c||{};return y("leave",a,"ng-leave",b,c);},move:function(a,b,c){c=c||{};return y("move",a,"ng-move",b,c);},beforeSetClass:function(a,b,c,e,f){f=f||{};b=l(c,"-remove")+" "+l(b,"-add");if(f=Q("setClass",a,b,f.from)){return C(a,e),f;}x();e();},beforeAddClass:function(a,b,c,e){e=e||{};if(b=Q("addClass",a,l(b,"-add"),e.from)){return C(a,c),b;}x();c();},beforeRemoveClass:function(a,b,c,e){e=e||{};if(b=Q("removeClass",a,l(b,"-remove"),e.from)){return C(a,c),b;}x();c();},setClass:function(a,b,c,e,f){f=f||{};c=l(c,"-remove");b=l(b,"-add");return R("setClass",a,c+" "+b,e,f.to);},addClass:function(a,b,c,e){e=e||{};return R("addClass",a,l(b,"-add"),c,e.to);},removeClass:function(a,b,c,e){e=e||{};return R("removeClass",a,l(b,"-remove"),c,e.to);}};}]);}]);})(window,window.angular);angular.module("SignalR",[]).constant("$",window.jQuery).factory("Hub",["$",function($){var globalConnections=[];function initNewConnection(options){var connection=null;if(options&&options.rootPath){connection=$.hubConnection(options.rootPath,{useDefaultPath:false});}else{connection=$.hubConnection();}connection.logging=(options&&options.logging?true:false);return connection;}function getConnection(options){var useSharedConnection=!(options&&options.useSharedConnection===false);if(useSharedConnection){return typeof globalConnections[options.rootPath]==="undefined"?globalConnections[options.rootPath]=initNewConnection(options):globalConnections[options.rootPath];}else{return initNewConnection(options);}}return function(hubName,options){var Hub=this;Hub.connection=getConnection(options);Hub.proxy=Hub.connection.createHubProxy(hubName);Hub.on=function(event,fn){Hub.proxy.on(event,fn);};Hub.invoke=function(method,args){return Hub.proxy.invoke.apply(Hub.proxy,arguments);};Hub.disconnect=function(){Hub.connection.stop();};Hub.connect=function(){return Hub.connection.start(options.transport?{transport:options.transport}:null);};if(options&&options.listeners){angular.forEach(options.listeners,function(fn,event){Hub.on(event,fn);});}if(options&&options.methods){angular.forEach(options.methods,function(method){Hub[method]=function(){var args=$.makeArray(arguments);args.unshift(method);return Hub.invoke.apply(Hub,args);};});}if(options&&options.queryParams){Hub.connection.qs=options.queryParams;}if(options&&options.errorHandler){Hub.connection.error(options.errorHandler);}if(options&&options.hubDisconnected){Hub.connection.disconnected(options.hubDisconnected);}if(options&&options.stateChanged){Hub.connection.stateChanged(options.stateChanged);}Hub.promise=Hub.connect();return Hub;};}]);angular.module("SignalR",[]).constant("$",window.jQuery).factory("Hub",["$",function(a){function c(b){var c=null;return c=b&&b.rootPath?a.hubConnection(b.rootPath,{useDefaultPath:!1}):a.hubConnection(),c.logging=b&&b.logging?!0:!1,c;}function d(a){var d=!(a&&a.useSharedConnection===!1);return d?"undefined"==typeof b[a.rootPath]?b[a.rootPath]=c(a):b[a.rootPath]:c(a);}var b=[];return function(b,c){var e=this;return e.connection=d(c),e.proxy=e.connection.createHubProxy(b),e.on=function(a,b){e.proxy.on(a,b);},e.invoke=function(){return e.proxy.invoke.apply(e.proxy,arguments);},e.disconnect=function(){e.connection.stop();},e.connect=function(){return e.connection.start(c.transport?{transport:c.transport}:null);},c&&c.listeners&&angular.forEach(c.listeners,function(a,b){e.on(b,a);}),c&&c.methods&&angular.forEach(c.methods,function(b){e[b]=function(){var c=a.makeArray(arguments);return c.unshift(b),e.invoke.apply(e,c);};}),c&&c.queryParams&&(e.connection.qs=c.queryParams),c&&c.errorHandler&&e.connection.error(c.errorHandler),c&&c.hubDisconnected&&e.connection.disconnected(c.hubDisconnected),c&&c.stateChanged&&e.connection.stateChanged(c.stateChanged),e.promise=e.connect(),e;};}]);"use strict";angular.module("ui.alias",[]).config(["$compileProvider","uiAliasConfig",function($compileProvider,uiAliasConfig){uiAliasConfig=uiAliasConfig||{};angular.forEach(uiAliasConfig,function(config,alias){if(angular.isString(config)){config={replace:true,template:config};}$compileProvider.directive(alias,function(){return config;});});}]);"use strict";angular.module("ui.event",[]).directive("uiEvent",["$parse",function($parse){return function($scope,elm,attrs){var events=$scope.$eval(attrs.uiEvent);angular.forEach(events,function(uiEvent,eventName){var fn=$parse(uiEvent);elm.bind(eventName,function(evt){var params=Array.prototype.slice.call(arguments);params=params.splice(1);fn($scope,{$event:evt,$params:params});if(!$scope.$$phase){$scope.$apply();}});});};}]);"use strict";angular.module("ui.format",[]).filter("format",function(){return function(value,replace){var target=value;if(angular.isString(target)&&replace!==undefined){if(!angular.isArray(replace)&&!angular.isObject(replace)){replace=[replace];}if(angular.isArray(replace)){var rlen=replace.length;var rfx=function(str,i){i=parseInt(i,10);return(i>=0&&i<rlen)?replace[i]:str;};target=target.replace(/\$([0-9]+)/g,rfx);}else{angular.forEach(replace,function(value,key){target=target.split(":"+key).join(value);});}}return target;};});"use strict";angular.module("ui.highlight",[]).filter("highlight",function(){return function(text,search,caseSensitive){if(search||angular.isNumber(search)){text=text.toString();search=search.toString();if(caseSensitive){return text.split(search).join('<span class="ui-match">'+search+"</span>");}else{return text.replace(new RegExp(search,"gi"),'<span class="ui-match">$&</span>');}}else{return text;}};});"use strict";angular.module("ui.include",[]).directive("uiInclude",["$http","$templateCache","$anchorScroll","$compile",function($http,$templateCache,$anchorScroll,$compile){return{restrict:"ECA",terminal:true,compile:function(element,attr){var srcExp=attr.uiInclude||attr.src,fragExp=attr.fragment||"",onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,element){var changeCounter=0,childScope;var clearContent=function(){if(childScope){childScope.$destroy();childScope=null;}element.html("");};function ngIncludeWatchAction(){var thisChangeId=++changeCounter;var src=scope.$eval(srcExp);var fragment=scope.$eval(fragExp);if(src){$http.get(src,{cache:$templateCache}).success(function(response){if(thisChangeId!==changeCounter){return;}if(childScope){childScope.$destroy();}childScope=scope.$new();var contents;if(fragment){contents=angular.element("<div/>").html(response).find(fragment);}else{contents=angular.element("<div/>").html(response).contents();}element.html(contents);$compile(contents)(childScope);if(angular.isDefined(autoScrollExp)&&(!autoScrollExp||scope.$eval(autoScrollExp))){$anchorScroll();}childScope.$emit("$includeContentLoaded");scope.$eval(onloadExp);}).error(function(){if(thisChangeId===changeCounter){clearContent();}});}else{clearContent();}}scope.$watch(fragExp,ngIncludeWatchAction);scope.$watch(srcExp,ngIncludeWatchAction);};}};}]);"use strict";angular.module("ui.indeterminate",[]).directive("uiIndeterminate",[function(){return{compile:function(tElm,tAttrs){if(!tAttrs.type||tAttrs.type.toLowerCase()!=="checkbox"){return angular.noop;}return function($scope,elm,attrs){$scope.$watch(attrs.uiIndeterminate,function(newVal){elm[0].indeterminate=!!newVal;});};}};}]);"use strict";angular.module("ui.inflector",[]).filter("inflector",function(){function ucwords(text){return text.replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase();});}function breakup(text,separator){return text.replace(/[A-Z]/g,function(match){return separator+match;});}var inflectors={humanize:function(value){return ucwords(breakup(value," ").split("_").join(" "));},underscore:function(value){return value.substr(0,1).toLowerCase()+breakup(value.substr(1),"_").toLowerCase().split(" ").join("_");},variable:function(value){value=value.substr(0,1).toLowerCase()+ucwords(value.split("_").join(" ")).substr(1).split(" ").join("");return value;}};return function(text,inflector){if(inflector!==false&&angular.isString(text)){inflector=inflector||"humanize";return inflectors[inflector](text);}else{return text;}};});"use strict";angular.module("ui.jq",[]).value("uiJqConfig",{}).directive("uiJq",["uiJqConfig","$timeout",function uiJqInjectingFunction(uiJqConfig,$timeout){return{restrict:"A",compile:function uiJqCompilingFunction(tElm,tAttrs){if(!angular.isFunction(tElm[tAttrs.uiJq])){throw new Error('ui-jq: The "'+tAttrs.uiJq+'" function does not exist');}var options=uiJqConfig&&uiJqConfig[tAttrs.uiJq];return function uiJqLinkingFunction(scope,elm,attrs){var linkOptions=[];if(attrs.uiOptions){linkOptions=scope.$eval("["+attrs.uiOptions+"]");if(angular.isObject(options)&&angular.isObject(linkOptions[0])){linkOptions[0]=angular.extend({},options,linkOptions[0]);}}else{if(options){linkOptions=[options];}}if(attrs.ngModel&&elm.is("select,input,textarea")){elm.bind("change",function(){elm.trigger("input");});}function callPlugin(){$timeout(function(){elm[attrs.uiJq].apply(elm,linkOptions);},0,false);}if(attrs.uiRefresh){scope.$watch(attrs.uiRefresh,function(){callPlugin();});}callPlugin();};}};}]);"use strict";angular.module("ui.keypress",[]).factory("keypressHelper",["$parse",function keypress($parse){var keysByCode={8:"backspace",9:"tab",13:"enter",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete"};var capitaliseFirstLetter=function(string){return string.charAt(0).toUpperCase()+string.slice(1);};return function(mode,scope,elm,attrs){var params,combinations=[];params=scope.$eval(attrs["ui"+capitaliseFirstLetter(mode)]);angular.forEach(params,function(v,k){var combination,expression;expression=$parse(v);angular.forEach(k.split(" "),function(variation){combination={expression:expression,keys:{}};angular.forEach(variation.split("-"),function(value){combination.keys[value]=true;});combinations.push(combination);});});elm.bind(mode,function(event){var metaPressed=!!(event.metaKey&&!event.ctrlKey);var altPressed=!!event.altKey;var ctrlPressed=!!event.ctrlKey;var shiftPressed=!!event.shiftKey;var keyCode=event.keyCode;if(mode==="keypress"&&!shiftPressed&&keyCode>=97&&keyCode<=122){keyCode=keyCode-32;}angular.forEach(combinations,function(combination){var mainKeyPressed=combination.keys[keysByCode[keyCode]]||combination.keys[keyCode.toString()];var metaRequired=!!combination.keys.meta;var altRequired=!!combination.keys.alt;var ctrlRequired=!!combination.keys.ctrl;var shiftRequired=!!combination.keys.shift;if(mainKeyPressed&&(metaRequired===metaPressed)&&(altRequired===altPressed)&&(ctrlRequired===ctrlPressed)&&(shiftRequired===shiftPressed)){scope.$apply(function(){combination.expression(scope,{"$event":event});});}});});};}]);angular.module("ui.keypress").directive("uiKeydown",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keydown",scope,elm,attrs);}};}]);angular.module("ui.keypress").directive("uiKeypress",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keypress",scope,elm,attrs);}};}]);angular.module("ui.keypress").directive("uiKeyup",["keypressHelper",function(keypressHelper){return{link:function(scope,elm,attrs){keypressHelper("keyup",scope,elm,attrs);}};}]);"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{"maskDefinitions":{"9":/\d/,"A":/[a-zA-Z]/,"*":/[a-zA-Z0-9]/}}).directive("uiMask",["uiMaskConfig",function(maskConfig){return{priority:100,require:"ngModel",restrict:"A",compile:function uiMaskCompilingFunction(){var options=maskConfig;return function uiMaskLinkingFunction(scope,iElement,iAttrs,controller){var maskProcessed=false,eventsBound=false,maskCaretMap,maskPatterns,maskPlaceholder,maskComponents,minRequiredLength,value,valueMasked,isValid,originalPlaceholder=iAttrs.placeholder,originalMaxlength=iAttrs.maxlength,oldValue,oldValueUnmasked,oldCaretPosition,oldSelectionLength;function initialize(maskAttr){if(!angular.isDefined(maskAttr)){return uninitialize();}processRawMask(maskAttr);if(!maskProcessed){return uninitialize();}initializeElement();bindEventListeners();return true;}function initPlaceholder(placeholderAttr){if(!angular.isDefined(placeholderAttr)){return;}maskPlaceholder=placeholderAttr;if(maskProcessed){eventHandler();}}function formatter(fromModelValue){if(!maskProcessed){return fromModelValue;}value=unmaskValue(fromModelValue||"");isValid=validateValue(value);controller.$setValidity("mask",isValid);return isValid&&value.length?maskValue(value):undefined;}function parser(fromViewValue){if(!maskProcessed){return fromViewValue;}value=unmaskValue(fromViewValue||"");isValid=validateValue(value);controller.$viewValue=value.length?maskValue(value):"";controller.$setValidity("mask",isValid);if(value===""&&controller.$error.required!==undefined){controller.$setValidity("required",false);}return isValid?value:undefined;}var linkOptions={};if(iAttrs.uiOptions){linkOptions=scope.$eval("["+iAttrs.uiOptions+"]");if(angular.isObject(linkOptions[0])){linkOptions=(function(original,current){for(var i in original){if(Object.prototype.hasOwnProperty.call(original,i)){if(!current[i]){current[i]=angular.copy(original[i]);}else{angular.extend(current[i],original[i]);}}}return current;})(options,linkOptions[0]);}}else{linkOptions=options;}iAttrs.$observe("uiMask",initialize);iAttrs.$observe("placeholder",initPlaceholder);controller.$formatters.push(formatter);controller.$parsers.push(parser);function uninitialize(){maskProcessed=false;unbindEventListeners();if(angular.isDefined(originalPlaceholder)){iElement.attr("placeholder",originalPlaceholder);}else{iElement.removeAttr("placeholder");}if(angular.isDefined(originalMaxlength)){iElement.attr("maxlength",originalMaxlength);}else{iElement.removeAttr("maxlength");}iElement.val(controller.$modelValue);controller.$viewValue=controller.$modelValue;return false;}function initializeElement(){value=oldValueUnmasked=unmaskValue(controller.$modelValue||"");valueMasked=oldValue=maskValue(value);isValid=validateValue(value);var viewValue=isValid&&value.length?valueMasked:"";if(iAttrs.maxlength){iElement.attr("maxlength",maskCaretMap[maskCaretMap.length-1]*2);}iElement.attr("placeholder",maskPlaceholder);iElement.val(viewValue);controller.$viewValue=viewValue;}function bindEventListeners(){if(eventsBound){return;}iElement.bind("blur",blurHandler);iElement.bind("mousedown mouseup",mouseDownUpHandler);iElement.bind("input keyup click focus",eventHandler);eventsBound=true;}function unbindEventListeners(){if(!eventsBound){return;}iElement.unbind("blur",blurHandler);iElement.unbind("mousedown",mouseDownUpHandler);iElement.unbind("mouseup",mouseDownUpHandler);iElement.unbind("input",eventHandler);iElement.unbind("keyup",eventHandler);iElement.unbind("click",eventHandler);iElement.unbind("focus",eventHandler);eventsBound=false;}function validateValue(value){return value.length?value.length>=minRequiredLength:true;}function unmaskValue(value){var valueUnmasked="",maskPatternsCopy=maskPatterns.slice();value=value.toString();angular.forEach(maskComponents,function(component){value=value.replace(component,"");});angular.forEach(value.split(""),function(chr){if(maskPatternsCopy.length&&maskPatternsCopy[0].test(chr)){valueUnmasked+=chr;maskPatternsCopy.shift();}});return valueUnmasked;}function maskValue(unmaskedValue){var valueMasked="",maskCaretMapCopy=maskCaretMap.slice();angular.forEach(maskPlaceholder.split(""),function(chr,i){if(unmaskedValue.length&&i===maskCaretMapCopy[0]){valueMasked+=unmaskedValue.charAt(0)||"_";unmaskedValue=unmaskedValue.substr(1);maskCaretMapCopy.shift();}else{valueMasked+=chr;}});return valueMasked;}function getPlaceholderChar(i){var placeholder=iAttrs.placeholder;if(typeof placeholder!=="undefined"&&placeholder[i]){return placeholder[i];}else{return"_";}}function getMaskComponents(){return maskPlaceholder.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_");}function processRawMask(mask){var characterCount=0;maskCaretMap=[];maskPatterns=[];maskPlaceholder="";if(typeof mask==="string"){minRequiredLength=0;var isOptional=false,splitMask=mask.split("");angular.forEach(splitMask,function(chr,i){if(linkOptions.maskDefinitions[chr]){maskCaretMap.push(characterCount);maskPlaceholder+=getPlaceholderChar(i);maskPatterns.push(linkOptions.maskDefinitions[chr]);characterCount++;if(!isOptional){minRequiredLength++;}}else{if(chr==="?"){isOptional=true;}else{maskPlaceholder+=chr;characterCount++;}}});}maskCaretMap.push(maskCaretMap.slice().pop()+1);maskComponents=getMaskComponents();maskProcessed=maskCaretMap.length>1?true:false;}function blurHandler(){oldCaretPosition=0;oldSelectionLength=0;if(!isValid||value.length===0){valueMasked="";iElement.val("");scope.$apply(function(){controller.$setViewValue("");});}}function mouseDownUpHandler(e){if(e.type==="mousedown"){iElement.bind("mouseout",mouseoutHandler);}else{iElement.unbind("mouseout",mouseoutHandler);}}iElement.bind("mousedown mouseup",mouseDownUpHandler);function mouseoutHandler(){oldSelectionLength=getSelectionLength(this);iElement.unbind("mouseout",mouseoutHandler);}function eventHandler(e){e=e||{};var eventWhich=e.which,eventType=e.type;if(eventWhich===16||eventWhich===91){return;}var val=iElement.val(),valOld=oldValue,valMasked,valUnmasked=unmaskValue(val),valUnmaskedOld=oldValueUnmasked,valAltered=false,caretPos=getCaretPosition(this)||0,caretPosOld=oldCaretPosition||0,caretPosDelta=caretPos-caretPosOld,caretPosMin=maskCaretMap[0],caretPosMax=maskCaretMap[valUnmasked.length]||maskCaretMap.slice().shift(),selectionLenOld=oldSelectionLength||0,isSelected=getSelectionLength(this)>0,wasSelected=selectionLenOld>0,isAddition=(val.length>valOld.length)||(selectionLenOld&&val.length>valOld.length-selectionLenOld),isDeletion=(val.length<valOld.length)||(selectionLenOld&&val.length===valOld.length-selectionLenOld),isSelection=(eventWhich>=37&&eventWhich<=40)&&e.shiftKey,isKeyLeftArrow=eventWhich===37,isKeyBackspace=eventWhich===8||(eventType!=="keyup"&&isDeletion&&(caretPosDelta===-1)),isKeyDelete=eventWhich===46||(eventType!=="keyup"&&isDeletion&&(caretPosDelta===0)&&!wasSelected),caretBumpBack=(isKeyLeftArrow||isKeyBackspace||eventType==="click")&&caretPos>caretPosMin;oldSelectionLength=getSelectionLength(this);if(isSelection||(isSelected&&(eventType==="click"||eventType==="keyup"))){return;}if((eventType==="input")&&isDeletion&&!wasSelected&&valUnmasked===valUnmaskedOld){while(isKeyBackspace&&caretPos>caretPosMin&&!isValidCaretPosition(caretPos)){caretPos--;}while(isKeyDelete&&caretPos<caretPosMax&&maskCaretMap.indexOf(caretPos)===-1){caretPos++;}var charIndex=maskCaretMap.indexOf(caretPos);valUnmasked=valUnmasked.substring(0,charIndex)+valUnmasked.substring(charIndex+1);valAltered=true;}valMasked=maskValue(valUnmasked);oldValue=valMasked;oldValueUnmasked=valUnmasked;iElement.val(valMasked);if(valAltered){scope.$apply(function(){controller.$setViewValue(valUnmasked);});}if(isAddition&&(caretPos<=caretPosMin)){caretPos=caretPosMin+1;}if(caretBumpBack){caretPos--;}caretPos=caretPos>caretPosMax?caretPosMax:caretPos<caretPosMin?caretPosMin:caretPos;while(!isValidCaretPosition(caretPos)&&caretPos>caretPosMin&&caretPos<caretPosMax){caretPos+=caretBumpBack?-1:1;}if((caretBumpBack&&caretPos<caretPosMax)||(isAddition&&!isValidCaretPosition(caretPosOld))){caretPos++;}oldCaretPosition=caretPos;setCaretPosition(this,caretPos);}function isValidCaretPosition(pos){return maskCaretMap.indexOf(pos)>-1;}function getCaretPosition(input){if(!input){return 0;}if(input.selectionStart!==undefined){return input.selectionStart;}else{if(document.selection){input.focus();var selection=document.selection.createRange();selection.moveStart("character",-input.value.length);return selection.text.length;}}return 0;}function setCaretPosition(input,pos){if(!input){return 0;}if(input.offsetWidth===0||input.offsetHeight===0){return;}if(input.setSelectionRange){input.focus();input.setSelectionRange(pos,pos);}else{if(input.createTextRange){var range=input.createTextRange();range.collapse(true);range.moveEnd("character",pos);range.moveStart("character",pos);range.select();}}}function getSelectionLength(input){if(!input){return 0;}if(input.selectionStart!==undefined){return(input.selectionEnd-input.selectionStart);}if(document.selection){return(document.selection.createRange().text.length);}return 0;}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement){if(this===null){throw new TypeError();}var t=Object(this);var len=t.length>>>0;if(len===0){return -1;}var n=0;if(arguments.length>1){n=Number(arguments[1]);if(n!==n){n=0;}else{if(n!==0&&n!==Infinity&&n!==-Infinity){n=(n>0||-1)*Math.floor(Math.abs(n));}}}if(n>=len){return -1;}var k=n>=0?n:Math.max(len-Math.abs(n),0);for(;k<len;k++){if(k in t&&t[k]===searchElement){return k;}}return -1;};}};}};}]);"use strict";angular.module("ui.reset",[]).value("uiResetConfig",null).directive("uiReset",["uiResetConfig",function(uiResetConfig){var resetValue=null;if(uiResetConfig!==undefined){resetValue=uiResetConfig;}return{require:"ngModel",link:function(scope,elm,attrs,ctrl){var aElement;aElement=angular.element('<a class="ui-reset" />');elm.wrap('<span class="ui-resetwrap" />').after(aElement);aElement.bind("click",function(e){e.preventDefault();scope.$apply(function(){if(attrs.uiReset){ctrl.$setViewValue(scope.$eval(attrs.uiReset));}else{ctrl.$setViewValue(resetValue);}ctrl.$render();});});}};}]);"use strict";angular.module("ui.route",[]).directive("uiRoute",["$location","$parse",function($location,$parse){return{restrict:"AC",scope:true,compile:function(tElement,tAttrs){var useProperty;if(tAttrs.uiRoute){useProperty="uiRoute";}else{if(tAttrs.ngHref){useProperty="ngHref";}else{if(tAttrs.href){useProperty="href";}else{throw new Error("uiRoute missing a route or href property on "+tElement[0]);}}}return function($scope,elm,attrs){var modelSetter=$parse(attrs.ngModel||attrs.routeModel||"$uiRoute").assign;var watcher=angular.noop;function staticWatcher(newVal){var hash=newVal.indexOf("#");if(hash>-1){newVal=newVal.substr(hash+1);}watcher=function watchHref(){modelSetter($scope,($location.path().indexOf(newVal)>-1));};watcher();}function regexWatcher(newVal){var hash=newVal.indexOf("#");if(hash>-1){newVal=newVal.substr(hash+1);}watcher=function watchRegex(){var regexp=new RegExp("^"+newVal+"$",["i"]);modelSetter($scope,regexp.test($location.path()));};watcher();}switch(useProperty){case"uiRoute":if(attrs.uiRoute){regexWatcher(attrs.uiRoute);}else{attrs.$observe("uiRoute",regexWatcher);}break;case"ngHref":if(attrs.ngHref){staticWatcher(attrs.ngHref);}else{attrs.$observe("ngHref",staticWatcher);}break;case"href":staticWatcher(attrs.href);}$scope.$on("$routeChangeSuccess",function(){watcher();});$scope.$on("$stateChangeSuccess",function(){watcher();});};}};}]);"use strict";angular.module("ui.scroll.jqlite",["ui.scroll"]).service("jqLiteExtras",["$log","$window",function(console,window){return{registerFor:function(element){var convertToPx,css,getMeasurements,getStyle,getWidthHeight,isWindow,scrollTo;css=angular.element.prototype.css;element.prototype.css=function(name,value){var elem,self;self=this;elem=self[0];if(!(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style)){return css.call(self,name,value);}};isWindow=function(obj){return obj&&obj.document&&obj.location&&obj.alert&&obj.setInterval;};scrollTo=function(self,direction,value){var elem,method,preserve,prop,_ref;elem=self[0];_ref={top:["scrollTop","pageYOffset","scrollLeft"],left:["scrollLeft","pageXOffset","scrollTop"]}[direction],method=_ref[0],prop=_ref[1],preserve=_ref[2];if(isWindow(elem)){if(angular.isDefined(value)){return elem.scrollTo(self[preserve].call(self),value);}else{if(prop in elem){return elem[prop];}else{return elem.document.documentElement[method];}}}else{if(angular.isDefined(value)){return elem[method]=value;}else{return elem[method];}}};if(window.getComputedStyle){getStyle=function(elem){return window.getComputedStyle(elem,null);};convertToPx=function(elem,value){return parseFloat(value);};}else{getStyle=function(elem){return elem.currentStyle;};convertToPx=function(elem,value){var core_pnum,left,result,rnumnonpx,rs,rsLeft,style;core_pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;rnumnonpx=new RegExp("^("+core_pnum+")(?!px)[a-z%]+$","i");if(!rnumnonpx.test(value)){return parseFloat(value);}else{style=elem.style;left=style.left;rs=elem.runtimeStyle;rsLeft=rs&&rs.left;if(rs){rs.left=style.left;}style.left=value;result=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft;}return result;}};}getMeasurements=function(elem,measure){var base,borderA,borderB,computedMarginA,computedMarginB,computedStyle,dirA,dirB,marginA,marginB,paddingA,paddingB,_ref;if(isWindow(elem)){base=document.documentElement[{height:"clientHeight",width:"clientWidth"}[measure]];return{base:base,padding:0,border:0,margin:0};}_ref={width:[elem.offsetWidth,"Left","Right"],height:[elem.offsetHeight,"Top","Bottom"]}[measure],base=_ref[0],dirA=_ref[1],dirB=_ref[2];computedStyle=getStyle(elem);paddingA=convertToPx(elem,computedStyle["padding"+dirA])||0;paddingB=convertToPx(elem,computedStyle["padding"+dirB])||0;borderA=convertToPx(elem,computedStyle["border"+dirA+"Width"])||0;borderB=convertToPx(elem,computedStyle["border"+dirB+"Width"])||0;computedMarginA=computedStyle["margin"+dirA];computedMarginB=computedStyle["margin"+dirB];marginA=convertToPx(elem,computedMarginA)||0;marginB=convertToPx(elem,computedMarginB)||0;return{base:base,padding:paddingA+paddingB,border:borderA+borderB,margin:marginA+marginB};};getWidthHeight=function(elem,direction,measure){var computedStyle,measurements,result;measurements=getMeasurements(elem,direction);if(measurements.base>0){return{base:measurements.base-measurements.padding-measurements.border,outer:measurements.base,outerfull:measurements.base+measurements.margin}[measure];}else{computedStyle=getStyle(elem);result=computedStyle[direction];if(result<0||result===null){result=elem.style[direction]||0;}result=parseFloat(result)||0;return{base:result-measurements.padding-measurements.border,outer:result,outerfull:result+measurements.padding+measurements.border+measurements.margin}[measure];}};return angular.forEach({before:function(newElem){var children,elem,i,parent,self,_i,_ref;self=this;elem=self[0];parent=self.parent();children=parent.contents();if(children[0]===elem){return parent.prepend(newElem);}else{for(i=_i=1,_ref=children.length-1;1<=_ref?_i<=_ref:_i>=_ref;i=1<=_ref?++_i:--_i){if(children[i]===elem){angular.element(children[i-1]).after(newElem);return;}}throw new Error("invalid DOM structure "+elem.outerHTML);}},height:function(value){var self;self=this;if(angular.isDefined(value)){if(angular.isNumber(value)){value=value+"px";}return css.call(self,"height",value);}else{return getWidthHeight(this[0],"height","base");}},outerHeight:function(option){return getWidthHeight(this[0],"height",option?"outerfull":"outer");},offset:function(value){var box,doc,docElem,elem,self,win;self=this;if(arguments.length){if(value===void 0){return self;}else{return value;}}box={top:0,left:0};elem=self[0];doc=elem&&elem.ownerDocument;if(!doc){return;}docElem=doc.documentElement;if(elem.getBoundingClientRect){box=elem.getBoundingClientRect();}win=doc.defaultView||doc.parentWindow;return{top:box.top+(win.pageYOffset||docElem.scrollTop)-(docElem.clientTop||0),left:box.left+(win.pageXOffset||docElem.scrollLeft)-(docElem.clientLeft||0)};},scrollTop:function(value){return scrollTo(this,"top",value);},scrollLeft:function(value){return scrollTo(this,"left",value);}},function(value,key){if(!element.prototype[key]){return element.prototype[key]=value;}});}};}]).run(["$log","$window","jqLiteExtras",function(console,window,jqLiteExtras){if(!window.jQuery){return jqLiteExtras.registerFor(angular.element);}}]);"use strict";angular.module("ui.scroll",[]).directive("ngScrollViewport",["$log",function(){return{controller:["$scope","$element",function(scope,element){return element;}]};}]).directive("ngScroll",["$log","$injector","$rootScope","$timeout",function(console,$injector,$rootScope,$timeout){return{require:["?^ngScrollViewport"],transclude:"element",priority:1000,terminal:true,compile:function(element,attr,linker){return function($scope,$element,$attr,controllers){var adapter,adjustBuffer,adjustRowHeight,bof,bottomVisiblePos,buffer,bufferPadding,bufferSize,clipBottom,clipTop,datasource,datasourceName,enqueueFetch,eof,eventListener,fetch,finalize,first,insert,isDatasource,isLoading,itemName,loading,match,next,pending,reload,removeFromBuffer,resizeHandler,scrollHandler,scrollHeight,shouldLoadBottom,shouldLoadTop,tempScope,topVisiblePos,viewport;match=$attr.ngScroll.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/);if(!match){throw new Error('Expected ngScroll in form of "item_ in _datasource_" but got "'+$attr.ngScroll+'"');}itemName=match[1];datasourceName=match[2];isDatasource=function(datasource){return angular.isObject(datasource)&&datasource.get&&angular.isFunction(datasource.get);};datasource=$scope[datasourceName];if(!isDatasource(datasource)){datasource=$injector.get(datasourceName);if(!isDatasource(datasource)){throw new Error(datasourceName+" is not a valid datasource");}}bufferSize=Math.max(3,+$attr.bufferSize||10);bufferPadding=function(){return viewport.height()*Math.max(0.1,+$attr.padding||0.1);};scrollHeight=function(elem){return elem[0].scrollHeight||elem[0].document.documentElement.scrollHeight;};adapter=null;linker(tempScope=$scope.$new(),function(template){var bottomPadding,createPadding,padding,repeaterType,topPadding,viewport;repeaterType=template[0].localName;if(repeaterType==="dl"){throw new Error("ng-scroll directive does not support <"+template[0].localName+"> as a repeating tag: "+template[0].outerHTML);}if(repeaterType!=="li"&&repeaterType!=="tr"){repeaterType="div";}viewport=controllers[0]||angular.element(window);viewport.css({"overflow-y":"auto","display":"block"});padding=function(repeaterType){var div,result,table;switch(repeaterType){case"tr":table=angular.element("<table><tr><td><div></div></td></tr></table>");div=table.find("div");result=table.find("tr");result.paddingHeight=function(){return div.height.apply(div,arguments);};return result;default:result=angular.element("<"+repeaterType+"></"+repeaterType+">");result.paddingHeight=result.height;return result;}};createPadding=function(padding,element,direction){element[{top:"before",bottom:"after"}[direction]](padding);return{paddingHeight:function(){return padding.paddingHeight.apply(padding,arguments);},insert:function(element){return padding[{top:"after",bottom:"before"}[direction]](element);}};};topPadding=createPadding(padding(repeaterType),element,"top");bottomPadding=createPadding(padding(repeaterType),element,"bottom");tempScope.$destroy();return adapter={viewport:viewport,topPadding:topPadding.paddingHeight,bottomPadding:bottomPadding.paddingHeight,append:bottomPadding.insert,prepend:topPadding.insert,bottomDataPos:function(){return scrollHeight(viewport)-bottomPadding.paddingHeight();},topDataPos:function(){return topPadding.paddingHeight();}};});viewport=adapter.viewport;first=1;next=1;buffer=[];pending=[];eof=false;bof=false;loading=datasource.loading||function(){};isLoading=false;removeFromBuffer=function(start,stop){var i,_i;for(i=_i=start;start<=stop?_i<stop:_i>stop;i=start<=stop?++_i:--_i){buffer[i].scope.$destroy();buffer[i].element.remove();}return buffer.splice(start,stop-start);};reload=function(){first=1;next=1;removeFromBuffer(0,buffer.length);adapter.topPadding(0);adapter.bottomPadding(0);pending=[];eof=false;bof=false;return adjustBuffer(false);};bottomVisiblePos=function(){return viewport.scrollTop()+viewport.height();};topVisiblePos=function(){return viewport.scrollTop();};shouldLoadBottom=function(){return !eof&&adapter.bottomDataPos()<bottomVisiblePos()+bufferPadding();};clipBottom=function(){var bottomHeight,i,itemHeight,overage,_i,_ref;bottomHeight=0;overage=0;for(i=_i=_ref=buffer.length-1;_ref<=0?_i<=0:_i>=0;i=_ref<=0?++_i:--_i){itemHeight=buffer[i].element.outerHeight(true);if(adapter.bottomDataPos()-bottomHeight-itemHeight>bottomVisiblePos()+bufferPadding()){bottomHeight+=itemHeight;overage++;eof=false;}else{break;}}if(overage>0){adapter.bottomPadding(adapter.bottomPadding()+bottomHeight);removeFromBuffer(buffer.length-overage,buffer.length);next-=overage;return console.log("clipped off bottom "+overage+" bottom padding "+(adapter.bottomPadding()));}};shouldLoadTop=function(){return !bof&&(adapter.topDataPos()>topVisiblePos()-bufferPadding());};clipTop=function(){var item,itemHeight,overage,topHeight,_i,_len;topHeight=0;overage=0;for(_i=0,_len=buffer.length;_i<_len;_i++){item=buffer[_i];itemHeight=item.element.outerHeight(true);if(adapter.topDataPos()+topHeight+itemHeight<topVisiblePos()-bufferPadding()){topHeight+=itemHeight;overage++;bof=false;}else{break;}}if(overage>0){adapter.topPadding(adapter.topPadding()+topHeight);removeFromBuffer(0,overage);first+=overage;return console.log("clipped off top "+overage+" top padding "+(adapter.topPadding()));}};enqueueFetch=function(direction,scrolling){if(!isLoading){isLoading=true;loading(true);}if(pending.push(direction)===1){return fetch(scrolling);}};insert=function(index,item){var itemScope,toBeAppended,wrapper;itemScope=$scope.$new();itemScope[itemName]=item;toBeAppended=index>first;itemScope.$index=index;if(toBeAppended){itemScope.$index--;}wrapper={scope:itemScope};linker(itemScope,function(clone){wrapper.element=clone;if(toBeAppended){if(index===next){adapter.append(clone);return buffer.push(wrapper);}else{buffer[index-first].element.after(clone);return buffer.splice(index-first+1,0,wrapper);}}else{adapter.prepend(clone);return buffer.unshift(wrapper);}});return{appended:toBeAppended,wrapper:wrapper};};adjustRowHeight=function(appended,wrapper){var newHeight;if(appended){return adapter.bottomPadding(Math.max(0,adapter.bottomPadding()-wrapper.element.outerHeight(true)));}else{newHeight=adapter.topPadding()-wrapper.element.outerHeight(true);if(newHeight>=0){return adapter.topPadding(newHeight);}else{return viewport.scrollTop(viewport.scrollTop()+wrapper.element.outerHeight(true));}}};adjustBuffer=function(scrolling,newItems,finalize){var doAdjustment;doAdjustment=function(){console.log("top {actual="+(adapter.topDataPos())+" visible from="+(topVisiblePos())+" bottom {visible through="+(bottomVisiblePos())+" actual="+(adapter.bottomDataPos())+"}");if(shouldLoadBottom()){enqueueFetch(true,scrolling);}else{if(shouldLoadTop()){enqueueFetch(false,scrolling);}}if(finalize){return finalize();}};if(newItems){return $timeout(function(){var row,_i,_len;for(_i=0,_len=newItems.length;_i<_len;_i++){row=newItems[_i];adjustRowHeight(row.appended,row.wrapper);}return doAdjustment();});}else{return doAdjustment();}};finalize=function(scrolling,newItems){return adjustBuffer(scrolling,newItems,function(){pending.shift();if(pending.length===0){isLoading=false;return loading(false);}else{return fetch(scrolling);}});};fetch=function(scrolling){var direction;direction=pending[0];if(direction){if(buffer.length&&!shouldLoadBottom()){return finalize(scrolling);}else{return datasource.get(next,bufferSize,function(result){var item,newItems,_i,_len;newItems=[];if(result.length===0){eof=true;adapter.bottomPadding(0);console.log("appended: requested "+bufferSize+" records starting from "+next+" recieved: eof");}else{clipTop();for(_i=0,_len=result.length;_i<_len;_i++){item=result[_i];newItems.push(insert(++next,item));}console.log("appended: requested "+bufferSize+" received "+result.length+" buffer size "+buffer.length+" first "+first+" next "+next);}return finalize(scrolling,newItems);});}}else{if(buffer.length&&!shouldLoadTop()){return finalize(scrolling);}else{return datasource.get(first-bufferSize,bufferSize,function(result){var i,newItems,_i,_ref;newItems=[];if(result.length===0){bof=true;adapter.topPadding(0);console.log("prepended: requested "+bufferSize+" records starting from "+(first-bufferSize)+" recieved: bof");}else{clipBottom();for(i=_i=_ref=result.length-1;_ref<=0?_i<=0:_i>=0;i=_ref<=0?++_i:--_i){newItems.unshift(insert(--first,result[i]));}console.log("prepended: requested "+bufferSize+" received "+result.length+" buffer size "+buffer.length+" first "+first+" next "+next);}return finalize(scrolling,newItems);});}}};resizeHandler=function(){if(!$rootScope.$$phase&&!isLoading){adjustBuffer(false);return $scope.$apply();}};viewport.bind("resize",resizeHandler);scrollHandler=function(){if(!$rootScope.$$phase&&!isLoading){adjustBuffer(true);return $scope.$apply();}};viewport.bind("scroll",scrollHandler);$scope.$watch(datasource.revision,function(){return reload();});if(datasource.scope){eventListener=datasource.scope.$new();}else{eventListener=$scope.$new();}$scope.$on("$destroy",function(){eventListener.$destroy();viewport.unbind("resize",resizeHandler);return viewport.unbind("scroll",scrollHandler);});eventListener.$on("update.items",function(event,locator,newItem){var wrapper,_fn,_i,_len,_ref;if(angular.isFunction(locator)){_fn=function(wrapper){return locator(wrapper.scope);};for(_i=0,_len=buffer.length;_i<_len;_i++){wrapper=buffer[_i];_fn(wrapper);}}else{if((0<=(_ref=locator-first-1)&&_ref<buffer.length)){buffer[locator-first-1].scope[itemName]=newItem;}}return null;});eventListener.$on("delete.items",function(event,locator){var i,item,temp,wrapper,_fn,_i,_j,_k,_len,_len1,_len2,_ref;if(angular.isFunction(locator)){temp=[];for(_i=0,_len=buffer.length;_i<_len;_i++){item=buffer[_i];temp.unshift(item);}_fn=function(wrapper){if(locator(wrapper.scope)){removeFromBuffer(temp.length-1-i,temp.length-i);return next--;}};for(i=_j=0,_len1=temp.length;_j<_len1;i=++_j){wrapper=temp[i];_fn(wrapper);}}else{if((0<=(_ref=locator-first-1)&&_ref<buffer.length)){removeFromBuffer(locator-first-1,locator-first);next--;}}for(i=_k=0,_len2=buffer.length;_k<_len2;i=++_k){item=buffer[i];item.scope.$index=first+i;}return adjustBuffer(false);});return eventListener.$on("insert.item",function(event,locator,item){var i,inserted,temp,wrapper,_fn,_i,_j,_k,_len,_len1,_len2,_ref;inserted=[];if(angular.isFunction(locator)){temp=[];for(_i=0,_len=buffer.length;_i<_len;_i++){item=buffer[_i];temp.unshift(item);}_fn=function(wrapper){var j,newItems,_k,_len2,_results;if(newItems=locator(wrapper.scope)){insert=function(index,newItem){insert(index,newItem);return next++;};if(angular.isArray(newItems)){_results=[];for(j=_k=0,_len2=newItems.length;_k<_len2;j=++_k){item=newItems[j];_results.push(inserted.push(insert(i+j,item)));}return _results;}else{return inserted.push(insert(i,newItems));}}};for(i=_j=0,_len1=temp.length;_j<_len1;i=++_j){wrapper=temp[i];_fn(wrapper);}}else{if((0<=(_ref=locator-first-1)&&_ref<buffer.length)){inserted.push(insert(locator,item));next++;}}for(i=_k=0,_len2=buffer.length;_k<_len2;i=++_k){item=buffer[i];item.scope.$index=first+i;}return adjustBuffer(false,inserted);});};}};}]);"use strict";angular.module("ui.scrollfix",[]).directive("uiScrollfix",["$window",function($window){return{require:"^?uiScrollfixTarget",link:function(scope,elm,attrs,uiScrollfixTarget){var top=elm[0].offsetTop,$target=uiScrollfixTarget&&uiScrollfixTarget.$element||angular.element($window);if(!attrs.uiScrollfix){attrs.uiScrollfix=top;}else{if(typeof(attrs.uiScrollfix)==="string"){if(attrs.uiScrollfix.charAt(0)==="-"){attrs.uiScrollfix=top-parseFloat(attrs.uiScrollfix.substr(1));}else{if(attrs.uiScrollfix.charAt(0)==="+"){attrs.uiScrollfix=top+parseFloat(attrs.uiScrollfix.substr(1));}}}}function onScroll(){var offset;if(angular.isDefined($window.pageYOffset)){offset=$window.pageYOffset;}else{var iebody=(document.compatMode&&document.compatMode!=="BackCompat")?document.documentElement:document.body;offset=iebody.scrollTop;}if(!elm.hasClass("ui-scrollfix")&&offset>attrs.uiScrollfix){elm.addClass("ui-scrollfix");}else{if(elm.hasClass("ui-scrollfix")&&offset<attrs.uiScrollfix){elm.removeClass("ui-scrollfix");}}}$target.on("scroll",onScroll);scope.$on("$destroy",function(){$target.off("scroll",onScroll);});}};}]).directive("uiScrollfixTarget",[function(){return{controller:["$element",function($element){this.$element=$element;}]};}]);"use strict";angular.module("ui.showhide",[]).directive("uiShow",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiShow,function(newVal){if(newVal){elm.addClass("ui-show");}else{elm.removeClass("ui-show");}});};}]).directive("uiHide",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiHide,function(newVal){if(newVal){elm.addClass("ui-hide");}else{elm.removeClass("ui-hide");}});};}]).directive("uiToggle",[function(){return function(scope,elm,attrs){scope.$watch(attrs.uiToggle,function(newVal){if(newVal){elm.removeClass("ui-hide").addClass("ui-show");}else{elm.removeClass("ui-show").addClass("ui-hide");}});};}]);"use strict";angular.module("ui.unique",[]).filter("unique",["$parse",function($parse){return function(items,filterOn){if(filterOn===false){return items;}if((filterOn||angular.isUndefined(filterOn))&&angular.isArray(items)){var newItems=[],get=angular.isString(filterOn)?$parse(filterOn):function(item){return item;};var extractValueToCompare=function(item){return angular.isObject(item)?get(item):item;};angular.forEach(items,function(item){var isDuplicate=false;for(var i=0;i<newItems.length;i++){if(angular.equals(extractValueToCompare(newItems[i]),extractValueToCompare(item))){isDuplicate=true;break;}}if(!isDuplicate){newItems.push(item);}});items=newItems;}return items;};}]);"use strict";angular.module("ui.validate",[]).directive("uiValidate",function(){return{restrict:"A",require:"ngModel",link:function(scope,elm,attrs,ctrl){var validateFn,validators={},validateExpr=scope.$eval(attrs.uiValidate);if(!validateExpr){return;}if(angular.isString(validateExpr)){validateExpr={validator:validateExpr};}angular.forEach(validateExpr,function(exprssn,key){validateFn=function(valueToValidate){var expression=scope.$eval(exprssn,{"$value":valueToValidate});if(angular.isObject(expression)&&angular.isFunction(expression.then)){expression.then(function(){ctrl.$setValidity(key,true);},function(){ctrl.$setValidity(key,false);});return valueToValidate;}else{if(expression){ctrl.$setValidity(key,true);return valueToValidate;}else{ctrl.$setValidity(key,false);return valueToValidate;}}};validators[key]=validateFn;ctrl.$formatters.push(validateFn);ctrl.$parsers.push(validateFn);});function apply_watch(watch){if(angular.isString(watch)){scope.$watch(watch,function(){angular.forEach(validators,function(validatorFn){validatorFn(ctrl.$modelValue);});});return;}if(angular.isArray(watch)){angular.forEach(watch,function(expression){scope.$watch(expression,function(){angular.forEach(validators,function(validatorFn){validatorFn(ctrl.$modelValue);});});});return;}if(angular.isObject(watch)){angular.forEach(watch,function(expression,validatorKey){if(angular.isString(expression)){scope.$watch(expression,function(){validators[validatorKey](ctrl.$modelValue);});}if(angular.isArray(expression)){angular.forEach(expression,function(intExpression){scope.$watch(intExpression,function(){validators[validatorKey](ctrl.$modelValue);});});}});}}if(attrs.uiValidateWatch){apply_watch(scope.$eval(attrs.uiValidateWatch));}}};});angular.module("ui.utils",["ui.event","ui.format","ui.highlight","ui.include","ui.indeterminate","ui.inflector","ui.jq","ui.keypress","ui.mask","ui.reset","ui.route","ui.scrollfix","ui.scroll","ui.scroll.jqlite","ui.showhide","ui.unique","ui.validate"]);